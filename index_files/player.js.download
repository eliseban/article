/*! News Corp RE-Player - stable-4  - v1.7.2-1 - 2023-3-10 12:12:02 */
!function(a){function o(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return a[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var e={};o.m=a,o.c=e,o.d=function(n,e,t){o.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(n,a){if(1&a&&(n=o(n)),8&a)return n;if(4&a&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&a&&"string"!=typeof n)for(var i in n)o.d(t,i,function(e){return n[e]}.bind(null,i));return t},o.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="",o(o.s=6)}([function(g,e,t){"use strict";function _(n){var e=i.indexOf(n);0<=e&&(i.splice(e,1),v())}function s(n,e){return void 0===e?"Failed to execute '"+n+"' on 'ResizeObserver': 1 argument required, but only 0 present.":e&&e.nodeType===window.Node.ELEMENT_NODE?void 0:"Failed to execute '"+n+"' on 'ResizeObserver': parameter 1 is not of type 'Element'."}function c(a,e){for(var t=0;t<a.length;t+=1)if(a[t].target===e)return t;return-1}Object.defineProperty(e,"__esModule",{value:!0});var l=t(7),E=t(8),i=[],n=function(){function t(n){this.$$observationTargets=[],this.$$activeTargets=[],this.$$skippedTargets=[];var a=function(t){return void 0===t?"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.":"function"==typeof t?void 0:"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function."}(n);if(a)throw TypeError(a);this.$$callback=n}return t.prototype.observe=function(a){var e=s("observe",a),n;if(e)throw TypeError(e);0<=c(this.$$observationTargets,a)||(this.$$observationTargets.push(new l.ResizeObservation(a)),n=this,0>i.indexOf(n)&&(i.push(n),p()))},t.prototype.unobserve=function(a){var e=s("unobserve",a);if(e)throw TypeError(e);var t=c(this.$$observationTargets,a);0>t||(this.$$observationTargets.splice(t,1),0===this.$$observationTargets.length&&_(this))},t.prototype.disconnect=function(){this.$$observationTargets=[],this.$$activeTargets=[],_(this)},t}();e.ResizeObserver=n;var a=function(a){i.forEach(function(e){e.$$activeTargets=[],e.$$skippedTargets=[],e.$$observationTargets.forEach(function(t){t.isActive()&&(d(t.target)>a?e.$$activeTargets.push(t):e.$$skippedTargets.push(t))})})},r=function(){var a=1/0;return i.forEach(function(e){if(e.$$activeTargets.length){var r=[];e.$$activeTargets.forEach(function(e){var t=new E.ResizeObserverEntry(e.target);r.push(t),e.$$broadcastWidth=t.contentRect.width,e.$$broadcastHeight=t.contentRect.height;var n=d(e.target);n<a&&(a=n)}),e.$$callback(r,e),e.$$activeTargets=[]}}),a},d=function(n){for(var e=0;n.parentNode;)n=n.parentNode,e+=1;return e},o=function(){var n=0,t;for(a(n);i.some(function(t){return!!t.$$activeTargets.length});)n=r(),a(n);i.some(function(t){return!!t.$$skippedTargets.length})&&(t=new window.ErrorEvent("ResizeLoopError",{message:"ResizeObserver loop completed with undelivered notifications."}),window.dispatchEvent(t))},p=function(){y||m()},m=function(){y=window.requestAnimationFrame(function(){o(),m()})},v=function(){y&&!i.some(function(t){return!!t.$$observationTargets.length})&&(window.cancelAnimationFrame(y),y=void 0)},y;e.install=function(){return window.ResizeObserver=n}},function(t){var a=Math.round,r=Math.floor;t.exports=function(){"use strict";var C="millisecond",T="second",N="minute",I="hour",b="day",P="week",w="month",L="quarter",O="year",R="date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(a,e,t){var n=a+"";return!n||n.length>=e?a:""+Array(e+1-n.length).join(t)+a},u="en",m={};m[u]={name:"en",weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]};var v=function(t){return t instanceof _},y=function(a,o,t){var s;if(!a)return u;if("string"==typeof a)m[a]&&(s=a),o&&(m[a]=o,s=a);else{var i=a.name;m[i]=a,s=i}return!t&&s&&(u=s),s||!t&&u},g=function(a,e){if(v(a))return a.clone();var i="object"==typeof e?e:{};return i.date=a,i.args=arguments,new _(i)},D={s:d,z:function(a){var e=-a.utcOffset(),t=Math.abs(e),n=r(t/60);return(0>=e?"+":"-")+d(n,2,"0")+":"+d(t%60,2,"0")},m:function a(e,t){if(e.date()<t.date())return-a(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,w),r=0>t-i,o=e.clone().add(n+(r?-1:1),w);return+(-(n+(t-i)/(r?i-o:o-i))||0)},a:function(t){return 0>t?Math.ceil(t)||0:r(t)},p:function(d){return{M:w,y:O,w:P,d:b,D:R,h:I,m:N,s:T,ms:C,Q:L}[d]||((d||"")+"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}};D.l=y,D.i=v,D.w=function(n,e){return g(n,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function e(t){this.$L=y(t.locale,null,!0),this.parse(t)}var t=e.prototype;return t.parse=function(t){this.$d=function(a){var e=a.date,s=a.utc;if(null===e)return new Date(NaN);if(D.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(p);if(n){var i=n[2]-1||0,r=(n[7]||"0").substring(0,3);return s?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},t.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},t.$utils=function(){return D},t.isValid=function(){return"Invalid Date"!==this.$d.toString()},t.isSame=function(a,e){var t=g(a);return this.startOf(e)<=t&&t<=this.endOf(e)},t.isAfter=function(n,e){return g(n)<this.startOf(e)},t.isBefore=function(n,e){return this.endOf(e)<g(n)},t.$g=function(a,e,t){return D.u(a)?this[e]:this.set(t,a)},t.unix=function(){return r(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(t,e){var a=this,i=!!D.u(e)||e,n=D.p(t),r=function(r,e){var t=D.w(a.$u?Date.UTC(a.$y,e,r):new Date(a.$y,e,r),a);return i?t:t.endOf(b)},o=function(n,e){return D.w(a.toDate()[n].apply(a.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),a)},s=this.$W,l=this.$M,c=this.$D,d="set"+(this.$u?"UTC":"");switch(n){case O:return i?r(1,0):r(31,11);case w:return i?r(1,l):r(0,l+1);case P:var p=this.$locale().weekStart||0,m=(s<p?s+7:s)-p;return r(i?c-m:c+(6-m),l);case b:case R:return o(d+"Hours",0);case I:return o(d+"Minutes",1);case N:return o(d+"Seconds",2);case T:return o(d+"Milliseconds",3);default:return this.clone();}},t.endOf=function(t){return this.startOf(t,!1)},t.$set=function(e,t){var n=D.p(e),a="set"+(this.$u?"UTC":""),i=(o={},o[b]=a+"Date",o[R]=a+"Date",o[w]=a+"Month",o[O]=a+"FullYear",o[I]=a+"Hours",o[N]=a+"Minutes",o[T]=a+"Seconds",o[C]=a+"Milliseconds",o)[n],r=n===b?this.$D+(t-this.$W):t,o;if(n===w||n===O){var s=this.clone().set(R,1);s.$d[i](r),s.init(),this.$d=s.set(R,Math.min(this.$D,s.daysInMonth())).$d}else i&&this.$d[i](r);return this.init(),this},t.set=function(n,e){return this.clone().$set(n,e)},t.get=function(t){return this[D.p(t)]()},t.add=function(i,t){var r=this,n;i=+i;var o=D.p(t),s=function(e){var t=g(r);return D.w(t.date(t.date()+a(e*i)),r)};if(o===w)return this.set(w,this.$M+i);if(o===O)return this.set(O,this.$y+i);if(o===b)return s(1);if(o===P)return s(7);var l=(n={},n[N]=6e4,n[I]=36e5,n[T]=1e3,n)[o]||1,c=this.$d.getTime()+i*l;return D.w(c,this)},t.subtract=function(n,e){return this.add(-1*n,e)},t.format=function(d){var m=this;if(!this.isValid())return"Invalid Date";var t=d||"YYYY-MM-DDTHH:mm:ssZ",n=D.z(this),e=this.$locale(),r=this.$H,o=this.$m,a=this.$M,s=e.weekdays,c=e.months,l=function(n,e,a,i){return n&&(n[e]||n(m,t))||a[e].substr(0,i)},u=function(t){return D.s(r%12||12,t,"0")},p=e.meridiem||function(a,e,t){var n=12>a?"AM":"PM";return t?n.toLowerCase():n},g={YY:(this.$y+"").slice(-2),YYYY:this.$y,M:a+1,MM:D.s(a+1,2,"0"),MMM:l(e.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:D.s(this.$D,2,"0"),d:this.$W+"",dd:l(e.weekdaysMin,this.$W,s,2),ddd:l(e.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:r+"",HH:D.s(r,2,"0"),h:u(1),hh:u(2),a:p(r,o,!0),A:p(r,o,!1),m:o+"",mm:D.s(o,2,"0"),s:this.$s+"",ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:n};return t.replace(M,function(a,e){return e||g[a]||n.replace(":","")})},t.utcOffset=function(){return 15*-a(this.$d.getTimezoneOffset()/15)},t.diff=function(t,e,n){var a=D.p(e),i=g(t),r=6e4*(i.utcOffset()-this.utcOffset()),o=this-i,s=D.m(this,i),l;return s=(l={},l[O]=s/12,l[w]=s,l[L]=s/3,l[P]=(o-r)/6048e5,l[b]=(o-r)/864e5,l[I]=o/36e5,l[N]=o/6e4,l[T]=o/1e3,l)[a]||o,n?s:D.a(s)},t.daysInMonth=function(){return this.endOf(w).$D},t.$locale=function(){return m[this.$L]},t.locale=function(a,r){if(!a)return this.$L;var t=this.clone(),n=y(a,r,!0);return n&&(t.$L=n),t},t.clone=function(){return D.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},e}(),E=_.prototype;return g.prototype=E,[["$ms",C],["$s",T],["$m",N],["$H",I],["$W",b],["$M",w],["$y",O],["$D",R]].forEach(function(n){E[n[1]]=function(e){return this.$g(e,n[0],n[1])}}),g.extend=function(n,e){return n.$i||(n(e,_,g),n.$i=!0),g},g.locale=y,g.isDayjs=v,g.unix=function(t){return g(1e3*t)},g.en=m[u],g.Ls=m,g.p={},g}()},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContentRect=function(a){if("getBBox"in a){var e=a.getBBox();return Object.freeze({height:e.height,left:0,top:0,width:e.width})}var t=window.getComputedStyle(a);return Object.freeze({height:parseFloat(t.height||"0"),left:parseFloat(t.paddingLeft||"0"),top:parseFloat(t.paddingTop||"0"),width:parseFloat(t.width||"0")})}},,function(t){t.exports=function(){"use strict";return function(g,e,_){function n(a,e,t,n){return o.fromToBase(a,e,t,n)}g=g||{};var o=e.prototype,E={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};_.en.relativeTime=E,o.fromToBase=function(e,t,n,i,a){for(var r=n.$locale().relativeTime||E,o=g.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],s=o.length,d=0,p,c,l,u;d<s;d+=1){u=o[d],u.d&&(p=i?_(e).diff(n,u.d,!0):n.diff(e,u.d,!0));var m=(g.rounding||Math.round)(Math.abs(p));if(l=0<p,m<=u.r||!u.r){1>=m&&0<d&&(u=o[d-1]);var v=r[u.l];a&&(m=a(""+m)),c="string"==typeof v?v.replace("%d",m):v(m,t,u.l,l);break}}if(t)return c;var A=l?r.future:r.past;return"function"==typeof A?A(c):A.replace("%s",c)},o.to=function(a,e){return n(a,e,this,!0)},o.from=function(a,e){return n(a,e,this)};var t=function(t){return t.$u?_.utc():_()};o.toNow=function(n){return this.to(t(this),n)},o.fromNow=function(n){return this.from(t(this),n)}}}()},,function(a,e,t){t(22),t(9),t(10),a.exports=t(11)},function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(2),i=function(){function t(t){this.target=t,this.$$broadcastWidth=this.$$broadcastHeight=0}return Object.defineProperty(t.prototype,"broadcastWidth",{get:function(){return this.$$broadcastWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"broadcastHeight",{get:function(){return this.$$broadcastHeight},enumerable:!0,configurable:!0}),t.prototype.isActive=function(){var t=n.ContentRect(this.target);return!!t&&(t.width!==this.broadcastWidth||t.height!==this.broadcastHeight)},t}();e.ResizeObservation=i},function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(2);e.ResizeObserverEntry=function(t){this.target=t,this.contentRect=n.ContentRect(t)}},function(){},function(){},function(){},,,,,,,,,,,function(Is,e,t){"use strict";function n(s,e){var t="function"==typeof Symbol&&s[Symbol.iterator];if(!t)return s;var l=t.call(s),o=[],a,i;try{for(;(void 0===e||0<e--)&&!(a=l.next()).done;)o.push(a.value)}catch(t){i={error:t}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(i)throw i.error}}return o}function x(a,e,t){if(t||2===arguments.length)for(var n=0,r=e.length,o;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return a.concat(o||Array.prototype.slice.call(e))}function U(B,e,t){if(void 0===t&&(t={}),void 0===e||isNaN(e))throw Error("maxHeight is required");var U=function(t){return"string"==typeof t?x([],n(document.querySelectorAll(t)),!1):"length"in t?x([],n(t),!1):[t]}(B);if(U.length)for(var i=t.character,r=void 0===i?"\u2026":i,o=t.classname,a=void 0===o?"js-shave":o,s=t.spaces,c=void 0===s||s,H=t.charclassname,u=void 0===H?"js-shave-char":H,G=t.link,p=void 0===G?{}:G,h="boolean"!=typeof c||c,v=p&&"{}"!==JSON.stringify(p)&&p.href,m=v?"a":"span",f=0;f<U.length;f+=1){var y=U[f],g=y.style,_=y.querySelector("."+a),E=void 0===y.textContent?"innerText":"textContent";_&&(y.removeChild(y.querySelector("."+u)),y[E]=y[E]);var A=y[E],S=h?A.split(" "):A;if(!(2>S.length)){var C=g.height;g.height="auto";var w=g.maxHeight;if(g.maxHeight="none",y.offsetHeight<=e)g.height=C,g.maxHeight=w;else{var b=v&&p.textContent?p.textContent:r,Y=document.createElement(m),N={className:u,textContent:b};for(var I in N)Y[I]=N[I],Y.textContent=r;if(v)for(var P in p)Y[P]=p[P];for(var O=S.length-1,L=0,M=void 0;L<O;)M=L+O+1>>1,y[E]=h?S.slice(0,M).join(" "):S.slice(0,M),y.insertAdjacentElement("beforeend",Y),y.offsetHeight>e?O=M-1:L=M;y[E]=h?S.slice(0,O).join(" "):S.slice(0,O),y.insertAdjacentElement("beforeend",Y);var R=h?" ".concat(S.slice(O).join(" ")):S.slice(O),D=document.createTextNode(R),k=document.createElement("span");k.classList.add(a),k.style.display="none",k.appendChild(D),y.insertAdjacentElement("beforeend",k),g.height=C,g.maxHeight=w}}}}var H=Math.PI,Ps=Math.round,Ls=Math.min,Os=Math.floor,Rs=Math.abs;t.r(e);var Ms=function(){function a(){}return a.getDomain=function(e){void 0===e&&(e="");var t=window.location.hostname;if(e){var n=document.createElement("a");n.href=e,n.hostname&&(t=n.hostname)}return a.cleanHostname(t)},a.getIFrameURL=function(){var e=a.getSearchParams(),t=window.location.hostname;return(e.amp&&"1"===e.amp||window.location!=window.parent.location)&&(t=document.referrer),a.cleanHostname(t)},a.cleanHostname=function(e){void 0===e&&(e="");var t=/^(\bamp-\b)|(\bwww\.\b)|(\bamp\.\b)|(\b-com-au\.cdn\.ampproject\.org\b)/gi;return e=e.replace(t,function(e){return e===a.AMP_URL_IDENTIFIER?".com.au":""})},a.isAmp=function(){var e=a.getSearchParams();return e.amp&&"1"===e.amp},a.getSearchUrl=function(){return location.search},a.getSearchParams=function(){for(var a={},e=0,t=this.getSearchUrl().substr(1).split("&"),n;e<t.length;e++)if(n=t[e],""!==n){var i=n.split("=");2===i.length&&(a[i[0]]=i[1])}return a},a.AMP_URL_IDENTIFIER="-com-au.cdn.ampproject.org",a}(),r=function(){function t(t){this.navigator=t}return t.prototype.isIphone=function(){return /iPhone/i.test(this.navigator.userAgent)},t.prototype.isAndroid=function(){return /android/i.test(this.navigator.userAgent)},t.prototype.isIOS=function(){return /iPad|iPhone|iPod/i.test(this.navigator.userAgent)},t.prototype.isMobile=function(){return /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(this.navigator.userAgent)},t.prototype.isDesktop=function(){return!this.isIOS()&&!this.isMobile()},t.prototype.isIE11=function(){return!!window.MSInputMethodContext&&!!document.documentMode},t.prototype.isIpad=function(){return /iPad/i.test(this.navigator.userAgent)},t.prototype.isPortrait=function(){return window&&window.innerHeight>window.innerWidth||screen&&screen.availHeight>screen.availWidth},t.prototype.isLandscapeMode=function(){return!this.isPortrait()},t.prototype.isChrome=function(){var t;return /Chrome/.test(this.navigator.userAgent)&&/Google Inc/.test(this.navigator.vendor)||0<(null===(t=this.navigator.userAgent.match("CriOS"))||void 0===t?void 0:t.length)},t.prototype.isSafari=function(){return /^((?!chrome|android).)*safari/i.test(this.navigator.userAgent)&&!this.navigator.userAgent.match("CriOS")},t}(),Ds=function(){function t(){}return t.newsSites=function(){return t.PLNN_SITES.concat(t.NCA).concat(t.PRESTIGE).concat(t.FOOD_TRAVEL).concat(t.SKY_SITES).concat([t.CODESPORTS])},t.DAILY_TELEGRAPH="dailytelegraph",t.THE_CHRONICLE="thechronicle",t.THE_AUSTRALIAN="theaustralian",t.HERALD_SUN="heraldsun",t.THE_ADVERTISER="adelaidenow",t.GEELONG_ADVERTISER="geelongadvertiser",t.TOWNSVILLE_BULLETIN="townsvillebulletin",t.GOLDCOAST_BULLETIN="goldcoastbulletin",t.CAIRNS_POST="cairnspost",t.THE_MERCURY="themercury",t.NT_NEWS="ntnews",t.BEST_RECIPES="bestrecipes",t.BODY_SOUL="bodyandsoul",t.DELICIOUS="delicious",t.GQ="gq",t.KIDSPOT="kidspot",t.VOGUE="vogue",t.TASTE="taste",t.WHIMN="whimn",t.COURIER_MAIL="couriermail",t.NEWS="news",t.WEEKLY_TIMES_NOW="weeklytimesnow",t.ESCAPE="escape",t.CODESPORTS="codesports",t.KIDSNEWS="kidsnews",t.SKY_NON_PROD="sn",t.SKY="skynews",t.PLNN_SITES=[t.DAILY_TELEGRAPH,t.THE_CHRONICLE,t.HERALD_SUN,t.COURIER_MAIL,t.THE_ADVERTISER,t.TOWNSVILLE_BULLETIN,t.GOLDCOAST_BULLETIN,t.NT_NEWS,t.THE_MERCURY,t.CAIRNS_POST,t.GEELONG_ADVERTISER,t.WEEKLY_TIMES_NOW],t.BETA_SITES=[t.NT_NEWS,t.GOLDCOAST_BULLETIN,t.BEST_RECIPES],t.NCA=[t.NEWS,t.WHIMN,t.BODY_SOUL,t.KIDSPOT,t.KIDSNEWS],t.PRESTIGE=[t.THE_AUSTRALIAN,t.VOGUE,t.GQ],t.FOOD_TRAVEL=[t.TASTE,t.DELICIOUS,t.BEST_RECIPES,t.ESCAPE],t.VIDORA_DISABLED_SITES=[t.KIDSPOT,t.TASTE,t.DELICIOUS,t.BEST_RECIPES,t.SKY_NON_PROD,t.SKY],t.AB_TEST_DISABLED_SITES=[t.KIDSPOT,t.TASTE,t.BEST_RECIPES],t.PREMIUM_VIDEO_SITES=[t.THE_ADVERTISER,t.COURIER_MAIL,t.DAILY_TELEGRAPH,t.HERALD_SUN,t.CAIRNS_POST,t.GEELONG_ADVERTISER,t.GOLDCOAST_BULLETIN,t.NT_NEWS,t.THE_CHRONICLE,t.TOWNSVILLE_BULLETIN,t.WEEKLY_TIMES_NOW,t.THE_MERCURY,t.THE_AUSTRALIAN,t.CODESPORTS],t.PROJECT0_SITES=[t.NEWS],t.ADS_DISABLED_SITES=["supercoach.adelaidenow.com.au","supercoach.cairnspost.com.au","supercoach.couriermail.com.au","supercoach.dailytelegraph.com.au","supercoach.foxsports.com.au","supercoach.geelongadvertiser.com.au","supercoach.goldcoastbulletin.com.au","supercoach.heraldsun.com.au","supercoach.themercury.com.au","supercoach.ntnews.com.au","supercoach.townsvillebulletin.com.au"],t.SKY_SITES=[t.SKY_NON_PROD,t.SKY],t}(),a=function(){function t(){}return t.get=function(){var n="",e=document.getElementsByName("keywords");return 0<e.length&&(n=e[0].content),n},t}(),ks=function(){function t(){}return t.addClass=function(a,e){if(!a.classList.contains(e))for(var t=0,n=(e=e.trim()).split(" "),i;t<n.length;t++)i=n[t],a.classList.add(i)},t.removeClass=function(n,e){-1<n.className.indexOf(e)&&(-1<n.className.indexOf(" "+e)&&(e=" "+e),n.className=n.className.replace(e,""))},t.hasClass=function(n,e){return n&&n.classList.contains(e)},t.toggleClass=function(n,e){return-1<n.className.indexOf(e)?this.removeClass(n,e):this.addClass(n,e),this.hasClass(n,e)},t.onClick=function(n,a){n.onclick=function(){a()},n.ontouchstart=function(t){1<t.touches.length&&t.preventDefault(),a()}},t.onClickOnly=function(n,e){n.onclick=function(){e()}},t.onTouch=function(n,e){n.ontouchstart=function(){e()}},t.onFutureClick=function(n,e){n.addEventListener("click",function(){e()})},t}(),o=function(){function t(t){this.name=t.name,this.type=t.type,this.time=t.time,this.metadata=this.getMetadata(t.metadata)}return t.prototype.getMetadata=function(t){if(t)try{t=JSON.parse(t)}catch(t){}return t},t}(),l=function(){function t(){this.categories=[],this.keywords=[],this.cuePoints=[],this.fetched=!0}return t.prototype.categoriesExtended=function(){return this.categories.concat(this.keywords)},t.prototype.setCuePoints=function(a){for(var e=0,t=a,n;e<t.length;e++)n=t[e],this.cuePoints.push(new o(n))},t.ACCESS_TYPE_FREE="free",t.ACCESS_TYPE_PREMIUM="premium",t.SOURCE_KTV="News Corp Sports Live Streams",t}(),Vs=function(){function t(){}return t.removeDuplicates=function(n){var a=[];return n.filter(function(t){var e=!1;return-1===a.indexOf(t.id)&&(a.push(t.id),e=!0),e})},t.removePremiumVideos=function(t){return t.filter(function(t){return t.accessType===l.ACCESS_TYPE_FREE||!1===t.fetched})},t.getDomain=function(n){var e=Ms.getSearchParams().domain||n.getDomain();return /\.com\.au$/.test(e)?e:e+".com.au"},t}(),s=function(){function a(){}return a.getInstance=function(e){return a.instance||(a.instance=new a),Ms.getSearchParams().abCookieValue&&(a.activeTest=!0),a.activeTest&&a.instance.getCookie(e),a.instance},a.prototype.getCookie=function(e){if("undefined"==typeof localStorage||!a.activeTest)return"";var t=Ms.getSearchParams(),n=Os(Math.random()*a.abValues.length),i=e||a.getItem()||a.abValues[n];return a.setItem(i),t.abCookieValue||a.getItem()},a.prototype.getCreationDate=function(){return localStorage.getItem(a.cookieDateName)},a.prototype.getIdentifier=function(){return"undefined"!=typeof localStorage&&a.activeTest?localStorage.getItem(a.cookieIdentifier):""},a.getItem=function(){return localStorage.getItem(a.cookieName)},a.prototype.getHeartbeatLabel=function(){return(a.instance.getCookie()?a.instance.getCookie()+"-":"")+a.instance.getIdentifier()},a.setCreationDate=function(){localStorage.setItem(a.cookieDateName,JSON.stringify(new Date))},a.setIdentifier=function(e){e&&"a"===e?localStorage.setItem(a.cookieIdentifier,a.identifierA):localStorage.setItem(a.cookieIdentifier,a.identifierB)},a.setItem=function(e){a.setCreationDate(),a.setIdentifier(e),localStorage.setItem(a.cookieName,e)},a.cookieName="vms.ab.testing",a.cookieDateName="vms.ab.testing.date",a.cookieIdentifier="vms.ab.testing.identifier",a.identifierA="Variation - A",a.identifierB="Variation - B",a.abValues=["a","b"],a.activeTest=!1,a}(),Bs=function(){function t(){}return t.config="CONFIG",t.capi="CAPI",t.capiDecorate="CAPI_DECORATOR",t.eventManager="EVENT_MANAGER",t.analytics="ANALYTICS",t.nielsen="NIELSEN",t.environment="ENVIRONMENT",t.context="CONTEXT",t.pageManager="PAGE_MANAGER",t.utag="UTAG",t.vidora="vidora",t.headerBidding="ad_header_bidding",t.lightningPlayerOrchestrator="LIGHTNING_PLAYER_ORCHESTRATOR",t}(),c=function(){function d(){this.isHubPage=!1,this.pageKeywords="",this.adsDisabled=!1,this.tabLoaded=!1,this.search=Ms.getSearchParams(),this.name=this.getEnvName(),this.pageUrl=window.location.href,this.domain=this.getDomain(),this.isHubPage=this.setIsHubPage(),this.pageKeywords=a.get(),this.browser=this.getBrowser(),this.adsDisabled=this.search.ads&&-1<this.search.ads.indexOf("disable")||!1,-1<Ms.getDomain().indexOf(Ds.KIDSNEWS)&&(this.adsDisabled=!0),this.abCookie=s.getInstance()}return d.prototype.visitorId=function(){return window.metrics&&window.metrics.s&&window.metrics.s.visitorID||""},d.prototype.brand=function(){return window.metrics&&window.metrics.s&&window.metrics.s.eVar2||""},d.prototype.getNewscorpauBrand=function(){var a=null===(t=window.newscorpau)||void 0===t?void 0:t.brand,t;if(void 0===a){var e=this.getDomain();(-1<Ds.PLNN_SITES.indexOf(e)&&(a="metro"),-1<Ds.BETA_SITES.indexOf(e)&&(a="metro"),-1<Ds.SKY_SITES.indexOf(e)&&(a="skynews"),void 0===a)&&(a=e===Ds.BODY_SOUL?"bodyandsoul":e===Ds.KIDSPOT?"kidspot":e===Ds.ESCAPE?"escape":e===Ds.THE_AUSTRALIAN?"taus":"news")}return a},d.prototype.site=function(){return window.metrics&&window.metrics.s&&window.metrics.s.eVar3||""},d.prototype.network=function(){return window.metrics&&window.metrics.s&&window.metrics.s.eVar2||""},d.prototype.getDomain=function(){var a=(this.search.domain||window.location.hostname).replace(/(^(www|m|video|w|mobile|extra|beta|supercoach)\.|\.com(\.au)?$)/gi,"");a=(a=(a=(a=a.match(/^[\d\.]+$/)||"localhost"===a?"news":a).replace(/^sit|sit$/i,"").replace(/^\.|\.$/i,"")).replace(/^uat|uat$/i,"").replace(/^\.|\.$/i,"")).replace(/^pat|pat$/i,"").replace(/^\.|\.$/i,"");for(var e=Ds.newsSites(),t=0;t<e.length;t++)if(0<=a.indexOf("."+e[t]+".")){a=e[t];break}return 0>e.indexOf(a)&&(a="news"),-1<Ds.SKY_SITES.indexOf(a)&&(a="skynews"),a},d.prototype.setIsHubPage=function(){return ks.hasClass(document.body,"video")&&null!==window.location.href.match(/https:\/\/(.*)\.com\.au\/video\/id-(.*)(\/)?.*/)},d.prototype.isNewsHub=function(){return"news.com.au"===Vs.getDomain(this)&&ks.hasClass(document.body,d.NEWS_VIDEO_TEMPLATE)},d.prototype.getPageType=function(e,t){var n=Ms.getSearchParams(),a=t.view.element.getAttribute("vms-page-type")||(null==e?void 0:e.get("ad_pagetype"))||"";return a&&(a.toLowerCase().includes("story")||a.toLowerCase().includes("article")||a.toLowerCase().includes("amp")||a.toLowerCase().includes("comments"))?d.ARTICLE_PAGE_TYPE:a&&(a.toLowerCase().includes("homepage")||a.toLowerCase().includes("section")||a.toLowerCase().includes("gallery")||a.toLowerCase().includes("content")||a.toLowerCase().includes("digitaleditions")||a.toLowerCase().includes("searchresult")||a.toLowerCase().includes("product")||a.toLowerCase().includes("index")||a.toLowerCase().includes("home"))?d.INDEX_PAGE_TYPE:a&&a.toLowerCase().includes("video")?d.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE:(n.amp&&n.amp,d.ARTICLE_PAGE_TYPE)},d.prototype.isVaafca=function(e){var t=e.getService(Bs.utag);return this.getPageType(t,e)===d.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE},d.prototype.isSky=function(){var t=this.getDomain();return-1<Ds.SKY_SITES.indexOf(t)},d.prototype.isProd=function(){return-1<["prod","beta"].indexOf(this.name)},d.prototype.getEnvName=function(){var e="prod";-1<Ms.getDomain().indexOf("news")&&-1<location.pathname.indexOf("/technology/gadgets")&&(e="beta");for(var t=0,n=Ds.BETA_SITES,a;t<n.length;t++)if(a=n[t],-1<Ms.getDomain().indexOf(a)){e="beta";break}for(var i=0,r=["dev","sit","pat","uat"],o;i<r.length;i++)if(o=r[i],-1<Ms.getDomain().indexOf(o)){e=o;break}if(-1<Ms.getDomain().indexOf("localhost")&&(e="dev"),-1<Ms.getDomain().indexOf(d.SIT_URL_PREFIX)&&(e="sit"),this.search.env)switch(this.search.env){case"dev":case"sit":case"pat":case"uat":case"beta":e=this.search.env;break;default:e="prod";}return e},d.prototype.getBrowser=function(){return new r(window.navigator)},d.NEWS_VIDEO_TEMPLATE="video-template",d.SIT_URL_PREFIX="dev.resourcesssl.newscdn",d.ARTICLE_PAGE_TYPE="article",d.INDEX_PAGE_TYPE="index",d.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE="vaafca",d}(),d=function(){function t(){this.services={}}return t.prototype.get=function(t){return this.services[t]},t.prototype.register=function(n,e){this.services[n]=e},t}(),p=function(){function t(t){this.serviceProvider=t||new d}return t.prototype.getProvider=function(){return this.serviceProvider},t.prototype.getService=function(t){return this.serviceProvider.get(t)},t}(),m=(hs=function(n,e){return(hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(n,e)},function(a,e){function t(){this.constructor=a}hs(a,e),a.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}),u=function(a){function e(e){var i=a.call(this,e.getProvider())||this;return i.container=e,i}return m(e,a),e}(p),g=function(){function t(r){var m=this;this.utag_data=r;var t=Ms.getSearchParams(),n=decodeURIComponent(t.utag)||null,i={};if(t.utag&&n)try{i=JSON.parse(n)}catch(t){console.log(t)}for(var o=function(t){a[t]=function(){return m.utag_data[t]}},a=this,s=0,c=Object.keys(r);s<c.length;s++)o(c[s]);for(var l=function(t){u[t]=function(){return i[t]}},u=this,d=0,p=Object.keys(i);d<p.length;d++)l(p[d])}return t.prototype.get=function(t){return"function"==typeof this[t]?this[t]():"string"==typeof this[t]?this[t]:void 0},t}(),y=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),_=function(a){function e(e){var i=a.call(this,e)||this;return i.interval=500,i.limit=500,i.checkUtag(),i}return y(e,a),e.prototype.checkUtag=function(){var t=this;"object"==typeof window.utag_data?this.ready():(this.limit--,0<this.limit&&setTimeout(function(){t.checkUtag()},this.interval))},e.prototype.ready=function(){var t=new g(window.utag_data);this.container.getProvider().register(Bs.utag,t),this.getService(Bs.eventManager).trigger(this.container,"utag_ready")},e}(u),E=function(){function t(){}return t.parseEmbedCode=function(t){return /([0-9]{13})-([0-9]+)/g.test(t)?t.split(this.embedSplitter):[t]},t.embedSplitter="-",t}(),v=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),A=function(a){function e(e,r){var n=a.call(this,e)||this;return r&&(n.pluginName=r),n}return v(e,a),e}(u),C=function(){function t(){this.anId=t.anId}return t.anId=928981,t}(),S=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),h=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.init=!1,n}return S(e,a),e.prototype.getConfig=function(a){var e=new C,t=a.ima3&&a.ima3.adsRequest;return e.campId=(t?t.linearAdSlotWidth:"427")+"x"+(t?t.linearAdSlotHeight:"240"),e.chanId=window.ads_api&&window.ads_api.uname,e},e.prototype.setTrackingEvent=function(){var n=this,e=this.getService(Bs.eventManager);e.addListener(this.container,"ima3-ads-manager-loaded",function(){!function(){if(!n.init&&!n.getService(Bs.context).ssai){var e=n.container.bcPlayer();window.googleImaVansAdapter&&(window.googleImaVansAdapter.init(window.google,e.ima3.adsManager,e.el(),n.getConfig(e)),n.init=!0)}}()})},e.jsPath="//static.adsafeprotected.com/vans-adapter-google-ima.js",e.pluginName="PLUGIN_IAS",e}(A),T=function(){function t(){}return t.getCookie=function(a){for(var e=a+"=",t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""},t}(),N=function(){function t(t){this.element=t}return t.prototype.getElement=function(){return this.element},t.prototype.show=function(){this.element.style.display="block"},t.prototype.hide=function(){this.element.style.display="none"},t.prototype.html=function(t){this.element.innerHTML=t},t}(),I=function(){function t(){}return t.AAP="AAP",t.AdelaideNow="Adelaide Now",t.Advertising="Advertising",t.AP="Associated Press",t.BestRecipes="Best Recipes",t.BlinkTV="Blink TV",t.BodySoul="Body & Soul",t.BusinessSpectator="Business Spectator",t.Cairns="Cairns Post",t.Carsales="Carsales",t.Carsguide="Carsguies",t.CourierMail="Courier Mail",t.DailyTelegraph="Daily Telegraph",t.Delicious="Delicious",t.Escape="Escape",t.FOXSPORTS="Foxsports",t.FoxSportsPulse="Foxsports",t.Geelong="Geelong",t.Getty="Getty",t.GoldCoastBulletin="Gold Coast Bulletin",t.GQ="GQ",t.HeraldSun="Herald Sun",t.Homelife="Homelife",t.InsideOut="Inside Out",t.KidSpot="Kidspot",t.Leader="The Leader",t.Mercury="The Mercury",t.News="News.com.au",t.NewsLocal="News Local",t.NND="NND",t.NSD="NSD",t.NTNews="NT News",t.OLD_FOXSPORTS="Foxsports",t.Oovvuu_antidote="Oovvuu",t.Oovvuu_bbc="Oovvuu",t.Oovvuu_beamafilm="Oovvuu",t.Oovvuu_beyond="Oovvuu",t.Oovvuu_bloomberg="Oovvuu",t.Oovvuu_cnn="Oovvuu",t.Oovvuu_contentfilm="Oovvuu",t.Oovvuu_curious="Oovvuu",t.Oovvuu_endemol="Oovvuu",t.Oovvuu_escapade="Oovvuu",t.Oovvuu_flame="Oovvuu",t.Oovvuu_flashback="Oovvuu",t.Oovvuu_invisible="Oovvuu",t.Oovvuu_jansonmedia="Oovvuu",t.Oovvuu_momedia="Oovvuu",t.Oovvuu_other="Oovvuu",t.Oovvuu_ovation="Oovvuu",t.Oovvuu_pinnacle="Oovvuu",t.Oovvuu_reel="Oovvuu",t.Oovvuu_ronin="Oovvuu",t.Oovvuu_sbs="Oovvuu",t.Oovvuu_thefullbox="Oovvuu",t.Oovvuu_umbrella="Oovvuu",t.Oovvuu_viavision="Oovvuu",t.Oovvuu_vice="Oovvuu",t.PerthNow="Perth Now",t.Quest="Quest",t.REUTERS="Reuters",t.Rightster_barcroft_media="Rightster",t.Rightster_celebrity_wire="Celebrity Wire",t.Rightster_future_tv="Rightster",t.Rightster_hollyscoop="Hollyscoop",t.Rightster_moda_mob="Rightster",t.Rightster_newsy="Rightster",t.Rightster_ruptly_tv="Rightster",t.Rightster_splash_news="Rightster",t.Rightster_the_savory="The Savory",t.Rightster_unscriptd="Rightster",t.Rightster_video_fashion="Rightster",t.Rightster_viral_spiral="Rightster",t.Rightster_wochit="Rightster",t.Rightster_wochit_uk="Rightster",t.SKY="Sky News",t.Splash="Splash",t.Storyful="Storyful",t.Taste="Taste",t.TEN="Ten",t.TheAustralian="The Australian",t.TheAdvertiser="The Advertiser",t.Townsville="Townsville Bulletin",t.Vogue="Vogue",t.WeeklyTimes="Weekly Times Now",t.Whimn="Whimn",t.Wibbitz="Wibbitz",t.Wochit="Wochit",t.WSJ="Wall Street Journal",t}(),b=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),P=function(a){function r(e,r){var d=a.call(this,document.createElement("div"))||this;d.manuallySwitchedOn=!1,d.container=r,d.view=e;var n=d.container.getService(Bs.environment),i=d.container.getService(Bs.context);if(r.getService(Bs.environment).browser.isMobile()||i.useMobileUi())if(n.isSky())ks.addClass(d.view.settingsContainer,"vms-mobile-autoplay");else{if(!i.useMobileUi())return d;ks.addClass(d.view.settingsContainer,"vms-mobile-autoplay")}var o=d.container.getService(Bs.eventManager);o.addSingleCustomListener(d.container,qo.BC_READY,function(){d.populateView()});var l=function(){ks.hasClass(d.element,"autoplay-toggle-hidden")||(ks.addClass(d.element.parentElement,"no-autoplay-toggle"),ks.addClass(d.element,"autoplay-toggle-hidden"))};return o.addCustomListener(d.container,ze.EVENT_USER_STATUS,function(a){var e=d.container.getService(Bs.environment),t=e.browser.isMobile()||e.browser.isIOS(),n=d.container.getService(Bs.utag),i=e.getPageType(n,d.container);i!==c.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE&&i!==c.INDEX_PAGE_TYPE||t||-1!==Ms.getDomain().indexOf(Ds.TASTE)?t&&!e.isSky()&&l():a!=ze.USER_SUBSCRIBER&&a!=ze.USER_REGISTERED||l()}),d}return b(r,a),r.prototype.populateView=function(){this.currentStatus=ze.USER_ANONYMOUS,ks.addClass(this.view.settingsContainer,r.CSS_ANONYMOUS),this.label=document.createElement("div"),this.label.className="settings-label",this.label.innerHTML="Video Autoplay",this.switchContainer=document.createElement("div"),this.switchContainer.className="switch",this.switch=document.createElement("input"),this.switch.setAttribute("type","checkbox"),this.switch.className="vp_toggle",this.switchContainer.appendChild(this.switch);var t=je.get(this.container);this.switch.checked=t.autoplayEnabled,this.autoplayOff=document.createElement("div"),this.autoplayOff.className="rp-settings-premium-label",this.autoplayOff.innerHTML="Log in",this.switchLabel=document.createElement("label"),this.switchContainer.appendChild(this.switchLabel),this.element.appendChild(this.label),ks.addClass(this.element,"rp-autoplay-container"),this.element.appendChild(this.autoplayOff),this.element.appendChild(this.switchContainer),this.premiumContainer=document.createElement("div");var e=document.createElement("div");e.innerHTML="Premium Feature",e.className="rp-premium-title",this.container.getService(Bs.environment).browser.isMobile()&&(this.backLink=document.createElement("div"),this.backLink.innerHTML="Video Autoplay",this.backLink.className="rp-show-premium-back",this.premiumContainer.appendChild(this.backLink));var n=document.createElement("div"),a=Ms.getDomain(),i=a&&-1!==a.indexOf(Ds.THE_ADVERTISER)?I.TheAdvertiser:a;n.innerHTML="Switching off the video autoplay is available only to "+i+" subscribers. If you are a subscriber, please log in and access the video settings again.",n.className="rp-premium-description",this.premiumContainer.appendChild(e),this.premiumContainer.appendChild(n),this.premiumContainer.style.display="none",this.element.appendChild(this.premiumContainer)},r.prototype.onRegistered=function(){var t=je.get(this.container);if(this.currentStatus!==ze.USER_REGISTERED){this.view.hidePremium(),this.currentStatus=ze.USER_REGISTERED,ks.removeClass(this.view.settingsContainer,r.CSS_ANONYMOUS),ks.removeClass(this.view.settingsContainer,r.CSS_SUBSCRIBED),ks.addClass(this.view.settingsContainer,r.CSS_REGISTERED);var e=t.autoplayDisabledExpiry;if(e)e<=new Date&&(this.switch.checked=!0,t.autoplayEnabled=!0);else{var n=new Date;n.setMonth(n.getMonth()+1),t.autoplayDisabledExpiry=n}!1===t.autoplayEnabled&&t.save(),this.switch.checked=t.autoplayEnabled}},r.prototype.onSubscribed=function(){if(this.currentStatus!==ze.USER_SUBSCRIBER){this.view.hidePremium(),this.currentStatus=ze.USER_SUBSCRIBER,ks.removeClass(this.view.settingsContainer,r.CSS_ANONYMOUS),ks.removeClass(this.view.settingsContainer,r.CSS_REGISTERED),ks.addClass(this.view.settingsContainer,r.CSS_SUBSCRIBED);var t=je.get(this.container);this.switch.checked=t.autoplayEnabled,t.autoplayDisabledExpiry=new Date("2119")}},r.prototype.onLoggedOut=function(){this.currentStatus!==ze.USER_ANONYMOUS&&(this.view.hidePremium(),this.currentStatus=ze.USER_ANONYMOUS,ks.removeClass(this.view.settingsContainer,r.CSS_SUBSCRIBED),ks.removeClass(this.view.settingsContainer,r.CSS_REGISTERED),ks.addClass(this.view.settingsContainer,r.CSS_ANONYMOUS))},r.CSS_ANONYMOUS="rp-autoplay-anonymous",r.CSS_REGISTERED="rp-autoplay-registered",r.CSS_SUBSCRIBED="rp-autoplay-subscribed",r}(N),w=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),L=function(a){function e(e,o){var n=a.call(this,document.createElement("div"))||this;n.plugin=o,n.label=document.createElement("div"),n.label.className="settings-label",n.label.innerHTML="Video Quality",n.element.appendChild(n.label),n.element.className="video-quality-container",n.currentQuality=document.createElement("div"),n.currentQuality.className="video-quality",n.currentQuality.innerHTML="Auto",n.element.appendChild(n.currentQuality),n.resolutionContainer=document.createElement("div"),n.resolutionContainer.className="vms-resolutions",n.backButton=document.createElement("button"),n.backButton.className="vms-resolution vms-resolution-back",n.backButton.innerHTML="Back",n.highButton=document.createElement("button"),n.highButton.className="vms-resolution vms-resolution-high",n.highButton.innerHTML="High",n.mediumButton=document.createElement("button"),n.mediumButton.className="vms-resolution vms-resolution-medium",n.mediumButton.innerHTML="Medium",n.lowButton=document.createElement("button"),n.lowButton.className="vms-resolution vms-resolution-low",n.lowButton.innerHTML="Low",n.resolutionContainer.appendChild(n.backButton),n.resolutionContainer.appendChild(n.highButton),n.resolutionContainer.appendChild(n.mediumButton),n.resolutionContainer.appendChild(n.lowButton);var i=document.createElement("div");return i.className="arrow",n.resolutionContainer.appendChild(i),n.container=e,n}return w(e,a),e.prototype.attachResolutions=function(t){t.appendChild(this.resolutionContainer)},e.prototype.refreshQualityLabel=function(){var t="Auto";ks.removeClass(this.plugin.view.highButton,"active"),ks.removeClass(this.plugin.view.mediumButton,"active"),ks.removeClass(this.plugin.view.lowButton,"active"),this.plugin.high.selected&&(t=this.plugin.high.label,ks.addClass(this.plugin.view.highButton,"active")),this.plugin.medium.selected&&(t=this.plugin.medium.label,ks.addClass(this.plugin.view.mediumButton,"active")),this.plugin.low.selected&&(t=this.plugin.low.label,ks.addClass(this.plugin.view.lowButton,"active")),this.currentQuality.innerHTML=""+t},e}(N),O=function(){function n(){}return n.get=function(){return localStorage.getItem(n.key)},n.set=function(e){localStorage.setItem(n.key,e)},n.key="vms.rp.quality",n}(),f=function(){function t(a,r,t,n){this.selected=!1,this.playlistIndex=a,this.width=r,this.height=t,this.bandwidth=n}return t.prototype.compare=function(t){return this.height>t.height?1:-1},t.prototype.select=function(){return this.selected=!0,O.set(this.label),this.playlistIndex},t}(),R=function(){function t(){}return t.AUTOPLAY="event35",t.CLICK_TO_PLAY="event36",t.MUTE="event37",t.FULLSCREEN_CHANGE="event38",t.ONSCROLL_HIDDEN="event39",t.COUNTDOWN_PAUSED="event41",t.BREACH_DISPLAYED="event292",t.COUNTDOWN_PAUSED_IN_PLAYLIST="event62",t.AUTOPLAY_TURNED_OFF="event42",t.AUTOPLAY_TURNED_ON="event43",t.SOCIAL_SHARING="event46",t.SELECT_PLAYLIST="event47",t.WATCH_AGAIN="event48",t.UNMUTE="event51",t.AUTOPLAY_ALLOWED="event52",t.AD_FAILED="event55",t.AUTOPLAY_BLOCKED="event54",t.ADBLOCK_DETECTION_MISMATCH="event57",t.STICKY_PLAYER_CLOSED="event58",t.AD_SKIPPED="event60",t.AD_FAILED_LOADING="event149",t.VIDEO_QUALITY_CHANGED="event59",t.CC_ON="event147",t.CC_OFF="event148",t.SHOW_PLAYLIST="event275",t.LIVEWORM_THUMBSUP="event293",t.LIVEWORM_THUMBSDOWN="event294",t.CASTING_BUTTON_CLICK="event416",t}(),M=function(){function t(){}return t.formatDuration=function(n){var e=Os(n/3600),t=Os(n%3600/60),a=Os(n%60);return""+(e?e.toString().padStart(2,"0")+":":"")+t.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")},t.truncate=function(a,i){if(!a||""===a)return"";var t=a;return a.length>i&&(t=a.substring(0,i-5)+"..."),t},t.truncateDescription=function(a,e,t){void 0===t&&(t=!0),null===a.getAttribute("id")&&a.setAttribute("id","shave-"+new Date().getTime()),t?setTimeout(function(){return U("#"+a.getAttribute("id"),e)},0):U("#"+a.getAttribute("id"),e)},t}(),D=function(){function l(){this.trendingFetched=!1,this.relatedFetched=!1}return l.prototype.set=function(n,e){this.capiData=n,this.container=e},l.prototype.getPoster=function(){var a="",e=this.container.view.module.moduleContent.getElementsByClassName("poster");if(0<e.length){var t=e[0].getElementsByTagName("img");0<t.length&&(a=t[0].src)}return a||this.capiData.poster},l.prototype.decorateContainer=function(){var e=this,t=this.getPoster(),n=this.container.getService(Bs.eventManager);this.container.view.element.style.background="black";var i=this.container.getService(Bs.context);i.firstPlay?(this.container.view.element.style.background="url("+t+") no-repeat",this.container.view.element.style["background-size"]="contain"):(this.container.bcPlayer().el().style.display="none",n.addMultipleListener(this.container,["loadedmetadata","error","loadstart"],function(){e.container.bcPlayer().el().style.display="block"}));var r=this.container.getService(Bs.environment);if(!r.isHubPage&&!r.isNewsHub()&&!i.forceHubStyle()){var o=document.createElement("h3");o.className="heading",o.innerHTML=this.capiData.title+"<span class=\"time\">"+M.formatDuration(this.capiData.duration/1e3)+"</span>",this.container.view.module.moduleHeader.innerHTML="";var a=document.createElement("div");a.className="description",a.innerHTML=this.capiData.caption}this.container.bcPlayer()?(this.container.bcPlayer().poster(t),this.container.view.element.style.background="url("+l.BLACK_BG+") no-repeat",this.container.view.element.style["background-size"]="contain"):n.addListener(this.container,"ready",function(){e.container.bcPlayer().poster(t),e.container.view.element.style.background="url("+l.BLACK_BG+") no-repeat",e.container.view.element.style["background-size"]="contain"}),n.trigger(this.container,l.CAPI_FETCHED,this.capiData),0<this.capiData.cuePoints.length&&this.container.view.module.moduleChapters&&this.container.view.module.moduleChapters.appendChild(this.getChapters())},l.prototype.getChapters=function(){var e=this,t=document.createElement("div");t.className=""+l.CHAPTERS_CSS;for(var s=document.createElement("ul"),n=function(t){if(t.type===l.CUEPOINT_CODE&&t.metadata.type===l.CUEPOINT_CHAPTER){var n=document.createElement("li"),a=document.createElement("a");a.innerHTML=t.name,ks.onClick(a,function(){e.container.bcPlayer().currentTime(t.time)}),n.appendChild(a),s.append(n)}},i=0,r=this.capiData.cuePoints;i<r.length;i++)n(r[i]);return t.appendChild(s),t},l.prototype.handleRelated=function(e){var t=this;this.relatedFetched=!0,e=e.filter(function(n){return n.platformId!=t.container.bcInfo.id});var n=this.container.getService(Bs.eventManager);this.container.ready?(n.trigger(this.container,l.CAPI_RELATED_FETCHED,e),this.container.log("CAPI_RELATED_FETCHED-ready",e,this.container.ready)):n.addSingleCustomListener(this.container,qo.BC_READY,function(){n.trigger(t.container,l.CAPI_RELATED_FETCHED,e),t.container.log("CAPI_RELATED_FETCHED-delayed",e)}),this.onRecommendationsFetched()},l.prototype.handleTrending=function(e){var t=this;this.trendingFetched=!0,e=e.filter(function(n){return n.platformId!=t.container.bcInfo.id});var n=this.container.getService(Bs.eventManager);this.container.ready&&n.trigger(this.container,l.CAPI_TRENDING_FETCHED,e),this.onRecommendationsFetched()},l.prototype.onRecommendationsFetched=function(){this.trendingFetched&&this.relatedFetched&&this.container.getService(Bs.eventManager).trigger(this.container,l.CAPI_RECOMMENDATIONS_FETCHED)},l.CAPI_FETCHED="CAPI_FETCHED",l.CAPI_RELATED_FETCHED="CAPI_RELATED_FETCHED",l.CAPI_TRENDING_FETCHED="CAPI_TRENDING_FETCHED",l.CAPI_RECOMMENDATIONS_FETCHED="CAPI_RECOMMENDATIONS_FETCHED",l.BLACK_BG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiB2aWV3Qm94PSIwIDAgNjQ5IDM2NSIgd2lkdGg9IjY0OSIgaGVpZ2h0PSIzNjUiPjxkZWZzPjxwYXRoIGQ9Ik0wIDBMNjQ5IDBMNjQ5IDM2NUwwIDM2NUwwIDBaIiBpZD0iYXZrQlpaNGtDIj48L3BhdGg+PC9kZWZzPjxnPjxnPjxnPjx1c2UgeGxpbms6aHJlZj0iI2F2a0JaWjRrQyIgb3BhY2l0eT0iMSIgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIxIj48L3VzZT48L2c+PC9nPjwvZz48L3N2Zz4=",l.CHAPTERS_CSS="vms-chapters",l.CHAPTERS_CONTAINER_ATTRIBUTE="vms-chapters-target",l.CUEPOINT_CODE="CODE",l.CUEPOINT_CHAPTER="chapter",l}(),k=function(){this.element=document.createElement("div"),this.element.className="vjs-playlist-control";var t=document.createElement("div");t.className="vjs-playlist-control-inner",this.element.appendChild(t)},V=function(){function a(){}return a.get=function(){for(var e=document.querySelectorAll("script[src$=\""+a.SCRIPT_NAME+"\"]"),t="",n=e.length-1,i;0<=n;--n)if(i=e[n].getAttribute("src").match("(^(.*)/)"+a.SCRIPT_NAME),i&&1<i.length){t=i[1];break}return t},a.SCRIPT_NAME="player.js",a}(),B=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),G=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.hasDurationMarker=!1,e.durationMarker=null,e}return B(e,n),e.prototype.generateDurationMarker=function(){this.durationMarker=document.createElement("span")},e.prototype.appendDurationMarker=function(n,e){0>=e?(this.durationMarker||this.generateDurationMarker(),n.appendChild(this.durationMarker)):n.innerHTML=M.formatDuration(e/1e3)},e}(N),Y=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),W=function(a){function d(e,s,n){var i=a.call(this,document.createElement("li"))||this;if(i.visible=!1,i.type="related",i.recommendationsContainer=n,i.type=n.type,i.capiVideo=s,i.container=e,i.capiVideo.fetched)i.displayItem();else{i.image=document.createElement("div"),i.image.className="image",i.image.setAttribute("att","");var r=document.createElement("img");r.src=V.get()+"img/fallback.jpg",r.width=100,r.style.height="100% !important",i.image.appendChild(r),i.element.appendChild(i.image),i.title=document.createElement("div"),i.title.className="title",i.loader=document.createElement("p"),i.loader.innerHTML="...",i.recommendationsContainer.container.getService(Bs.environment).browser.isMobile()?i.image.appendChild(i.loader):i.title.appendChild(i.loader),i.element.appendChild(i.title)}return i}return Y(d,a),d.prototype.setLoading=function(){this.loader.className="img-loader",this.loader.innerHTML=""},d.prototype.displayItem=function(){var t=this.capiVideo;if(t&&t.title){this.element.innerHTML="",this.element.setAttribute("data-title",t.title),this.element.setAttribute("data-description",t.caption),this.element.setAttribute("data-platformid",t.platformId),this.element.setAttribute("data-capi-id",t.id),this.id=t.platformId;var e=document.createElement("div");e.className="border-gradient",this.image=document.createElement("div"),this.image.className="image",this.container.view.element.offsetWidth<=d.MEDIUM_VIDEO_CONTAINER?this.image.setAttribute("att","medium-scale"):this.image.setAttribute("att","");var n=document.createElement("img");n.src=t.thumbnail||"",n.onload=function(){n.naturalHeight>n.naturalWidth&&n.setAttribute("class","thumb-portrait")},n.style.height="100% !important",n.onerror=function(){n.getAttribute("data-errored")||(n.setAttribute("data-errored","errored"),n.className="img-error",n.src=V.get()+"img/fallback.jpg",n.width=100,n.style.height="100% !important")},this.img=n;var a=document.createElement("div");a.className="rp-play",this.image.appendChild(a),this.image.appendChild(n),this.play=a,this.title=document.createElement("div"),this.title.className="title";var i=document.createElement("p");i.innerHTML=M.truncate(t.title,d.TEXT_LIMIT),this.title.appendChild(i);var r=document.createElement("p");r.className="duration",this.appendDurationMarker(r,t.duration),this.cancel=document.createElement("div"),this.cancel.className="rp-cancel-mobile hidden-node",this.cancel.innerHTML="Cancel",this.image.appendChild(r),this.element.appendChild(this.image);var o=this.container.getService(Bs.environment);-1<Ds.PREMIUM_VIDEO_SITES.indexOf(o.getDomain())&&this.capiVideo.accessType===l.ACCESS_TYPE_PREMIUM&&(this.premium=document.createElement("div"),this.premium.className="vms-premium-tag",this.premium.innerText="PREMIUM",this.element.appendChild(this.premium)),this.element.appendChild(this.title),this.element.appendChild(this.cancel),this.element.appendChild(e)}},d.MEDIUM_VIDEO_CONTAINER=472,d.TEXT_LIMIT=75,d}(G),F=function(){function a(){}return a.getVisibilityRate=function(p,e){var t=e||document.documentElement||document.body.parentNode;if(p.getBoundingClientRect){var n=p.getBoundingClientRect(),i=n.left||-1,r=n.top||-1,o=n.width||p.offsetWidth||1,a=n.height||p.offsetHeight||1,s=window.innerWidth||t.offsetWidth,c=window.innerHeight||t.offsetHeight,l=(Ls(i-0,0)+Ls(0+s-(i+o),0)+o)/o;0>l?l=0:1<l&&(l=1);var m=(Ls(r-0,0)+Ls(0+c-(r+a),0)+a)/a;return 0>m?m=0:1<m&&(m=1),100*(l*m)}},a.isVisibleInElement=function(a,e){var t=e.getBoundingClientRect().height,n=e.getBoundingClientRect().top,i=a.getBoundingClientRect().height-10,r=a.getBoundingClientRect().top;return r>n&&r+i<n+t},a.isVisibleInHorizontalViewport=function(e,t){return a.getVisibilityRate(e,t)>a.MOBILE_VISIBILITY_RATE},a.MOBILE_VISIBILITY_RATE=10,a}(),K=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),j=function(a){function o(e){var o=a.call(this,document.createElement("div"))||this;o.visible=!0,o.type="related",o.container=e,o.element.className="list-wrapper",o.labelContainer=document.createElement("div"),o.labelContainer.className="upnext-label-container",o.labelContainer.id="vms-upnext-label-container";var n=document.createElement("label");n.innerHTML="Related content",o.label=n,o.labelContainer.appendChild(n);var i=document.createElement("div");return i.innerHTML="UP NEXT",i.className="rp-upnext-label",o.element.appendChild(i),o.subLabel=i,o.list=document.createElement("ul"),o.list.className="recommendations-list",o.htmlContainer=document.createElement("div"),o.htmlContainer.appendChild(o.list),o.element.appendChild(o.htmlContainer),o.items=[],o}return K(o,a),o.prototype.checkItemsVisibility=function(){for(var t=this.container.getService(Bs.eventManager),e=0,n=this.items,a;e<n.length;e++)a=n[e],F.isVisibleInElement(a.element,this.container.view.wrapper)?a.visible||(a.visible=!0,t.trigger(this.container,o.EVENT_ITEM_VIEWPORT_VISIBLE,a)):a.visible&&(a.visible=!1,t.trigger(this.container,o.EVENT_ITEM_VIEWPORT_NOT_VISIBLE,a.capiVideo))},o.prototype.setItems=function(t){for(var l=this,e=0,n=t;e<n.length;e++){var i=n[e],r=new W(this.container,i,this);this.items.push(r),this.list.appendChild(r.element)}if(0<this.items.length){var a=this.container.getService(Bs.eventManager);this.element.onscroll=function(){if(l.checkItemsVisibility(),l.container.player.getBCPlayer().ended()&&l.items&&0<l.items.length){var t=l.items[0];F.getVisibilityRate(t.element)<o.VISIBILITY_THRESHOLD?a.trigger(l.container,o.EVENT_ITEM_NOT_VISIBLE):a.trigger(l.container,o.EVENT_ITEM_VISIBLE)}}}this.htmlContainer.style.overflow="auto",this.htmlContainer.className="rp-recommendations-container"},o.prototype.refresh=function(t){this.label.innerHTML=t?"Also in "+t:"See also..."},o.prototype.toggleCurrent=function(n){var e=this.container.getService(Bs.context);e.currentRecommendationItem&&(e.previousRecommendationItem=e.currentRecommendationItem),e.currentRecommendationItem=n},o.prototype.handleVisibility=function(){this.visible?(ks.removeClass(this.element,"disabled"),ks.removeClass(this.label,"disabled")):(ks.addClass(this.element,"disabled"),ks.addClass(this.label,"disabled"))},o.VISIBILITY_THRESHOLD=15,o.EVENT_ITEM_VISIBLE="EVENT_ITEM_VISIBLE",o.EVENT_ITEM_NOT_VISIBLE="EVENT_ITEM_NOT_VISIBLE",o.EVENT_ITEM_VIEWPORT_VISIBLE="EVENT_ITEM_VP_VISIBLE",o.EVENT_ITEM_VIEWPORT_NOT_VISIBLE="EVENT_ITEM_VP_NOT_VISIBLE",o}(N),X=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),z=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.visible=!1,e.type="trending",e}return X(e,n),e.prototype.setViewElements=function(){this.list.className="",this.list.className="trending-list",this.element.removeChild(this.subLabel);var t=document.createElement("label");t.innerHTML="Trending now",t.className="disabled",this.view.recommendations.trendingLabel=t,this.view.recommendations.labelContainer.appendChild(t),ks.addClass(this.element,"rp-trending-list"),this.view.element.appendChild(this.element),ks.addClass(this.element.parentElement,"rp-trending")},e.prototype.setViewEvents=function(){var t=this;this.view.recommendations.trendingLabel.onclick=function(){(t.visible=!0,t.view.recommendations.visible=!t.visible,t.handleVisibility(),t.view.recommendations.handleVisibility(),ks.removeClass(t.view.recommendations.trendingLabel,"disabled"),t.view.recommendations.items[0])&&t.container.getService(Bs.eventManager).trigger(t.container,j.EVENT_ITEM_NOT_VISIBLE)},this.view.recommendations.label.onclick=function(){(t.visible=!1,t.view.recommendations.visible=!t.visible,t.handleVisibility(),t.view.recommendations.handleVisibility(),ks.addClass(t.view.recommendations.trendingLabel,"disabled"),t.view.recommendations.items[0])&&t.container.getService(Bs.eventManager).trigger(t.container,j.EVENT_ITEM_VISIBLE)}},e}(j),Q=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),$=function(a){function e(e){var i=a.call(this,document.createElement("div"))||this;return i.element.className="vjs-playlist",i.playlistControls=new k,i.element.appendChild(i.playlistControls.element),i.recommendations=new j(e),i.element.appendChild(i.recommendations.labelContainer),i.trending=new z(e),i.element.appendChild(i.recommendations.element),i.container=e,i}return Q(e,a),e.prototype.showCTA=function(){ks.addClass(this.container.view.element,"vms-playlist-loaded"),this.show()},e.prototype.showList=function(){var t=this;setTimeout(function(){t.recommendations.checkItemsVisibility()},1),ks.addClass(this.element,"active"),ks.removeClass(this.recommendations.element,"hidden-node"),ks.removeClass(this.trending.element,"hidden-node"),this.recommendations.getElement().scrollTop=0},e.prototype.hideList=function(){-1<this.element.className.indexOf(" active")&&(this.element.className=this.element.className.replace(" active","")),this.recommendations.label.click()},e}(N),q=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Z=function(a){function e(){var t=a.call(this,document.createElement("ul"))||this;return t.element.className=e.MAIN_CSS_CLASS,t}return q(e,a),e.MAIN_CSS_CLASS="vms-playlist",e}(N),J=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ee=function(a){function e(e){var i=a.call(this,document.createElement("div"))||this;return i.element.className="vms-centered-element",i.subElement=e,i.element.appendChild(i.subElement),i}return J(e,a),e.prototype.getElement=function(){return this.subElement},e.prototype.show=function(){this.element.style.display="block"},e.prototype.hide=function(){this.element.style.display="none"},e.prototype.html=function(t){this.subElement.innerHTML=t},e}(N),te=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ne=function(a){function e(){var t=a.call(this,document.createElement("div"))||this;return t.getElement().className=e.MAIN_CSS_CLASS,t.spinner=document.createElement("div"),t.spinner.className="spinner-icon",t.getElement().appendChild(t.spinner),t}return te(e,a),e.MAIN_CSS_CLASS="vms-playlist-spinner",e}(ee),ae=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ie=function(s){function e(t){var n=s.call(this,document.createElement("div"))||this;n.container=t,n.element.className=e.MAIN_CSS_CLASS;var i=document.createElement("div");i.className="container-header",n.titleContainer=document.createElement("div"),n.titleContainer.className="container-title";var r=document.createElement("span");r.className="header-title",r.innerHTML=e.TITLE_TEXT,n.titleContainer.appendChild(r);var o=document.createElement("div");return o.className="header-toggle toggle-down",n.titleContainer.appendChild(o),i.appendChild(n.titleContainer),n.body=document.createElement("div"),n.body.className="container-body",n.body.appendChild(new ne().element),n.element.appendChild(i),n.element.appendChild(n.body),n}return ae(e,s),e.prototype.resize=function(){this.element.style.width=this.container.view.element.offsetWidth+"px"},e.MAIN_CSS_CLASS="vms-playlist-container playlist-inactive",e.TITLE_TEXT="View more related videos",e}(N),re=t(0),oe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),se=function(a){function n(e,r){var n=a.call(this,e)||this;return n.expanded=!1,n.view=r,n.setEvents(),n}return oe(n,a),n.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,qo.BC_READY,function(){var e=a.container.getService(Bs.environment),t=a.container.getService(Bs.context);("json"!==a.container.view.element.getAttribute(Te.EXT_RECOMMENDATIONS_TYPE)&&!e.isNewsHub()||t.useMobileUi())&&a.container.view.wrapper.appendChild(a.view.element)});var t=function(){a.expanded||ks.hasClass(a.view.element,n.CLASS_INACTIVE)&&(a.showPlaylist(),a.expanded=!0)};e.addCustomListener(this.container,D.CAPI_RELATED_FETCHED,function(){a.container.bcPlayer().hasStarted()?t():e.addListener(a.container,"play",function(){t()})}),ks.onClickOnly(this.view.titleContainer,function(){a.showPlaylist()}),this.setResizeObserver()},n.prototype.showPlaylist=function(){(ks.toggleClass(this.view.element,n.CLASS_INACTIVE),ks.toggleClass(this.view.element,n.CLASS_ACTIVE))&&(this.getService(Bs.analytics).omniture.track([R.SHOW_PLAYLIST]),this.getService(Bs.eventManager).trigger(this.container,Ee.MOBILE_PLAYLIST_SHOWN))},n.prototype.setResizeObserver=function(){var t=this;try{new re.ResizeObserver(function(){t.view.resize()}).observe(this.container.view.element)}catch(e){window.addEventListener("orientationchange",function(){t.view.resize()}),window.addEventListener("resize",function(){t.view.resize()})}},n.TIME_LEFT_BEFORE_EXPAND=10,n.CLASS_INACTIVE="playlist-inactive",n.CLASS_ACTIVE="playlist-active",n}(u),le=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ce=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return le(e,n),e.prototype.isApplicable=function(a){var e=this.getService(Bs.environment),t=this.container.getService(Bs.context),n=e.browser.isMobile();return a&&(n=n||null!==this.container.view.element.getAttribute("vms-sticky-target")),n||t.useMobileUi()},e}(A),de=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pe=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable()&&(n.view=new ie(t),n.events=new se(t,n.view)),n}return de(e,a),e.prototype.attach=function(t){this.view.getElement().appendChild(t)},e.prototype.setContent=function(t){this.view.body.innerHTML="",this.view.body.appendChild(t),this.getService(Bs.eventManager).trigger(this.container,Ee.CHECK_ITEM_VISIBILITY)},e.pluginName="MOBILE_PLAYLIST_CONTAINER",e}(ce),me=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ue=function(n){function l(){var e=null!==n&&n.apply(this,arguments)||this;return e.getMoreRelated=!0,e.nextBatch=[],e}return me(l,n),l.prototype.onFetched=function(t,e){var n=this,i=t.slice(0,l.PAGE_SIZE);0===this.nextBatch.length&&(this.nextBatch=t.slice(l.PAGE_SIZE));var r=this.getService(Bs.capiDecorate),o=function(){n.container.log("unknown related type")},a=this.getService(Bs.context);e===l.TYPE_RELATED?o=function(t){r.handleRelated(t),a.recommendationsType&&"similars"===a.recommendationsType?t.length-1<l.PAGE_SIZE&&(n.getMoreRelated=!1):t.length<l.PAGE_SIZE&&(n.getMoreRelated=!1)}:e===l.TYPE_TRENDING?o=function(t){r.handleTrending(t)}:void 0;o(i)},l.prototype.getNextPage=function(t){this.nextBatch.sort(function(t){return t.fetched?-1:1});var e=this.nextBatch.slice(0,l.PAGE_SIZE);this.nextBatch=this.nextBatch.slice(l.PAGE_SIZE),this.onFetched(e,t)},l.prototype.fetchRelated=function(t){var a=this,e=this.getService(Bs.pageManager);if(e.recommendations)return l.PAGE_SIZE=e.recommendations.length,this.onFetched(e.recommendations,l.TYPE_RELATED);var n=this.getService(Bs.capi),c=this.getService(Bs.environment);-1===this.container.view.cssClasses.indexOf("vms-no-playlist")?n.fetchRelatedVideos(t.sectionId,c.getDomain(),this.container).then(function(t){n.augment(t).then(function(e){var n=Vs.removeDuplicates(e.concat(t)),i=c.getDomain();-1===Ds.PREMIUM_VIDEO_SITES.indexOf(i)&&(n=Vs.removePremiumVideos(n)),0<n.length&&a.onFetched(n,l.TYPE_RELATED)}).catch(function(){a.onFetched(t,l.TYPE_RELATED)})}).catch(function(){a.container.getService(Bs.eventManager).trigger(a.container,l.NO_RECOMMENDATIONS_FOUND),a.getMoreRelated=!1,a.container.log("No results in Fetch Related")}):this.container.getService(Bs.eventManager).trigger(this.container,l.NO_RECOMMENDATIONS_FOUND)},l.prototype.fetchTrendingVideos=function(t,e){var s=this,n=this.getService(Bs.environment),i=this.getService(Bs.vidora);if((n.browser.isDesktop()||n.browser.isIpad())&&i&&i.config.isEnabled()){var r=this.getService(Bs.capi);-1===this.container.view.cssClasses.indexOf("vms-no-playlist")&&r.fetchTrendingVideos(t,e).then(function(t){r.augment(t,l.TYPE_TRENDING).then(function(e){s.container.log("[RELATED]","[TRENDING]",t,e),s.onFetched(e,l.TYPE_TRENDING)}).catch(function(){s.onFetched([],l.TYPE_TRENDING)})}).catch(function(){s.onFetched([],l.TYPE_TRENDING)})}},l.PAGE_SIZE=7,l.TYPE_RELATED="related",l.TYPE_TRENDING="trending",l.NO_RECOMMENDATIONS_FOUND="vms-no-recommendations",l}(u),ge=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ye=function(a){function e(e,r){var n=a.call(this,e)||this;return n.playlistItems=[],n.view=r,n.setEvents(),n}return ge(e,a),e.prototype.setEvents=function(){var s=this,e=this.getService(Bs.eventManager),t=this.container.getService(Bs.environment);e.addSingleCustomListener(this.container,qo.BC_READY,function(){"json"!==s.container.view.element.getAttribute(Te.EXT_RECOMMENDATIONS_TYPE)&&s.container.view.wrapper.appendChild(s.view.element)}),e.addSingleCustomListener(this.container,Te.EXT_RECOMMENDATIONS_MOBILE_EVENT,function(){var e=s.container.getPluginInstance(Ie.pluginName).view.recommendations.items.map(function(t){return t.capiVideo});e&&s.setRecommendations(e)}),e.addCustomListener(this.container,ue.NO_RECOMMENDATIONS_FOUND,function(){var e=s.container.getPluginInstance(pe.pluginName);ks.addClass(e.view.element,"hidden-node")}),this.view.element.onscroll=function(){e.trigger(s.container,Ee.CHECK_ITEM_VISIBILITY)},e.addCustomListener(this.container,Ee.MOBILE_PLAYLIST_SHOWN,function(){e.trigger(s.container,Ee.CHECK_ITEM_VISIBILITY)}),e.addListener(this.container,"ads-ad-started",function(){var n=s.getService(Bs.context);s.playlistItems.forEach(function(t){ks.removeClass(t.element,"now-playing-item"),ks.removeClass(t.element,"up-next-item"),ks.removeClass(t.element,"already-watched-item"),n.currentlyPlayingMobileItem&&n.currentlyPlayingMobileItem.id===t.id&&ks.addClass(t.element,"now-playing-item")})}),e.addMultipleListener(this.container,["ads-ad-skipped","ima3error","ima3-ad-error","ads-ad-ended","play"],function(){var t=s.getService(Bs.context);s.playlistItems.forEach(function(n){t.currentlyPlayingMobileItem&&t.currentlyPlayingMobileItem.id===n.id&&e.trigger(s.container,Se.UPDATE_NOW_PLAYING_MARKER,n)})}),e.addListener(this.container,"ended",function(){if("json"!==s.container.view.element.getAttribute(Te.EXT_RECOMMENDATIONS_TYPE)){var n=s.getService(Bs.context),a=1;s.playlistItems.forEach(function(t){ks.removeClass(t.element,"now-playing-item"),n.currentlyPlayingMobileItem&&n.currentlyPlayingMobileItem.id===t.id&&ks.addClass(t.element,"already-watched-item"),t.played&&a++}),a>=s.playlistItems.length&&!t.browser.isLandscapeMode()&&s.playlistItems[0]&&s.playlistItems[0].element&&s.playlistItems[0].element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),a>=s.playlistItems.length&&e.trigger(s.container,Te.UP_NEXT_DEPLETED)}}),e.addCustomListener(this.container,qo.PLAYER_PLAYBACK_ERROR,function(){s.playlistItems.forEach(function(t){ks.removeClass(t.element,"now-playing-item"),ks.removeClass(t.element,"up-next-item")})}),e.addCustomListener(this.container,Se.UPDATE_NOW_PLAYING_MARKER,function(a){var t=s.getService(Bs.context);s.playlistItems.forEach(function(n){t.currentlyPlayingMobileItem&&t.currentlyPlayingMobileItem.id===n.id&&ks.addClass(n.element,"already-watched-item"),a.id===n.id?(ks.removeClass(a.element,"up-next-item"),ks.addClass(a.element,"now-playing-item")):(ks.removeClass(n.element,"now-playing-item"),ks.removeClass(n.element,"up-next-item"))})}),e.addCustomListener(this.container,Ee.SHUFFLE_PLAYLIST_ITEMS,function(e){var t=s.getService(Bs.context);if(t&&t.mobilePlaylistItems&&0<t.mobilePlaylistItems.length)for(var n=0,a;n<t.mobilePlaylistItems.length&&t.mobilePlaylistItems[n]&&t.mobilePlaylistItems[n]!==e;n++)a=t.mobilePlaylistItems.shift(),t.mobilePlaylistItems.push(a),n--}),e.addCustomListener(this.container,Ee.PLAYLIST_SKIP_VIDEO_EVENT,function(){var t=s.getService(Bs.context),n=s.container.getPluginInstance(Ee.pluginName).events.playlistItems,i=1;if(s.playlistItems.forEach(function(t){ks.removeClass(t.element,"now-playing-item"),ks.removeClass(t.element,"up-next-item"),t.played&&i++}),i>=s.playlistItems.length&&(e.trigger(s.container,Te.UP_NEXT_DEPLETED),e.addSingleEventListener(s.container,"ended",function(){ks.addClass(s.playlistItems[0].element,"up-next-item")})),t&&t.mobilePlaylistItems&&0<t.mobilePlaylistItems.length)for(var r=function(a){var i=n.find(function(n){return!n.played&&n.capiVideo&&n.capiVideo.id===t.mobilePlaylistItems[a]});if(i)return s.playlistItems[i.index-1]&&ks.addClass(s.playlistItems[i.index-1].element,"already-watched-item"),ks.removeClass(i.element,"up-next-item"),ks.addClass(i.element,"now-playing-item"),e.trigger(s.container,Se.ITEM_PLAYED_THROUGH_SKIP_BUTTON,i.id),"break"},o=0;o<t.mobilePlaylistItems.length&&!("break"===r(o));o++);})},e.prototype.setRecommendations=function(a){var o=this,t=this.getService(Bs.context);a.forEach(function(n,e){var a=new Se(n,o.container,e);o.view.element.appendChild(a.element),o.playlistItems[e]=a,t.mobilePlaylistItems[e]=a.capiVideo.id}),this.container.getPluginInstance(pe.pluginName).setContent(this.view.element)},e}(u),_e=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ee=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable()&&(n.playlistContainer=t.getPluginInstance(pe.pluginName),n.view=new Z,n.events=new ye(t,n.view),n.playlistContainer.attach(n.view.getElement())),n}return _e(e,a),e.pluginName="MOBILE_PLAYLIST",e.CHECK_ITEM_VISIBILITY="CHECK_ITEM_VISIBILITY",e.MOBILE_PLAYLIST_SHOWN="MOBILE_PLAYLIST_SHOWN",e.SHUFFLE_PLAYLIST_ITEMS="SHUFFLE_PLAYLIST_ITEMS",e.PLAYLIST_SKIP_VIDEO_EVENT="PLAYLIST_SKIP_VIDEO_EVENT",e.PLAYLIST_ENDED="PLAYLIST_ENDED",e}(ce),ve=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ae=function(a){function e(){var e=a.call(this,document.createElement("button"))||this;e.element.className="skeleton-item-container";var s=document.createElement("picture");s.className="skeleton-image loader";var n=document.createElement("h2");n.className="skeleton-metadata-container";var i=document.createElement("span");i.className="skeleton-metadata-title loader",n.appendChild(i);var r=document.createElement("span");return r.className="skeleton-metadata-title loader",n.appendChild(r),e.element.appendChild(s),e.element.appendChild(n),e}return ve(e,a),e}(N),Ce=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Se=function(a){function o(e,o,n){var i=a.call(this,document.createElement("li"))||this;return i.loaded=!1,i.type="related",i.index=0,i.played=!1,i.visible=!1,i.element.className="playlist-list-item",i.capiVideo=e,i.container=o,i.index=n,i.displayItem(),i.setEvents(),i}return Ce(o,a),o.prototype.onItemVisibilityCheck=function(){var n=this;this.isVisible()&&this.capiVideo&&!this.capiVideo.fetched&&this.isVisible()&&(this.capiVideo.fetched=!0,this.container.getService(Bs.capi).getVideosWhenReady(this.container,this.capiVideo,function(e){n.capiVideo=e[0],n.attachItem(),n.bindClick()},function(){n.container.getService(Bs.eventManager).trigger(n.container,qo.CAPI_VIDEO_FETCH_ERROR),n.element.parentNode.removeChild(n.element)}))},o.prototype.setEvents=function(){var a=this,e=this.container.getService(Bs.eventManager);e.addCustomListener(this.container,Ee.CHECK_ITEM_VISIBILITY,function(){a.onItemVisibilityCheck()}),e.addCustomListener(this.container,Ee.MOBILE_PLAYLIST_SHOWN,function(){M.truncateDescription(a.titleContainer,o.TITLE_LENGTH_HEIGHT)}),e.addCustomListener(this.container,"play",function(){M.truncateDescription(a.titleContainer,o.TITLE_LENGTH_HEIGHT)}),e.addCustomListener(this.container,o.ITEM_PLAYED_THROUGH_AUTOPLAY,function(e){e&&e===a.id&&(a.playVideo(),a.container.getService(Bs.context).clickToPlay=!1)}),e.addCustomListener(this.container,o.ITEM_PLAYED_THROUGH_SKIP_BUTTON,function(e){e&&e===a.id&&a.playVideo()}),e.addCustomListener(this.container,o.ITEM_PLAYED_THROUGH_REPLAY_BUTTON,function(e){e&&e===a.id&&a.playVideo()}),e.addCustomListener(this.container,o.UPDATE_UP_NEXT_MARKER,function(e){e&&e===a.id&&(ks.removeClass(a.element,"now-playing-item"),ks.addClass(a.element,"up-next-item"),a.scrollIntoView(1))})},o.prototype.scrollIntoView=function(n){if(!this.container.getService(Bs.environment).browser.isLandscapeMode()){var e="end";this.index+n<ue.PAGE_SIZE&&(e="center"),this.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:e})}},o.prototype.playVideo=function(){var t=this;this.container.getService(Bs.analytics).omniture.track([R.SELECT_PLAYLIST]);var e=this.container.getService(Bs.context);e.playOrder++,e.recommendationsOrigin=this.type,this.container.player.load(this.id).then(function(){if(setTimeout(function(){return t.container.bcPlayer().play()},300),e.capiVideo!==t.capiVideo){e.withCapiData(t.capiVideo);var n=t.container.getService(Bs.capiDecorate);n.set(e.capiVideo,t.container),n.decorateContainer(),t.played=!0,e.currentlyPlayingMobileItem=t;var a=t.container.getService(Bs.eventManager);a.trigger(t.container,o.PLAYLIST_ITEM_VISIBLE,t),a.trigger(t.container,o.PLAYLIST_ITEM_PLAYED,t),t.scrollIntoView(2)}})},o.prototype.bindClick=function(){var n=this;this.buttonContainer.onclick=function(){var e=n.container.getService(Bs.eventManager);e.trigger(n.container,Te.UP_NEXT_CLICK),e.trigger(n.container,Ee.SHUFFLE_PLAYLIST_ITEMS,n.capiVideo.id),n.playVideo(),n.container.getService(Bs.context).clickToPlay=!0}},o.prototype.attachSkeleton=function(){this.element.appendChild(new Ae().element)},o.prototype.attachItem=function(){if(this.capiVideo){this.element.innerHTML="",this.element.setAttribute("data-title",this.capiVideo.title),this.element.setAttribute("data-description",this.capiVideo.caption),this.element.setAttribute("data-platformid",this.capiVideo.platformId),this.element.setAttribute("data-capi-id",this.capiVideo.id),this.id=this.capiVideo.platformId,this.element.setAttribute("id",this.capiVideo.platformId),this.buttonContainer=document.createElement("button"),this.buttonContainer.className="item-container",this.posterContainer=document.createElement("figure"),this.posterContainer.className="poster-container",this.posterImage=document.createElement("img"),this.posterImage.className="poster-image",this.posterImage.src=this.capiVideo.thumbnail,this.posterContainer.appendChild(this.posterImage),this.playButtonContainer=document.createElement("div");var t=document.createElement("span"),e=document.createElement("span");if(0===this.capiVideo.duration?(this.playButtonContainer.className="live-marker-container",t.className="live-marker-icon",e.className="live-marker-duration",e.innerHTML=o.LIVE_MARKER_LABEL):(this.playButtonContainer.className="play-button-container",t.className="play-button",e.className="play-duration",e.innerHTML=M.formatDuration(this.capiVideo.duration/1e3)),this.playButtonContainer.appendChild(t),this.playButtonContainer.appendChild(e),this.posterContainer.appendChild(this.playButtonContainer),this.buttonContainer.appendChild(this.posterContainer),this.metadataContainer=document.createElement("div"),this.metadataContainer.className="metadata-container",this.titleContainer=document.createElement("span"),this.titleContainer.className="item-title",(this.titleContainer.innerHTML=this.capiVideo.title.replace(//g," "),M.truncateDescription(this.titleContainer,o.TITLE_LENGTH_HEIGHT),this.capiVideo.accessType==l.ACCESS_TYPE_PREMIUM)){var n=this.container.getService(Bs.environment);-1<Ds.PREMIUM_VIDEO_SITES.indexOf(n.getDomain())&&(this.premium=document.createElement("div"),this.premium.className="vms-premium-tag",this.premium.innerText="PREMIUM",this.metadataContainer.appendChild(this.premium))}this.metadataContainer.appendChild(this.titleContainer),this.buttonContainer.appendChild(this.metadataContainer),this.nowPlayingMarker=document.createElement("div"),this.nowPlayingMarker.className="now-playing-marker",this.nowPlayingMarker.innerHTML=o.NOW_PLAYING_LABEL,this.upNextMarker=document.createElement("div"),this.upNextMarker.className="up-next-marker",this.upNextMarker.innerHTML=o.UP_NEXT_LABEL,this.buttonContainer.appendChild(this.nowPlayingMarker),this.buttonContainer.appendChild(this.upNextMarker),this.element.appendChild(this.buttonContainer),this.bindClick()}},o.prototype.isVisible=function(){this.visible=!1;var t=this.container.getPluginInstance(pe.pluginName);return F.isVisibleInHorizontalViewport(this.element,t.view.body)&&(this.visible=!0),this.visible},o.prototype.displayItem=function(){this.capiVideo.fetched?this.attachItem():this.attachSkeleton()},o.TITLE_LENGTH_HEIGHT=40,o.NOW_PLAYING_LABEL="Now Playing",o.UP_NEXT_LABEL="Up Next",o.LIVE_MARKER_LABEL="LIVE",o.UPDATE_UP_NEXT_MARKER="update-upnext-marker",o.UPDATE_NOW_PLAYING_MARKER="update-now-playing-marker",o.ITEM_PLAYED_THROUGH_AUTOPLAY="item-played-through-autoplay",o.PLAYLIST_ITEM_VISIBLE="playlist-item-visible",o.ITEM_PLAYED_THROUGH_SKIP_BUTTON="item-played-through-skip-button",o.ITEM_PLAYED_THROUGH_REPLAY_BUTTON="item-played-through-replay-button",o.PLAYLIST_ITEM_PLAYED="playlist-item-played",o}(G),he=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Te=function(a){function d(t,n){var i=a.call(this,n)||this;i.upNext=t;var r=t.view;r.playlistControls.element.onclick=function(){i.getService(Bs.analytics).omniture.track([R.SHOW_PLAYLIST]),i.container.bcPlayer().pause()};var p=i.container.serviceProvider.get(Bs.eventManager),e=i.getService(Bs.environment);return p.addCustomListener(i.container,D.CAPI_RELATED_FETCHED,function(r){t.setItems(r);var s=i.getService(Bs.context);s.hasRecommendations=i.upNext.view.recommendations.items&&0<i.upNext.view.recommendations.items.length;var o=i.upNext.view.recommendations.items.map(function(t){return t.capiVideo});switch(n.view.element.getAttribute(d.EXT_RECOMMENDATIONS_TYPE)){case"json":var l=new CustomEvent(d.EXT_RECOMMENDATIONS_EVENT,{detail:o});if(document.body.dispatchEvent(l),e.browser.isMobile()||s.useMobileUi())return void p.trigger(i.container,d.EXT_RECOMMENDATIONS_MOBILE_EVENT);break;case"html":var c=document.getElementById(n.view.element.getAttribute(d.EXT_RECOMMENDATIONS_TARGET));if(c)return void c.appendChild(i.upNext.view.element);default:if(e.browser.isMobile()||s.useMobileUi())return void p.trigger(i.container,d.EXT_RECOMMENDATIONS_MOBILE_EVENT);s.isVertical()||i.container.bcPlayer().el().appendChild(i.upNext.view.element),i.upNext.view.hide(),i.upNext.view.showCTA();}setTimeout(function(){p.trigger(i.container,d.EXT_RECOMMENDATIONS_LOADED_EVENT)},0)}),document.body&&document.body.addEventListener("vms-external-click",function(n){try{var e=n.detail;e.id&&e.platformId&&i.container.player.load(e.platformId).then(function(){i.container.player.getBCPlayer().play()})}catch(t){}}),p.addCustomListener(i.container,D.CAPI_TRENDING_FETCHED,function(n){0<n.length&&t.setTrendingItems(n)}),p.addListener(i.container,"error",function(){r.showList()}),p.addListener(i.container,"ended",function(){var t=i.getService(Bs.environment),e=i.container.getService(Bs.context);t.browser.isMobile()&&e.useMobileUi()||(r.showList(),0!==i.upNext.view.recommendations.items.length&&p.trigger(i.container,d.ON_UP_NEXT,function(){i.container.getService(Bs.context).clickToPlay=!1,i.next()}))}),p.addListener(i.container,"loadedmetadata",function(){var r=i.getService(Bs.environment),m=i.container.getService(Bs.context),o;if(r.browser.isMobile()&&m.useMobileUi()){var e=i.container.getPluginInstance(fe.pluginName),a=i.getService(Bs.context);if(e.view.hide(),null!=a.currentlyPlayingMobileItem){p=i.container.getPluginInstance(Ee.pluginName).events.playlistItems;for(var s=0,l;s<p.length;s++)if(p[s].capiVideo.id==a.currentlyPlayingMobileItem.capiVideo.id){l=p[s+1];break}if(!1===(null==l?void 0:l.capiVideo.fetched)){i.container.getService(Bs.capi).getVideosWhenReady(i.container,l.capiVideo,function(t){l.capiVideo=t[0],c.view.refresh(l.capiVideo),l.displayItem(),i.bindItemEvent(l,l)},function(){i.container.getService(Bs.eventManager).trigger(i.container,qo.CAPI_VIDEO_FETCH_ERROR),l.element.parentNode.removeChild(l.element)});var c=i.container.getPluginInstance(fe.pluginName);c.view.refresh(l.capiVideo)}}}else{var u=(p=t.view.recommendations.items)[0],p;u&&!1===(null===(o=u.capiVideo)||void 0===o?void 0:o.fetched)&&i.getService(Bs.capi).getVideosWhenReady(n,u.capiVideo,function(t){u.capiVideo=t[0],u.capiVideo.fetched=!0,i.container.getPluginInstance(fe.pluginName).view.refresh(u.capiVideo),u.displayItem(),i.bindItemEvent(u.recommendationsContainer,u)},function(){i.getService(Bs.eventManager).trigger(i.container,qo.CAPI_VIDEO_FETCH_ERROR),u.element.parentNode.removeChild(u.element)})}}),p.addListener(i.container,"play",function(){var t=i.container.getService(Bs.context);t.currentRecommendationItem&&ks.addClass(t.currentRecommendationItem.element,"hidden-node"),t.previousRecommendationItem&&(ks.removeClass(t.previousRecommendationItem.element,"hidden-node"),ks.addClass(t.previousRecommendationItem.element,"item-watched"),t.previousRecommendationItem=null),p.addSingleEventListener(i.container,"playing",function(){var t=i.upNext.view;t.recommendations.element&&(ks.removeClass(t.recommendations.labelContainer,"hidden-node"),ks.removeClass(t.recommendations.element,"hidden-node"),ks.removeClass(t.trending.element,"hidden-node"))})}),p.addCustomListener(i.container,j.EVENT_ITEM_VIEWPORT_VISIBLE,function(a){var e=a.capiVideo;e&&!1===e.fetched&&(e.fetched=!0,a.setLoading(),i.getService(Bs.capi).getVideosWhenReady(n,e,function(e){a.capiVideo=e[0];var t=i.getService(Bs.environment).getDomain();-1!==Ds.PREMIUM_VIDEO_SITES.indexOf(t)||a.capiVideo.accessType!==l.ACCESS_TYPE_PREMIUM?(a.displayItem(),i.bindItemEvent(a.recommendationsContainer,a)):a.element.style.display="none"},function(){i.getService(Bs.eventManager).trigger(i.container,qo.CAPI_VIDEO_FETCH_ERROR),a.element.parentNode.removeChild(a.element)}))}),i}return he(d,a),d.prototype.mobileNext=function(t){t&&this.container.serviceProvider.get(Bs.eventManager).trigger(this.container,Se.ITEM_PLAYED_THROUGH_AUTOPLAY,t.id)},d.prototype.next=function(a){var e=this;ks.removeClass(this.container.view.element,"vms-ready");var t=this.upNext.view,n=(this.getService(Bs.context),a||t.recommendations.items.shift());(this.container.related.getMoreRelated||0!==t.recommendations.items.length||this.onRecommendationsEnded(),n)&&(this.decorate(n),t.recommendations.toggleCurrent(n),this.container.player.load(n.id).then(function(){e.getService(Bs.context).playOrder++,e.getService(Bs.context).withCapiData(n.capiVideo),e.container.bcPlayer().play(),t.hideList(),ks.addClass(e.container.view.element,"vms-ready")},function(){ks.addClass(e.container.view.element,"vms-ready")}))},d.prototype.onRecommendationsEnded=function(){this.getService(Bs.eventManager).trigger(this.container,d.UP_NEXT_DEPLETED)},d.prototype.decorate=function(n){var e=this.container.getService(Bs.capiDecorate);e.set(n.capiVideo,this.container),e.decorateContainer()},d.prototype.itemHandler=function(t,e){var n=this;if(e.capiVideo===this.getService(Bs.context).capiVideo)return this.container.bcPlayer().currentTime(0),void this.container.bcPlayer().controlBar.playToggle.trigger("click");this.decorate(e),this.getService(Bs.analytics).omniture.track([R.SELECT_PLAYLIST]);var a=this.container.getService(Bs.context);a.playOrder++,a.recommendationsOrigin=e.type,this.container.player.load(e.id).then(function(){a.withCapiData(e.capiVideo),n.container.bcPlayer().play()}),0<t.list.children.length&&(t.toggleCurrent(e),t.items.splice(t.items.indexOf(e),1)),ks.addClass(document.getElementById("vms-upnext-label-container"),"hidden-node"),ks.addClass(t.element,"hidden-node"),t.element.className=t.element.className.replace(" active",""),this.getService(Bs.eventManager).trigger(this.container,d.UP_NEXT_CLICK),a.clickToPlay=!0},d.prototype.bindItemEvent=function(a,e){var t=this;e.capiVideo&&e.capiVideo.fetched&&(e.img&&(e.img.onclick=function(){t.itemHandler(a,e)}),e.play&&(e.play.onclick=function(){t.itemHandler(a,e)}),e.title&&(e.title.onclick=function(){t.itemHandler(a,e)}))},d.prototype.setItemEvents=function(n){for(var e in n.items)this.bindItemEvent(n,n.items[e])},d.ON_UP_NEXT="ON_UP_NEXT",d.UP_NEXT_CLICK="ON_UP_NEXT_CLICK",d.UP_NEXT_DEPLETED="ON_UP_NEXT_DEPLETED",d.EXT_RECOMMENDATIONS_TARGET="vms-recommendations-target",d.EXT_RECOMMENDATIONS_TYPE="vms-recommendations-type",d.EXT_RECOMMENDATIONS_EVENT="vms-recommendations",d.EXT_RECOMMENDATIONS_MOBILE_EVENT="vms-recommendations-mobile",d.EXT_RECOMMENDATIONS_LOADED_EVENT="vms-ext-recommendations-loaded",d}(u),Ne=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ie=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.view=new $(t),n.events=new Te(n,n.container),n}return Ne(e,a),e.prototype.setItems=function(t){this.view.recommendations.setItems(t),this.events.setItemEvents(this.view.recommendations)},e.prototype.setTrendingItems=function(t){this.view.trending.view=this.view,this.view.trending.setItems(t),this.view.trending.setViewElements(),this.view.trending.setViewEvents(),this.events.setItemEvents(this.view.trending)},e.pluginName="PLUGIN_UP_NEXT",e}(A),be=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pe=function(a){function n(e){var o=a.call(this,document.createElement("button"))||this;o.container=e,o.element.className="vjs-control vjs-button hidden-node "+fe.CSS_CLASS_NAME,o.element["aria-disabled"]=!1,o.hoverContainer=document.createElement("div"),o.hoverContainer.className="hover-container",o.hover=document.createElement("div"),o.hover.className="hover";var n=document.createElement("h4");n.innerHTML="UP NEXT",o.image=document.createElement("img"),o.image.onerror=function(){o.image.getAttribute("data-errored")||(o.image.setAttribute("data-errored","errored"),o.image.src=V.get()+"img/fallback.jpg",o.image.width=100,o.image.height=50)},o.description=document.createElement("div"),o.description.className="description",o.duration=document.createElement("div"),o.duration.className="duration",o.hover.appendChild(n),o.hover.appendChild(o.image),o.hover.appendChild(o.description),o.hover.appendChild(o.duration),o.hoverContainer.appendChild(o.hover),o.container.getService(Bs.context).useMobileUi()||o.element.appendChild(o.hoverContainer);var i=document.createElement("div");return i.className="arrow",o.hoverContainer.appendChild(i),o.hide(),o}return be(n,a),n.prototype.refresh=function(t){this.video=t,t&&(this.image.src=t.thumbnail||t.poster,this.description.innerHTML=M.truncate(t.title,n.TEXT_LIMIT),this.hasDurationMarker||this.appendDurationMarker(this.duration,t.duration)),this.container.player.getBCPlayer().ads.isInAdMode()||this.show()},n.TEXT_LIMIT=55,n}(G),we=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Le=function(a){function r(e,r){var n=a.call(this,e,r)||this;return n.container=e,n.playerReadyEvents(),n}return we(r,a),r.prototype.getName=function(){return""},r.prototype.getIndex=function(){return 0},r.prototype.registerComponent=function(){},r.prototype.canAddComponent=function(t){for(var e=!1,a=0,i=t.children(),r;a<i.length;a++)r=i[a],r.name_===this.getName()&&r.el_.parentNode===t.el_&&(e=!0);return!e},r.prototype.playerReadyEvents=function(){var t=this,e=this.container.getService(Bs.eventManager);e.addListener(this.container,"ready",function(){t.registerComponent();var n=t.container.bcPlayer().controlBar;t.canAddComponent(n,t.getName())&&n.addChild(t.getName(),{},t.getIndex()),e.trigger(t.container,r.EVENT_COMPONENT_ADDED,{controlBar:"default",component:t.getName()})})},r.EVENT_COMPONENT_ADDED="COMPONENT_ADDED",r}(A),Oe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fe=function(a){function r(e){var t=a.call(this,e,r.pluginName)||this;return t.view=new Pe(e),t.setEvents(),t}return Oe(r,a),r.prototype.getName=function(){return r.COMPONENT_NAME},r.prototype.getIndex=function(){return r.COMPONENT_INDEX},r.prototype.setEvents=function(){var a=this;if(!this.getService(Bs.context).isVertical()){var e=this.container.getPluginInstance(Ie.pluginName),n=this.getService(Bs.eventManager);n.addCustomListener(this.container,D.CAPI_RELATED_FETCHED,function(){a.view.show();var t=e.view.recommendations.items[0];t&&t.capiVideo.title?(a.view.refresh(t.capiVideo),setTimeout(function(){ks.removeClass(a.view.element,"hidden-node")},0)):a.getService(Bs.capi).getVideosWhenReady(a.container,t.capiVideo,function(e){a.view.refresh(e[0]),setTimeout(function(){ks.removeClass(a.view.element,"hidden-node")},0)},function(){a.view.hide(),ks.addClass(a.view.element,"hidden-node"),a.getService(Bs.eventManager).trigger(a.container,qo.CAPI_VIDEO_FETCH_ERROR)}),n.addListener(a.container,"play",function(){var n=e.view.recommendations.items[0];n&&a.view.refresh(n.capiVideo)})}),n.addCustomListener(this.container,Te.UP_NEXT_CLICK,function(){var n=e.view.recommendations.items[0];n&&a.view.refresh(n.capiVideo)}),n.addCustomListener(this.container,Te.EXT_RECOMMENDATIONS_LOADED_EVENT,function(){var n=e.view.recommendations.items[0];n&&a.view.refresh(n.capiVideo)}),n.addCustomListener(this.container,r.ON_SKIP_EVENT,function(){var i=a.container.getService(Bs.environment),t=a.container.getService(Bs.context);if(i.browser.isMobile()&&"json"!==a.container.view.element.getAttribute(Te.EXT_RECOMMENDATIONS_TYPE)||t.useMobileUi())n.trigger(a.container,Ee.PLAYLIST_SKIP_VIDEO_EVENT);else{e.events.next();var r=e.view.recommendations.items[0];r&&a.view.refresh(r.capiVideo)}}),n.addCustomListener(this.container,Se.PLAYLIST_ITEM_PLAYED,function(e){e&&e.capiVideo&&a.view.refresh(e.capiVideo)}),n.addCustomListener(this.container,Te.UP_NEXT_DEPLETED,function(){a.container.bcPlayer().controlBar.removeChild("SkipToNext")}),n.addListener(this.container,"timeupdate",function(){var e,t;!1!==(null===(e=a.view.video)||void 0===e?void 0:e.fetched)&&(null===(t=a.view.video)||void 0===t?void 0:t.sectionId)?a.view.show():a.view.hide()})}},r.prototype.registerComponent=function(){var t=this,e=videojs.extend(videojs.getComponent("Button"),{createEl:function(){return t.view.element},handleClick:function(){t.container.getService(Bs.context).clickToPlay=!0;var e=t.container;e.getService(Bs.eventManager).trigger(e,r.ON_SKIP_EVENT)}});videojs.registerComponent(r.COMPONENT_NAME,e)},r.CSS_CLASS_NAME="rp-skip-button",r.ON_SKIP_EVENT="EVENT_ON_SKIP",r.pluginName="PLUGIN_SKIP_BUTTON",r.COMPONENT_NAME="SkipToNext",r.COMPONENT_INDEX=1,r}(Le),Re=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Me=function(a){function e(e){var r=a.call(this,document.createElement("div"))||this;r.container=e;var n=r.container.getService(Bs.environment);return r.element.className="vjs-control vjs-button rp-hidden-control "+Be.CSS_CLASS_NAME,n.browser.isMobile()&&ks.addClass(r.element,Be.CSS_CLASS_NAME_MOBILE),n.browser.isIpad()&&ks.addClass(r.element,Be.CSS_CLASS_NAME_IPAD),r.handle=document.createElement("button"),r.handle.className="disabled",r.element.appendChild(r.handle),r.element["aria-disabled"]=!1,r}return Re(e,a),e}(N),De=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ke=function(a){function e(e,r){var n=a.call(this,e)||this;return n.display=!0,n.view=r,n.setEvents(),n}return De(e,a),e.prototype.clickHandler=function(){if(this.getService(Bs.context).hasSubtitles()){this.display=!this.display,window.sessionStorage.setItem(Be.STORAGE_NAME,""+this.display),this.refreshCss(),this.getService(Bs.analytics).omniture.track([this.display?R.CC_ON:R.CC_OFF]);var t=this.container.getPluginInstance(Be.pluginName);this.display?t.displayTracks():t.hideTracks()}},e.prototype.setEvents=function(){var n=this,e=this.getService(Bs.eventManager);e.addListener(this.container,"ready",function(){n.display="true"===window.sessionStorage.getItem(Be.STORAGE_NAME)||!0===n.container.bcPlayer().muted()}),e.addListener(this.container,"playing",function(){var e=n.container.getPluginInstance(Be.pluginName);n.display?e.displayTracks():e.hideTracks(),ks.hasClass(n.view.element,"rp-hidden-control")&&ks.removeClass(n.view.element,"rp-hidden-control"),e.refreshCaptionState()}),e.addMultipleListener(this.container,["ads-ad-ended","ads-ad-skipped","ima3error","ima3-ad-error"],function(){var e=n.container.getPluginInstance(Be.pluginName);ks.removeClass(e.view.element,"rp-hidden-control")}),ks.onClick(this.view.element,function(){n.clickHandler()})},e.prototype.refreshCss=function(){"true"!==window.sessionStorage.getItem(Be.STORAGE_NAME)&&!0!==this.container.bcPlayer().muted()?ks.addClass(this.container.bcPlayer().el(),"vms-cc-hidden"):ks.removeClass(this.container.bcPlayer().el(),"vms-cc-hidden")},e}(u),Ve=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Be=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.view=new Me(e),t.events=new ke(t.container,t.view),t}return Ve(o,a),o.prototype.getName=function(){return o.COMPONENT_NAME},o.prototype.getIndex=function(){return o.COMPONENT_INDEX},o.prototype.registerComponent=function(){var t=this,e=videojs.getComponent("button");videojs.registerComponent(o.COMPONENT_NAME,videojs.extend(e,{createEl:function(){return t.view.element},handleClick:function(){}}))},o.prototype.displayTracks=function(){for(var t=0,e=this.container.bcPlayer().textTracks().tracks_,n;t<e.length;t++)if(n=e[t],"subtitles"===n.kind){n.mode="showing";break}this.container.bcPlayer().textTrackDisplay.show();var a=this.container.getPluginInstance(o.pluginName);ks.removeClass(a.view.handle,"disabled"),ks.removeClass(a.view.handle,"inactive"),ks.addClass(a.view.handle,"active")},o.prototype.hideTracks=function(){for(var t=0,e=this.container.bcPlayer().textTracks().tracks_;t<e.length;t++)e[t].mode="disabled";var n=this.container.getPluginInstance(o.pluginName);ks.removeClass(n.view.handle,"disabled"),ks.removeClass(n.view.handle,"active"),ks.addClass(n.view.handle,"inactive")},o.prototype.refreshCaptionState=function(){var t=this.getService(Bs.context),e=this.container.getPluginInstance(o.pluginName);(ks.addClass(e.view.handle,"disabled"),t.hasSubtitles())&&(this.hideTracks(),"true"!==(window.sessionStorage.getItem(o.STORAGE_NAME)||"false")&&!0!==this.container.bcPlayer().muted()||(this.displayTracks(),ks.removeClass(this.container.bcPlayer().el_,"vms-cc-hidden")))},o.CSS_CLASS_NAME="rp-cc-button",o.CSS_CLASS_NAME_MOBILE="rp-cc-button-mobile",o.CSS_CLASS_NAME_IPAD="rp-cc-button-ipad",o.pluginName="PLUGIN_CC",o.STORAGE_NAME="vms.cc.display",o.COMPONENT_NAME="CCButton",o.COMPONENT_INDEX=10,o}(Le),xe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ue=function(a){function r(e,r){var n=a.call(this,e)||this;return n.onClickEvents=[],n.view=r,n.setEvents(),n}return xe(r,a),r.prototype.setAutoplayEvents=function(){var n=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,ze.EVENT_USER_STATUS,function(e){e===ze.USER_REGISTERED?n.view.videoAutoplay.onRegistered():e===ze.USER_SUBSCRIBER?n.view.videoAutoplay.onSubscribed():n.view.videoAutoplay.onLoggedOut()}),e.addCustomListener(this.container,qo.BC_READY,function(){n.view.videoAutoplay.onLoggedOut(),e.trigger(n.container,ze.EVENT_CHECK_LOGIN)}),e.addListener(this.container,"timeupdate",function(){e.trigger(n.container,ze.EVENT_CHECK_LOGIN)}),e.addListener(this.container,"play",function(){ks.onClick(n.view.videoAutoplay.switchContainer,function(){n.toggleAutoplay()}),ks.onClick(n.view.videoAutoplay.autoplayOff,function(){n.view.showPremium()}),ks.onClick(n.view.videoAutoplay.premiumContainer,function(){n.view.hidePremium()})})},r.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager),t=this.getService(Bs.environment);this.container.getService(Bs.environment).browser.isDesktop()||t.isSky()?this.setAutoplayEvents():e.addCustomListener(this.container,qo.BC_READY,function(){e.trigger(a.container,ze.EVENT_CHECK_LOGIN)}),e.addCustomListener(this.container,r.EVENT_TOGGLE_MENU,function(){ks.toggleClass(a.view.settingsContainer,"hidden")}),e.addMultipleListener(this.container,["ads-ad-ended","ads-ad-skipped","ima3error","ima3-ad-error"],function(){ks.removeClass(a.view.element,"rp-hidden-control")}),e.addListener(this.container,"play",function(){a.container.bcPlayer().one("playing",function(){ks.hasClass(a.view.element,"rp-hidden-control")&&ks.removeClass(a.view.element,"rp-hidden-control")}),a.refreshCss(),ks.onClick(a.view.handle,function(){var n=a.getService(Bs.environment);if(n.browser.isMobile()&&!n.isSky())ks.toggleClass(a.view.videoQuality.view.resolutionContainer,"active");else{a.view.hidePremium(),e.trigger(a.container,ze.EVENT_CHECK_LOGIN),ks.toggleClass(a.view.settingsContainer,"hidden"),ks.removeClass(a.view.videoQuality.view.resolutionContainer,"active");for(var t=0,i=a.onClickEvents;t<i.length;t++)(0,i[t])()}})}),e.addCustomListener(this.container,fe.ON_SKIP_EVENT,function(){-1===a.view.settingsContainer.className.indexOf("hidden")&&ks.addClass(a.view.settingsContainer,"hidden")}),e.addCustomListener(this.container,He.EVENT_HLS_PLUGIN_ACTIVE,function(){ks.addClass(a.view.settingsContainer,"video-quality-active"),a.view.addVideoQuality(a.container)})},r.prototype.toggleAutoplay=function(){var a=je.get(this.container);if(this.view.videoAutoplay.currentStatus!==ze.USER_ANONYMOUS){var e=this.view.videoAutoplay.switch,t=e.checked;if(e.checked=!t,a.autoplayEnabled=!t,this.view.videoAutoplay.currentStatus===ze.USER_REGISTERED){var r=new Date;r.setMonth(r.getMonth()+1),a.autoplayDisabledExpiry=r}this.view.videoAutoplay.switch.checked&&(this.view.videoAutoplay.manuallySwitchedOn=!0),a.save(),this.trackAutoplay()}},r.prototype.trackAutoplay=function(){var n=this.getService(Bs.analytics).omniture,e=this.view.videoAutoplay.switch.checked?R.AUTOPLAY_TURNED_ON:R.AUTOPLAY_TURNED_OFF;n.track([e])},r.prototype.refreshCss=function(){"true"!==window.sessionStorage.getItem(Be.STORAGE_NAME)&&!0!==this.container.bcPlayer().muted()?ks.addClass(this.container.bcPlayer().el(),"vms-cc-hidden"):ks.removeClass(this.container.bcPlayer().el(),"vms-cc-hidden")},r.EVENT_TOGGLE_MENU="EVENT_TOGGLE_MENU",r}(u),He=function(){function n(n,a){this.container=n,this.plugin=a,this.eventManager=this.container.getService(Bs.eventManager),this.enableLowPlaylist(),this.initPluginEvents(),this.container.getService(Bs.context).videoQuality=O.get()}return n.prototype.enableLowPlaylist=function(){this.eventManager.addListener(this.container,"ready",function(){videojs&&videojs.Hls&&videojs.xhr&&(videojs.Hls.xhr.beforeRequest=function(t){t.enableLowInitialPlaylist=!0})})},n.prototype.initPluginEvents=function(){var t=this;this.eventManager.addListener(this.container,"loadedmetadata",function(){t.plugin.isApplicable().then(function(){t.onPluginActive(),ks.addClass(t.plugin.settingsView.settingsContainer,"video-quality-enabled")},function(){t.container.log("[VideoQuality]","Plugin disabled")})})},n.prototype.onPluginActive=function(){var e=this;this.fetchPlaylists(),this.container.bcPlayer().tech(!0).vhs.selectPlaylist=function(){return e.plugin.selectPlaylist()},this.eventManager.trigger(this.container,n.EVENT_HLS_PLUGIN_ACTIVE),this.bindEvents()},n.prototype.bindEvents=function(){var n=this,e=this.container.getService(Bs.eventManager);this.plugin.view.attachResolutions(this.plugin.settingsView.element),ks.onClick(this.plugin.view.currentQuality,function(){ks.addClass(n.plugin.view.resolutionContainer,"active"),n.plugin.view.resolutionContainer.offsetHeight+n.container.bcPlayer().controlBar.el().offsetHeight>n.container.view.element.offsetHeight?ks.addClass(n.plugin.view.resolutionContainer,"small"):ks.removeClass(n.plugin.view.resolutionContainer,"small"),e.trigger(n.container,Ue.EVENT_TOGGLE_MENU)}),ks.onClick(this.plugin.view.highButton,function(){n.onClick("high")}),ks.onClick(this.plugin.view.mediumButton,function(){n.onClick("medium")}),ks.onClick(this.plugin.view.lowButton,function(){n.onClick("low")}),ks.onClick(this.plugin.view.backButton,function(){n.container.getService(Bs.environment).browser.isMobile()?ks.removeClass(n.plugin.view.resolutionContainer,"active"):(ks.removeClass(n.plugin.view.resolutionContainer,"active"),e.trigger(n.container,Ue.EVENT_TOGGLE_MENU))})},n.prototype.onClick=function(a){var e=this.container.getService(Bs.analytics),t=this.container.getService(Bs.context);this.plugin.low.selected=this.plugin.medium.selected=this.plugin.high.selected=!1,this.plugin[a].selected=!0,this.plugin.selectedPlaylistIndex=this.plugin[a].select(),ks.removeClass(this.plugin.view.resolutionContainer,"active"),this.plugin.view.refreshQualityLabel(),t.videoQuality=a,e.omniture.track([R.VIDEO_QUALITY_CHANGED],{eVar137:t.videoQuality})},n.prototype.fetchPlaylists=function(){var a=this.container.bcPlayer().tech(!0).vhs.playlists.master.playlists,i=[];if(1<a.length){var t=0;a.forEach(function(n){n.attributes&&n.attributes.RESOLUTION&&i.push(new f(t++,n.attributes.RESOLUTION.width,n.attributes.RESOLUTION.height,n.attributes.BANDWIDTH.bandwidth))}),i.sort(function(n,e){return n.compare(e)}),this.plugin.high=i.pop(),this.plugin.high.label="high",this.plugin.medium=i.pop(),this.plugin.medium.label="medium",this.plugin.low=i.shift(),this.plugin.low.label="low",this.plugin.selectedPlaylistIndex=this.plugin.getDefaultResolution(),this.plugin.view.refreshQualityLabel()}},n.EVENT_HLS_PLUGIN_ACTIVE="EVENT_HLS_PLUGIN_ACTIVE",n}(),Ge=function(){function n(n,a){this.selectedPlaylistIndex=0,this.view=new L(n,this),this.settingsView=a,this.container=n,this.events=new He(this.container,this)}return n.prototype.isApplicable=function(){var a=this;return new Promise(function(e,t){var n=a.container.bcPlayer().tech(!0).vhs;if(n){var i=n.playlists;if(i){var r=i.master;r&&1<r.playlists.length&&e({})}}t({})})},n.prototype.getDefaultResolution=function(e){switch(e=e||O.get()||n.DEFAULT_QUALITY){case"low":return this.low?this.low.select():this.getDefaultResolution("medium");case"medium":return this.medium?this.medium.select():this.getDefaultResolution("high");case"high":return this.high?this.high.select():0;default:return 0;}},n.prototype.selectPlaylist=function(){return this.container.bcPlayer().tech(!0).vhs.playlists.master.playlists[this.selectedPlaylistIndex||0]},n.DEFAULT_QUALITY="medium",n}(),Ye=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),We=function(a){function e(e){var r=a.call(this,document.createElement("div"))||this;r.container=e,r.element.className="vjs-control vjs-button rp-hidden-control "+Ke.CSS_CLASS_NAME,r.handle=document.createElement("button"),r.element.appendChild(r.handle),r.element["aria-disabled"]=!1;var n=document.createElement("div");return n.className="arrow",r.settingsContainer=document.createElement("div"),r.settingsContainer.className="rp-settings-container hidden no-cc",r.element.appendChild(r.settingsContainer),r.container.getService(Bs.environment).browser.isIpad()&&ks.addClass(r.element,Ke.CSS_CLASS_NAME_IPAD),r.videoAutoplay=new P(r,e),r.settingsContainer.appendChild(r.videoAutoplay.element),r.settingsContainer.appendChild(n),r.videoQuality=new Ge(e,r),r}return Ye(e,a),e.prototype.onReady=function(t){this.container.ready?t():this.container.getService(Bs.eventManager).addSingleCustomListener(this.container,qo.BC_READY,t)},e.prototype.showPremium=function(){var a=this;this.onReady(function(){ks.addClass(a.settingsContainer,"rp-show-premium");var e=a.container.getService(Bs.environment),t=a.container.getService(Bs.context),n=e.browser.isDesktop(),i=e.browser.isMobile();(n||i&&e.isSky()||t.useMobileUi())&&(a.videoAutoplay.premiumContainer.style.display="block",a.videoAutoplay.autoplayOff.style.display="none",a.videoAutoplay.label.style.display="none",a.videoAutoplay.switch.style.display="none")})},e.prototype.hidePremium=function(){var a=this;this.onReady(function(){ks.removeClass(a.settingsContainer,"rp-show-premium");var e=a.container.getService(Bs.environment),t=a.container.getService(Bs.context),n=e.isSky(),i=e.browser.isDesktop(),r=e.browser.isMobile();(i||r&&n||t.useMobileUi())&&(a.videoAutoplay.premiumContainer.style.display="none",a.videoAutoplay.autoplayOff.style.display="block",a.videoAutoplay.label.style.display="block",a.videoAutoplay.switch.style.display="block")})},e.prototype.addVideoQuality=function(){this.settingsContainer.insertBefore(this.videoQuality.view.element,this.settingsContainer.children[0])},e}(N),Fe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ke=function(a){function r(e){var t=a.call(this,e,r.pluginName)||this;return t.view=new We(e),t.events=new Ue(t.container,t.view),t}return Fe(r,a),r.prototype.getName=function(){return r.COMPONENT_NAME},r.prototype.getIndex=function(){return r.COMPONENT_INDEX},r.prototype.registerComponent=function(){var a=this,e=videojs.getComponent("button");videojs.registerComponent(r.COMPONENT_NAME,videojs.extend(e,{createEl:function(){var e=a.getService(Bs.environment);return e.browser.isIOS()&&!e.isSky()&&e.browser.isMobile()?document.createElement("div"):a.view.element},handleClick:function(){}}))},r.CSS_CLASS_NAME="rp-settings-button",r.CSS_CLASS_NAME_IPAD="rp-settings-button-ipad",r.pluginName="PLUGIN_SETTINGS",r.COMPONENT_NAME="SettingsButton",r.COMPONENT_INDEX=11,r}(Le),je=function(){function s(){this.autoplayEnabled=!0}return s.get=function(e){var t=localStorage.getItem(s.STORAGE_NAME),n=new s,i=s.getDefaultSubscriberBehavior(e);if(!1===i&&(n.autoplayEnabled=i),t)try{var r=JSON.parse(atob(t)),o=e.getService(Bs.context).auth;void 0!==o&&o.currentRole===ze.USER_ANONYMOUS||(void 0!==typeof r.autoplayEnabled&&(n.autoplayEnabled=r.autoplayEnabled),void 0!==typeof r.autoplayDisabledExpiry&&r.autoplayDisabledExpiry&&(n.autoplayDisabledExpiry=new Date(r.autoplayDisabledExpiry)))}catch(t){}return n},s.getDefaultSubscriberBehavior=function(a){var e=[];e.push(Ds.THE_AUSTRALIAN),e.push(Ds.NEWS),e=e.concat(Ds.PLNN_SITES);for(var t=Ms.getIFrameURL(),n=!1,i=0,r=e,o;i<r.length;i++)if(o=r[i],-1<t.indexOf(o)){n=!0;break}var s=!0,l=a.getService(Bs.context).auth,c=l?l.currentRole:ze.USER_ANONYMOUS;n&&c===ze.USER_SUBSCRIBER&&a.getService(Bs.context).autoPlay&&(s=!1);var d=a.getPluginInstance(Ke.pluginName),p=null;return d&&(p=d.view.videoAutoplay.manuallySwitchedOn),p||s},s.set=function(e,a){var n={autoplayEnabled:e,autoplayDisabledExpiry:""};a&&(n.autoplayDisabledExpiry=a.toDateString()),localStorage.setItem(s.STORAGE_NAME,btoa(JSON.stringify(n)))},s.prototype.save=function(){s.set(this.autoplayEnabled,this.autoplayDisabledExpiry)},s.STORAGE_NAME="vms.rp.settings",s}(),Xe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ze=function(a){function d(e){var i=a.call(this,e)||this;return i.currentRole="USER_ANONYMOUS",i.eventManager=i.getService(Bs.eventManager),i.utagData=i.container.getService(Bs.utag),i.provider=i.getAuthProvider(),i.setEvents(),i}return Xe(d,a),d.prototype.authDisabled=function(){return!this.utagData||-1<Ms.getDomain().indexOf("escape")},d.prototype.getAuthProvider=function(){var t=null;return this.authDisabled()||(void 0!==this.utagData.get("pc_memtype")||T.getCookie("subscriber_token")?t=d.PROVIDER_IDP:window.gigya&&(t=d.PROVIDER_GIGYA)),t},d.prototype.setEvents=function(){var t=this;this.eventManager.addCustomListener(this.container,d.EVENT_CHECK_LOGIN,function(){switch(t.provider){case d.PROVIDER_IDP:t.checkIdpLoginStatus();break;case d.PROVIDER_GIGYA:t.checkGigyaLoginStatus();break;default:t.currentRole=d.USER_REGISTERED,t.eventManager.trigger(t.container,d.EVENT_USER_STATUS,d.USER_REGISTERED);}})},d.prototype.checkIdpLoginStatus=function(){var t=d.USER_ANONYMOUS;switch(this.utagData.get("pc_memtype")){case"subscriber":t=d.USER_SUBSCRIBER;break;case"registered":t=d.USER_REGISTERED;break;default:t=d.getStatusFromCookie();}this.currentRole=t,this.eventManager.trigger(this.container,d.EVENT_USER_STATUS,t)},d.prototype.isSubscriberOrRegisteredUser=function(){return this.currentRole===d.USER_REGISTERED||this.currentRole===d.USER_SUBSCRIBER},d.getStatusFromCookie=function(){var t=T.getCookie("subscriber_token"),e=d.USER_ANONYMOUS;if(t)try{var n=JSON.parse(t);n.hasOwnProperty("entitlements")&&(e=!0===n.entitlements?d.USER_SUBSCRIBER:d.USER_REGISTERED)}catch(t){}return e},d.prototype.checkGigyaLoginStatus=function(){var t=this,e=d.USER_ANONYMOUS;window.gigya&&window.gigya.accounts&&window.gigya.accounts.getAccountInfo&&window.gigya.accounts.getAccountInfo({extraProfileFields:"address,phones",callback:function(n){n.status===d.GIGYA_FAILED?(t.eventManager.trigger(t.container,d.EVENT_USER_STATUS,e),t.currentRole=e):(t.eventManager.trigger(t.container,d.EVENT_USER_STATUS,d.USER_REGISTERED),t.currentRole=d.USER_REGISTERED)}})},d.prototype.getAuthTokenValues=function(){if(this.provider!==d.PROVIDER_IDP)return"";var t={pcMemType:"",subscriberToken:"undefined",expiry:"",autoplay:"no"};t.pcMemType=this.utagData.get("pc_memtype")||void 0!==typeof this.utagData.get("pc_memtype")?this.utagData.get("pc_memtype")||""!==this.utagData.get("pc_memtype")?this.utagData.get("pc_memtype"):"null":"undefined";var e=T.getCookie("subscriber_token");if(e)try{var n=JSON.parse(e);n.hasOwnProperty("entitlements")&&(t.subscriberToken=!0===n.entitlements?"yes":"no")}catch(e){t.subscriberToken="error"}try{var i=localStorage.getItem(je.STORAGE_NAME),r=JSON.parse(atob(i)),o=Date.parse(r.autoplayDisabledExpiry);if(""===r||""===r.autoplayDisabledExpiry||"Invalid Date"==r.autoplayDisabledExpiry||isNaN(o))t.expiry="invalid";else{var a=new Date(r.autoplayDisabledExpiry),s=new Date;t.expiry=a instanceof Date&&a<s?"expired":"valid"}}catch(e){t.expiry="error"}var c=je.get(this.container);return t.autoplay=!0===c.autoplayEnabled?"yes":"no",t.pcMemType+"|"+t.subscriberToken+"|"+t.expiry+"|"+t.autoplay},d.PROVIDER_GIGYA="GIGYA",d.PROVIDER_IDP="IDP",d.PROVIDER_AUTH0="AUTH0",d.EVENT_CHECK_LOGIN="EVENT_CHECK_LOGIN",d.EVENT_USER_STATUS="EVENT_USER_STATUS",d.USER_ANONYMOUS="USER_ANONYMOUS",d.USER_REGISTERED="USER_REGISTERED",d.USER_SUBSCRIBER="USER_SUBSCRIBER",d.GIGYA_FAILED="FAIL",d}(u),Qe={dev:{adConfigId:"",enabled:!1},sit:{adConfigId:"84c37b83-011c-46d9-ba0e-5cbd53520f44",enabled:!0},uat:{adConfigId:"f05768f2-3c74-469e-b53a-4ad3931b0561",enabled:!0},beta:{adConfigId:"2cb8109a-39f2-4e4f-a4ce-ec3941116954",enabled:!0},prod:{adConfigId:"2cb8109a-39f2-4e4f-a4ce-ec3941116954",enabled:!0}},$e=function(){function t(){}return t.get=function(a){var e=Qe[a.name],t=Ms.getSearchParams();return"enabled"===t.ssai&&(e.enabled=!0),t.adConfigId&&(e.adConfigId=t.adConfigId),ze.getStatusFromCookie()===ze.USER_SUBSCRIBER&&-1<Ds.PROJECT0_SITES.indexOf(a.getDomain())&&(e.enabled=!1),e},t}(),qe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ze=function(a){function e(e){var i=a.call(this,e)||this;return i.noAdBlocker="00000",i}return qe(e,a),e.prototype.isUsingAdBlocker=function(){var t=this.getService(Bs.utag);return this.container.log("[Ad Block Detection]",t.get("cbd"),void 0!==t.get("cbd")&&t.get("cbd")!==this.noAdBlocker),void 0!==t.get("cbd")&&t.get("cbd")!==this.noAdBlocker},e}(u),Je=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),et=function(a){function e(e){var i=a.call(this,e)||this;return i.ap="on",i.vsite="news",i.prod="video",i.kw="",i.pltype="other",i.ph=0,i.pw=0,i.plo=1,i.source="",i.muted="no",i.pos=1,i.uuid="{{system.unique_user_id}}",i.addedValues=[],i.admiralEngaged=!1,i}return Je(e,a),e.prototype.setValues=function(){var n=this.getService(Bs.context),e=this.getService(Bs.environment);this.advancedTargeting=window.ads_api&&window.ads_api.targeting||{},this.vsite=e.domain,this.ap=!1===n.autoPlay||n.isHubPage?"off":"on",this.kw=e.pageKeywords,this.pltype=n.playerType,this.plo=n.playOrder,this.source=n.capiVideo.source,this.admiralEngaged=n.admiralEngaged},e.prototype.setBCPlayer=function(t){this.ph=t.height(),this.pw=t.width(),this.muted=t.muted()?"yes":"no"},e.prototype.parseAdvanceTargeting=function(){for(var a=0,e=Object.keys(this.advancedTargeting);a<e.length;a++){var t=e[a],n=this.advancedTargeting[t];switch(t){case"kw":continue;case"ksgmnt":n=n.toString();break;default:this[t]=n;}}},e.prototype.addValues=function(n){for(var e in n)this.addedValues.push(e),this[e]=n[e]},e.prototype.clearAdditionalValues=function(){for(;0<this.addedValues.length;)delete this[this.addedValues.pop()]},e.prototype.getVsec=function(){for(var a="",e=0,t=0,n=this.getService(Bs.context).capiVideo.categoriesExtended()||["News"];t<n.length&&!(a+="vsec"+ ++e+"="+n[t]+"&",4===e);t++);return a.replace(/\&+$/,"")},e.prototype.get=function(){this.setValues(),this.parseAdvanceTargeting();for(var a="",e=0,t=Object.getOwnPropertyNames(this),n;e<t.length;e++)switch(n=t[e],n){case"uuid":this.getService(Bs.context).ssai&&(a+=n+"="+this[n]+"&");break;case"context":case"container":case"serviceProvider":case"advancedTargeting":case"addedValues":continue;case"admiralEngaged":this.admiralEngaged&&(a+="admiral-engaged="+this.admiralEngaged+"&");break;default:a+=n+"="+this[n]+"&";}return a+=this.getVsec(),encodeURIComponent(a.replace(/\&+$/,""))},e}(u),tt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),nt=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.environment=n.container.getService(Bs.environment),n.config=$e.get(n.environment),n}return tt(e,a),e.prototype.augmentSources=function(a){var e=new et(this.container);for(var t in a.sources){var n=a.sources[t];if(void 0!==n.vmap){var i="?";n.src.indexOf("?")&&(i="&"),n.vmap+=i+"cust_params="+encodeURIComponent(e.get()),n.vmap+="&iu="+encodeURIComponent(window.ads_api&&window.ads_api.uname||"")+"&ppid=",a.sources[t]=n}}return a},e.prototype.getAdConfigId=function(){var a=this;return new Promise(function(e,t){var n=a.container.getService(Bs.context);n.checkUserTypeParameter();var o=a.config.adConfigId;!a.config.enabled||n.isVertical()?t():a.container.bcPlayer().usingAdBlocker().then(function(n){(a.container.log("[SSAI]","isUsingAdBlocker",n),new Ze(a.container).isUsingAdBlocker()!==n)&&a.getService(Bs.analytics).omniture.delay([R.ADBLOCK_DETECTION_MISMATCH]),n&&!a.container.getService(Bs.context).adsDisabled?(a.getService(Bs.context).ssai=!0,e(o)):t()}).catch(function(){t()})})},e.pluginName="PLUGIN_SSAI",e}(A),at=function(){function t(){}return t.VIDEO_CLOUD_ERR_NOT_PLAYABLE={type:"VIDEO_CLOUD_ERR_NOT_PLAYABLE",headline:"The Video Cloud video is not playable.",message:"Please try again",canRetry:!1},t.MEDIA_ERR_ABORTED={type:"MEDIA_ERR_ABORTED",headline:"The video connection was lost",message:"Please check your internet connection and try again",canRetry:!0},t.MEDIA_ERR_NETWORK={type:"MEDIA_ERR_NETWORK",headline:"The video connection was lost",message:"Please check your internet connection and try again",canRetry:!0},t.MEDIA_ERR_DECODE={type:"MEDIA_ERR_DECODE",headline:"Unable to playback video",message:"The video you're trying to watch is not supported by this device or browser",canRetry:!1},t.MEDIA_ERR_SRC_NOT_SUPPORTED={type:"MEDIA_ERR_SRC_NOT_SUPPORTED",headline:"Unable to playback video",message:"The video you're trying to watch is not supported by this device or browser",canRetry:!1},t.MEDIA_ERR_ENCRYPTED={type:"MEDIA_ERR_ENCRYPTED",headline:"Unable to playback video",message:"The video you're trying to watch is not supported by this device or browser",canRetry:!1},t.MEDIA_ERR_UNKNOWN={type:"MEDIA_ERR_UNKNOWN",headline:"Unable to playback video",message:"An unknown error has occurred. Please reload the page and try again",canRetry:!1},t.PLAYER_ERR_NO_SRC={type:"PLAYER_ERR_NO_SRC",headline:"Unable to playback video",message:"Unfortunately we were not able to play the video you requested",canRetry:!1},t.PLAYER_ERR_TIMEOUT={type:"PLAYER_ERR_TIMEOUT",headline:"The video connection was lost",message:"Please check your internet connection and try again",canRetry:!0},t.VIDEO_CLOUD_ERR_VIDEO_NOT_FOUND={type:"VIDEO_CLOUD_ERR_VIDEO_NOT_FOUND",headline:"The video was not found",message:"This video does not exist. Please select another video.",canRetry:!0},t.VMS_ERROR={type:"VMS_ERROR",headline:"The video could not be played.",message:"This video could not be played. Please select another video.",canRetry:!0},t}(),it=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),rt=function(a){function e(t){return a.call(this,t,e.pluginName)||this}return it(e,a),e.prototype.getError=function(a){var e=at[a.error_code],t=e&&e.headline||"The video cannot be played",r=e&&e.message||"Please select another video from the recommendations list";return{code:a.error_code,headline:t,message:r,dismiss:!0}},e.pluginName="PLUGIN_FRIENDLY_ERRORS",e}(A),ot=function(){function n(){}return n.getHiddenProp=function(){var n=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<n.length;e++)if(n[e]+"Hidden"in document)return n[e]+"Hidden";return null},n.isHidden=function(){var e=n.getHiddenProp();return!!e&&document[e]},n.changeEventName=function(){return n.getHiddenProp().replace(/[H|h]idden/,"")+"visibilitychange"},n}(),st=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),lt=function(s){function a(e){var l=s.call(this,e)||this,n=l.getService(Bs.eventManager);if(l.tabContainer=l.findTabContainer(),null!==l.tabContainer)for(var i=l.tabContainer.getElementsByClassName("tab"),r=0,o;r<i.length;r++)o=i.item(r),ks.onClick(o,function(){n.trigger(l.container,"CHECK_VISIBILITY")});return l}return st(a,s),a.prototype.findTabContainer=function(){for(var t=this.container.view.wrapper,e=1;e<=a.TAB_MAX_LEVELS&&t&&t.className&&!t.className.match(a.TAB_CSS_CLASSNAME);)t=t.parentElement,e++;return null===t?null:t.className.match(a.TAB_CSS_CLASSNAME)&&t},a.TAB_CSS_CLASSNAME="tabbed",a.TAB_MAX_LEVELS=4,a}(u),ct=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),dt=function(a){function r(e){var i=a.call(this,e)||this;return i.isVisible=!0,i.tabVisibility=new lt(e),i}return ct(r,a),r.prototype.getVisibilityRate=function(t){return F.getVisibilityRate(t)},r.prototype.setEvents=function(){var t=this,e=this.getService(Bs.eventManager),n=function(){var n=t.getVisibilityRate(t.container.view.element);(t.container.log("visibility",n,r.visibilityThreshold),n<r.visibilityThreshold)?(t.isVisible&&(t.isVisible=t.getVisibilityRate(t.container.view.element)>r.visibilityThreshold,e.trigger(t.container,r.EVENT_SCROLL_HIDDEN)),0===n&&e.trigger(t.container,r.EVENT_SCROLL_FULLY_HIDDEN)):t.isVisible||(t.isVisible=t.getVisibilityRate(t.container.view.element)>r.visibilityThreshold,t.getService(Bs.context).hasBeenVisible=!0,e.trigger(t.container,r.EVENT_SCROLL_VISIBLE))};e.addCustomListener(this.container,"CHECK_VISIBILITY",function(){n()}),window.addEventListener("scroll",function(){t.container.bcPlayer()&&n()}),window.addEventListener(ot.changeEventName(),function(){ot.isHidden()?(t.isVisible&&(t.isVisible=!1,e.trigger(t.container,r.EVENT_PAGE_HIDDEN)),e.trigger(t.container,r.RAW_EVENT_PAGE_HIDDEN)):(!1===t.isVisible&&(t.isVisible=t.getVisibilityRate(t.container.view.element)>r.visibilityThreshold,e.trigger(t.container,r.EVENT_PAGE_VISIBLE)),e.trigger(t.container,r.RAW_EVENT_PAGE_VISIBLE))})},r.EVENT_SCROLL_HIDDEN="ON_SCROLL_HIDDEN",r.EVENT_SCROLL_FULLY_HIDDEN="ON_SCROLL_FULLY_HIDDEN",r.EVENT_SCROLL_VISIBLE="ON_SCROLL_VISIBLE",r.EVENT_PAGE_VISIBLE="ON_PAGE_HIDDEN",r.EVENT_PAGE_HIDDEN="ON_PAGE_VISIBLE",r.RAW_EVENT_PAGE_VISIBLE="ON_PAGE_HIDDEN_RAW",r.RAW_EVENT_PAGE_HIDDEN="ON_PAGE_VISIBLE_RAW",r.visibilityThreshold=50,r}(u),pt=function(){function t(){}return t.prototype.load=function(t){this.position=t.style.position,this.top=t.style.top,this.left=t.style.left,this.width=t.style.width,this.height=t.style.height,this.zindex=t.style["z-index"]},t.prototype.apply=function(t){t.style.position=this.position,t.style.top=this.position,t.style.left=this.position,t.style.width=this.position,t.style.height=this.position,t.style["z-index"]=this.position},t}(),mt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ut=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;if(n.visible=!1,n.closed=!1,n.originStyle=new pt,n.currentDuration=5,n.parentVisibilityThreshold=15,n.createFake(),n.createTarget()){var i=n.container.view.element.parentNode;n.originStyle.load(n.container.view.element),n.stickyContainer=n.getStickyContainer(i),n.countDownPlugin=n.container.getPluginInstance(An.pluginName),i.appendChild(n.stickyContainer),n.setEvents()}return n}return mt(e,a),e.prototype.getStickyContainer=function(n){var e=document.createElement("div");return e.className="sticky-parent",e.style.display="none",e.style.height=n.getBoundingClientRect().height+"px",e.style.width=n.getBoundingClientRect().width+"px",e},e.prototype.createFake=function(){this.fakeElement=document.createElement("div"),this.fakeElement.className="vms module vms-queued vms-player",this.fakeElement.innerHTML="<div class=\"videoWrapper\"></div><div class=\"module-header vms-header\">"+this.container.view.module.moduleHeader.innerHTML+"</div>",this.fakeElement.style.visibility="hidden"},e.prototype.checkVisibility=function(){this.visible&&this.container.bcPlayer()&&F.getVisibilityRate(this.stickyContainer)>this.parentVisibilityThreshold&&(this.container.view.element.classList.remove("vms-sticky"),this.visible=!1,this.removeStickyCss(),this.getService(Bs.eventManager).trigger(this.container,e.STICKY_HIDDEN_EVENT))},e.prototype.createTarget=function(){var t=this.container.view.element.getAttribute("vms-sticky-target");return this.target=document.getElementById(t),null!=this.target&&(this.stickyTarget=document.createElement("div"),this.stickyTarget.className="vms-sticky-close",this.stickyTarget.style.display="none",this.closeButton=document.createElement("button"),this.closeButton.className="vms-sticky-close-button",this.closeButton.innerHTML="Close &#xd7;",this.stickyTarget.appendChild(this.closeButton),this.stickyTarget.appendChild(this.fakeElement),this.target.appendChild(this.stickyTarget),!0)},e.prototype.onStickyHidden=function(){this.visible||this.closed||!(0>this.container.view.element.getBoundingClientRect().top)||(this.currentDuration=this.countDownPlugin.duration,this.stickyContainer.style.display="block",this.visible=!0,this.container.view.element.classList.add("vms-sticky"),this.refreshStickyCss(),this.getService(Bs.eventManager).trigger(this.container,e.STICKY_VISIBLE_EVENT))},e.prototype.setEvents=function(){var n=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,dt.EVENT_SCROLL_FULLY_HIDDEN,function(){return n.onStickyHidden()}),e.addCustomListener(this.container,"CHECK_VISIBILITY",function(){return n.checkVisibility()}),window.addEventListener("scroll",function(){return n.checkVisibility()}),window.addEventListener("resize",function(){return n.refreshStickyCss()}),this.closeButton.onclick=function(){return n.onClose()},e.addCustomListener(this.container,dt.EVENT_SCROLL_VISIBLE,function(){n.persistCountdownValue()})},e.prototype.persistCountdownValue=function(){this.countDownPlugin.completed||(this.countDownPlugin.initialDuration=this.currentDuration,this.countDownPlugin.events.manuallyPaused||this.countDownPlugin.reset())},e.prototype.onClose=function(){this.removeStickyCss(),this.container.view.element.classList.remove("vms-sticky"),this.closeButton.parentNode.removeChild(this.closeButton),this.closed=!0,this.getService(Bs.eventManager).trigger(this.container,dt.EVENT_SCROLL_HIDDEN),this.getService(Bs.analytics).omniture.track([R.STICKY_PLAYER_CLOSED])},e.prototype.removeStickyCss=function(){this.originStyle.apply(this.container.view.element),this.stickyTarget.style.display="none",this.container.view.element.setAttribute("width",""+this.originStyle.width),this.container.view.element.setAttribute("height",""+this.originStyle.height),this.container.bcPlayer().dimensions(this.originStyle.width,this.originStyle.height),this.stickyContainer.style.display="none",this.container.view.element.style["min-height"]="0",this.container.view.element.style["max-height"]="100%"},e.prototype.refreshStickyCss=function(){this.visible&&(this.stickyTarget.style.display="block",this.container.view.element.style.position="fixed",this.closeButton.style["margin-top"]="-"+2*this.closeButton.offsetHeight+"px",this.container.view.element.style.top=this.target.offsetTop-this.closeButton.offsetHeight+"px",this.container.view.element.style.left=this.target.offsetLeft+"px",this.container.view.element.style.width=this.target.offsetWidth+"px",this.container.view.element.style["min-height"]=this.target.offsetHeight+"px",this.container.view.element.style["max-height"]=this.target.offsetHeight+e.DESCRIPTION_MAX_HEIGHT+"px",this.container.view.element.style["z-index"]=1e4,this.container.bcPlayer().dimensions(this.target.offsetWidth,this.target.offsetHeight))},e.pluginName="PLUGIN_STICKY",e.DESCRIPTION_MAX_HEIGHT=100,e.STICKY_VISIBLE_EVENT="STICKY_VISIBLE",e.STICKY_HIDDEN_EVENT="STICKY_HIDDEN",e.STICKY_DESCRIPTION_HEIGHT=52,e}(A),gt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),yt=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return gt(e,n),e.prototype.withCapiVideo=function(a,e){var t=this,i;void 0===e&&(e=!0),(null==a?void 0:a.platformId)!==(null===(i=this.video)||void 0===i?void 0:i.platformId)&&(this.video=a,setTimeout(function(){t.refresh(e)},500))},e.prototype.attachTo=function(t){t.appendChild(this.element)},e}(N),_t=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Et=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.container=t,n.element.className=e.CSS_NAME,n.duration=document.createElement("div"),n.duration.className="vms-mobile-metadata-duration",n.elementsContainer=document.createElement("div"),n.spinnerContainer=document.createElement("div"),n.spinnerContainer.className="vms-spinner-container",n.title=document.createElement("div"),n.title.className="vms-mobile-metadata-title",n.title.setAttribute("id","title-"+new Date().getTime()),n.element.appendChild(n.spinnerContainer),n.element.appendChild(n.elementsContainer),n.elementsContainer.appendChild(n.duration),n.elementsContainer.appendChild(n.title),n.elementsContainer.className="vms-metadata-elements",n}return _t(e,a),e.prototype.getTitle=function(){var n=this.container.getService(Bs.context),e=this.container.view.element.getAttribute("vms-title")||this.video.title;return n.firstPlay?e:this.video.title},e.prototype.refresh=function(t){void 0===t&&(t=!0),this.video&&(this.title.innerText=this.getTitle(),this.setPremium(),0<this.video.duration?this.duration.innerText=""+M.formatDuration(this.video.duration/1e3):(this.duration.className="live-marker",this.duration.innerHTML="LIVE"))},e.prototype.setPremium=function(){var t=this.container.getService(Bs.environment);-1<Ds.PREMIUM_VIDEO_SITES.indexOf(t.getDomain())&&(this.video.accessType===l.ACCESS_TYPE_PREMIUM?(this.premium||(this.premium=document.createElement("div"),this.premium.className="vms-premium-tag",this.premium.innerText="PREMIUM",this.elementsContainer.prepend(this.premium)),ks.addClass(this.container.view.element,"vms-premium")):(ks.removeClass(this.container.view.element,"vms-premium"),this.premium&&(this.elementsContainer.removeChild(this.premium),this.premium=null)))},e.prototype.shave=function(){U("#"+this.title.getAttribute("id"),50,{character:"..."})},e.CSS_NAME="vms-mobile-metadata",e}(yt),vt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),At=function(a){function e(e,s,n,i){var r=a.call(this,e)||this;return r.view=s,r.descriptionView=n,r.liveMarker=i,r}return vt(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,qo.BC_READY,function(){a.view.attachTo(a.container.bcPlayer().el_),a.descriptionView.attachTo(a.container.view.wrapper),a.liveMarker.attachTo(a.container.bcPlayer().el_)}),e.addCustomListener(this.container,D.CAPI_FETCHED,function(e){a.view.withCapiVideo(e),a.descriptionView.withCapiVideo(e);var t=a.container.getService(Bs.environment);("json"===a.container.view.element.getAttribute(Te.EXT_RECOMMENDATIONS_TYPE)||t.isNewsHub())&&ks.addClass(a.container.view.element,"vms-vaafca-page")}),e.addListener(this.container,"ready",function(){a.descriptionView.shave(),a.view.shave()}),e.addCustomListener(this.container,ut.STICKY_VISIBLE_EVENT,function(){a.view.shave()}),window.addEventListener("orientationchange",function(){a.descriptionView.shave()}),e.addCustomListener(this.container,Se.PLAYLIST_ITEM_PLAYED,function(e){e&&e.capiVideo&&(a.view.withCapiVideo(e.capiVideo),a.view.title.innerText=e.capiVideo.title,a.view.setPremium(),a.view.duration.innerText=""+M.formatDuration(e.capiVideo.duration/1e3),a.descriptionView.withCapiVideo(e.capiVideo))}),e.addMultipleListener(this.container,["ads-ad-started","play"],function(){setTimeout(function(){a.container.bcPlayer().userActive(!1)},2e3)})},e}(u),Ct=function(){function t(){}return t.findCaption=function(a,e){var t=e.caption,n=a.getService(Bs.context),i=a.view.module.moduleContent.getElementsByClassName("description"),r=0<i.length?i[0]:null;return r&&r.textContent!==t&&n.firstPlay&&(t=r.textContent),a.view.element.getAttribute("vms-caption")&&n.firstPlay&&(t=a.view.element.getAttribute("vms-caption")),t},t}(),St=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ht=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.collapseAdded=!1,n.container=t,n.element.className=e.CSS_CLASS_NAME,n.description=document.createElement("div"),n.description.className="vms-mobile-meta-description",n.description.setAttribute("id","description-"+new Date().getTime()),n.element.append(n.description),n}return St(e,a),e.prototype.refresh=function(n){var e=this;void 0===n&&(n=!0),this.video&&(this.description.classList.remove("expanded"),this.collapseAdded=!1,this.description.innerHTML=Ct.findCaption(this.container,this.video),n&&document.addEventListener(this.getEventId(),function(){e.description.classList.toggle("expanded"),e.collapseAdded||(e.collapseAdded=!0,e.description.innerHTML+=" <button class=\"vms-mobile-metadata-less\" onclick=\"document.dispatchEvent(new Event('"+e.getEventId()+"'))\">less</button>",e.addEvents())}),this.shave())},e.prototype.addEvents=function(){var t=this;this.container.getService(Bs.eventManager).addListener(this.container,"loadstart",function(){t.collapseAdded=!1,t.description.classList.remove("expanded")})},e.prototype.getEventId=function(){return"vms-show-more-"+this.video.platformId},e.prototype.getButton=function(){return" ... <button class=\"vms-mobile-metadata-more\" onclick=\"document.dispatchEvent(new Event('"+this.getEventId()+"'))\">more</button>"},e.prototype.shave=function(){U("#"+this.description.getAttribute("id"),80,{link:{href:"javascript:document.dispatchEvent(new Event('"+this.getEventId()+"'))",textContent:"... more",className:"vms-mobile-metadata-more"}})},e.CSS_CLASS_NAME="vms-mobile-meta-description-container",e}(yt),Tt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nt=function(n){function e(){var e=n.call(this,document.createElement("div"))||this;return e.element.className="vms-live-marker-playback",e.element.innerHTML="&nbsp;",e}return Tt(e,n),e.prototype.attachTo=function(t){t.appendChild(this.element)},e}(N),It=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),bt=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.container=t,n.isApplicable(!0)&&(n.view=new Et(n.container),n.descriptionView=new ht(n.container),n.liveMarker=new Nt,n.events=new At(n.container,n.view,n.descriptionView,n.liveMarker),n.events.setEvents()),n}return It(e,a),e.pluginName="PLUGIN_MOBILE_METADATA",e}(ce),Pt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),wt=function(a){function e(){var t=a.call(this,document.createElement("div"))||this;return t.getElement().className=e.MAIN_CSS_CLASS,t.playButton=document.createElement("div"),t.playButton.className="vms-play-button-play",t.getElement().appendChild(t.playButton),ks.addClass(t.element,e.CONTAINER_CSS_CLASS),t}return Pt(e,a),e.MAIN_CSS_CLASS="vms-mobile-play",e.CONTAINER_CSS_CLASS="vms-mobile-play-container",e}(ee),Lt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ot=function(a){function e(e,o,n){var i=a.call(this,e)||this;return i.view=o,i.spinner=n,i.setEvents(),i}return Lt(e,a),e.prototype.setEvents=function(){var s=this,e=this.getService(Bs.eventManager),t=this.container.getService(Bs.context),n=this.container.getPluginInstance(An.pluginName),i=function(){o.isVaafca(s.container)&&t.firstPlay&&n.started&&(ks.addClass(s.view.element,"hidden-node"),ks.removeClass(s.spinner.element,"hidden-node"),s.spinner.spinner.start(n.duration))};e.addCustomListener(this.container,Xt.COUNTDOWN_STARTED,function(){i()}),e.addCustomListener(this.container,qo.BC_READY,function(){s.container.bcPlayer().el_.appendChild(s.view.element),s.container.bcPlayer().el_.appendChild(s.spinner.element),i()}),e.addCustomListener(this.container,ut.STICKY_VISIBLE_EVENT,function(){i()});var r=function(){ks.addClass(s.view.element,"hidden-node"),ks.addClass(s.spinner.element,"hidden-node"),setTimeout(function(){s.spinner.spinner.reset()},500)},o=this.container.getService(Bs.environment);o.isVaafca(this.container)&&e.addListener(this.container,"play",function(){r()}),o.isVaafca(this.container)&&ks.onClick(this.spinner.spinner.playButton,function(){r(),n&&n.view&&n.view.play&&n.view.play.element.click()}),e.addCustomListener(this.container,ut.STICKY_HIDDEN_EVENT,function(){ks.removeClass(s.view.element,"hidden-node"),ks.addClass(s.spinner.element,"hidden-node")}),e.addSingleEventListener(this.container,"play",function(){s.view.hide()}),ks.onClickOnly(this.view.element,function(){s.container.bcPlayer().play(),s.view.hide()})},e}(u),ft=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rt=function(n){function a(){return null!==n&&n.apply(this,arguments)||this}return ft(a,n),a.prototype.resize=function(t){this.getService(Bs.eventManager).trigger(this.container,a.EVENT_RESIZE,{size:t})},a.EVENT_RESIZE="EVENT_RESIZE_AUTO_CSS",a}(u),Mt=function(){function t(a,i,t){this.minWidth=a,this.maxWidth=i,this.cssClass=t}return t.prototype.isApplicable=function(t){return t>=this.minWidth&&t<this.maxWidth},t}(),Dt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),kt=function(a){function s(e){var t=a.call(this,e,s.pluginName)||this;return t.setConfig(),t.events=new Rt(e),t.shouldObserve().then(function(){return t.observe()}),t}return Dt(s,a),s.prototype.getPreviousSize=function(){return this.previousSize},s.prototype.shouldObserve=function(){var a=this;return new Promise(function(e,t){var n=a.getService(Bs.environment),i=a.getService(Bs.context);return i.isVertical()?t():n.browser.isMobile()||a.container.view.element.getAttribute("vms-sticky-target")||i.useMobileUi()?e():t()})},s.prototype.setConfig=function(){var t=[];t.push(new Mt(0,320,s.CSS_MINI)),t.push(new Mt(320,375,s.CSS_SMALL)),t.push(new Mt(375,414,s.CSS_MEDIUM)),t.push(new Mt(414,568,s.CSS_LARGE)),t.push(new Mt(568,2048,s.CSS_EXTRA_LARGE)),this.sizeConfig=t},s.prototype.onResized=function(s){for(var e in s){var t=s[e];if(t.contentRect)for(var n=t.contentRect.width,i=0,r=this.sizeConfig,o;i<r.length;i++)o=r[i],o.isApplicable(n)?this.previousSize!==o&&(this.previousSize=o,ks.addClass(this.container.view.element,o.cssClass),this.events.resize(o)):ks.removeClass(this.container.view.element,o.cssClass)}},s.prototype.fallback=function(){if(this.getService(Bs.environment).browser.isMobile()){var t=window.matchMedia("(max-width: 320px)"),e=window.matchMedia("(min-width: 320px) and (max-width: 375px)"),n=window.matchMedia("(min-width: 375px) and (max-width: 414px)"),a=window.matchMedia("(min-width: 414px) and (max-width: 568px)"),i=window.matchMedia("(min-width: 568px) and (max-width: 2048px)");t.matches&&ks.addClass(this.container.view.element,s.CSS_MINI),e.matches&&ks.addClass(this.container.view.element,s.CSS_SMALL),n.matches&&ks.addClass(this.container.view.element,s.CSS_MEDIUM),a.matches&&ks.addClass(this.container.view.element,s.CSS_LARGE),i.matches&&ks.addClass(this.container.view.element,s.CSS_EXTRA_LARGE)}},s.prototype.observe=function(){var n=this;try{this.resizeObserver=new re.ResizeObserver(function(e){n.onResized(e)}),this.resizeObserver.observe(this.container.view.element)}catch(t){this.fallback()}},s.pluginName="PLUGIN_AUTOMATIC_CSS_SIZE",s.CSS_MINI="mobileui-mini",s.CSS_SMALL="mobileui-small",s.CSS_MEDIUM="mobileui-medium",s.CSS_LARGE="mobileui-large",s.CSS_EXTRA_LARGE="mobileui-extra-large",s}(A),Vt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bt=function(n){function e(e){var a=n.call(this,e)||this;return a.countdown=e.getPluginInstance(An.pluginName),a.setEvents(),a}return Vt(e,n),e.prototype.setEvents=function(){var a=this;this.getService(Bs.eventManager).addCustomListener(this.container,Ut.START_COUNTDOWN,function(e){if(a.countdown){var t=e&&e.duration?e.duration:Ut.COUNTDOWN_DURATION,n=e&&e.callback?e.callback:null;a.countdown.initialDuration=t,a.countdown.duration=t,a.countdown.start(n)}})},e}(u),xt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ut=function(a){function s(e){var t=a.call(this,e,s.pluginName)||this;return t.started=!1,t.restarted=!1,t.cancelled=!1,t.isApplicable()&&(t.events=new Bt(e,t)),t}return xt(s,a),s.prototype.cancel=function(){this.cancelled=!0},s.prototype.start=function(t,e){var n=this,a=this.container.getService(Bs.eventManager);e||(e=s.COUNTDOWN_DURATION),t&&(this.callback=t);var i=function(){return n.restarted||n.cancelled?(n.restarted=!1,n.cancelled=!1,!1):void(e--,n.started=!0,0===e&&(a.trigger(n.container,s.COUNTDOWN_FINISHED),n.started=!1,n.restarted=!1,n.callback&&(n.callback(),n.callback=null)),0<e&&setTimeout(i,1e3))};a.trigger(this.container,s.COUNTDOWN_STARTED,e),setTimeout(i,1e3)},s.pluginName="MOBILE_COUNT_DOWN_PLUGIN",s.COUNTDOWN_DURATION=10,s.COUNTDOWN_FINISHED="EVENT_MOBILE_CD_FINISHED",s.COUNTDOWN_STARTED="EVENT_MOBILE_CD_STARTED",s.RESTART_COUNTDOWN="EVENT_MOBILE_CD_RESTARTED",s.COUNTDOWN_CANCELLED="EVENT_MOBILE_CD_CANCELLED",s.START_COUNTDOWN="EVENT_MOBILE_CD_START",s}(ce),Ht=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gt=function(a){function s(e){var t=a.call(this,document.createElement("div"))||this;t.getElement().className=s.MAIN_CSS_CLASS,t.container=e,t.spinnerContainer=document.createElement("div"),t.spinnerContainer.className="es-spinner-container";var n="http://www.w3.org/2000/svg";return t.spinner=document.createElementNS(n,"svg"),t.spinner.setAttribute("class","es-spinner"),t.baseCircleContainer=document.createElementNS(n,"g"),t.baseCircleContainer.setAttribute("class","es-base-circle-container"),t.baseCircle=document.createElementNS(n,"circle"),t.baseCircle.setAttribute("class","es-base-spinner-circle"),t.baseCircleContainer.appendChild(t.baseCircle),t.circleContainer=document.createElementNS(n,"g"),t.circleContainer.setAttribute("class","es-circle-container"),t.circle=document.createElementNS(n,"circle"),t.circle.setAttribute("class","es-spinner-circle"),t.circleContainer.appendChild(t.circle),t.spinner.appendChild(t.baseCircleContainer),t.spinner.appendChild(t.circleContainer),t.spinnerContainer.appendChild(t.spinner),t.playButton=document.createElement("div"),t.playButton.className="es-play-button",t.spinnerContainer.appendChild(t.playButton),t.getElement().appendChild(t.spinnerContainer),t.setEvents(),t}return Ht(s,a),s.prototype.setEvents=function(){var a=this,e=this.container.getService(Bs.eventManager);e.addCustomListener(this.container,Rt.EVENT_RESIZE,function(n){a.display(n);var t=a.container.getService(Bs.environment);(t.browser.isLandscapeMode()||t.browser.isPortrait())&&(e.trigger(a.container,Ut.RESTART_COUNTDOWN),a.restart(Ut.COUNTDOWN_DURATION))}),e.addListener(this.container,"ended",function(){a.restart(Ut.COUNTDOWN_DURATION),setTimeout(function(){var t=a.container.getService(Bs.environment),n=a.container.getService(Bs.context);if(t.browser.isMobile()||n.useMobileUi()){var i=a.getNextPlayingItem();i?e.trigger(a.container,s.START_SPINNER_EVENT,function(){a.container.serviceProvider.get(Bs.eventManager).trigger(a.container,Se.ITEM_PLAYED_THROUGH_AUTOPLAY,i.id)}):e.trigger(a.container,Ee.PLAYLIST_ENDED)}},500)}),e.addCustomListener(this.container,s.START_SPINNER_EVENT,function(n){e.trigger(a.container,Ut.START_COUNTDOWN,{callback:n})}),e.addCustomListener(this.container,Xt.COUNTDOWN_STARTED,function(){a.start(Ut.COUNTDOWN_DURATION)}),e.addCustomListener(this.container,Ee.PLAYLIST_ENDED,function(){a.reset()})},s.prototype.getNextPlayingItem=function(){var s=this.container.getService(Bs.context),t=this.container.getPluginInstance(Ee.pluginName),n=null===(r=null==t?void 0:t.events)||void 0===r?void 0:r.playlistItems,i=null,r;if(n&&0<n.length&&s.mobilePlaylistItems&&0<s.mobilePlaylistItems.length)for(var e=function(t){if(i=n.find(function(e){return!e.played&&e.capiVideo&&e.capiVideo.id===s.mobilePlaylistItems[t]}))return"break"},o=0;o<s.mobilePlaylistItems.length&&!("break"===e(o));o++);return i},s.prototype.display=function(a){a&&a.size&&(a=a.size);var e=[kt.CSS_MINI,kt.CSS_SMALL,kt.CSS_MEDIUM],t=[kt.CSS_LARGE,kt.CSS_EXTRA_LARGE];a&&a.cssClass&&-1!==e.indexOf(a.cssClass)?this.smallSpinner():a&&a.cssClass&&-1!==t.indexOf(a.cssClass)&&this.largeSpinner()},s.prototype.smallSpinner=function(){this.circle.setAttribute("r",""+s.SPINNER_SMALL_RADIUS),this.circle.setAttribute("cy",""+s.SPINNER_SMALL_DIMENSION),this.circle.setAttribute("cx",""+s.SPINNER_SMALL_DIMENSION),this.circle.setAttribute("stroke-width","2"),this.baseCircle.setAttribute("r",""+s.SPINNER_SMALL_RADIUS),this.baseCircle.setAttribute("cy",""+s.SPINNER_SMALL_DIMENSION),this.baseCircle.setAttribute("cx",""+s.SPINNER_SMALL_DIMENSION),this.baseCircle.setAttribute("stroke-width","2"),this.initialOffset=2*s.SPINNER_SMALL_RADIUS*H,this.reset()},s.prototype.largeSpinner=function(){this.circle.setAttribute("r",""+s.SPINNER_LARGE_RADIUS),this.circle.setAttribute("cy",""+s.SPINNER_LARGE_DIMENSION),this.circle.setAttribute("cx",""+s.SPINNER_LARGE_DIMENSION),this.circle.setAttribute("stroke-width","2"),this.baseCircle.setAttribute("r",""+s.SPINNER_LARGE_RADIUS),this.baseCircle.setAttribute("cy",""+s.SPINNER_LARGE_DIMENSION),this.baseCircle.setAttribute("cx",""+s.SPINNER_LARGE_DIMENSION),this.baseCircle.setAttribute("stroke-width","2"),this.initialOffset=2*s.SPINNER_LARGE_RADIUS*H,this.reset()},s.prototype.start=function(n){var e=this;this.circle.style.transition="all "+(n-.5)+"s linear",this.circle.style.strokeDashoffset=this.initialOffset,setTimeout(function(){e.circle.style.strokeDashoffset=0},500)},s.prototype.restart=function(){this.circle.style.transition=null,this.circle.style.transition="transition: none",this.circle.style.strokeDashoffset=this.initialOffset,this.circle.style.strokeDasharray=""+this.initialOffset},s.prototype.reset=function(){this.circle.style.strokeDashoffset=this.initialOffset,this.circle.style.strokeDasharray=""+this.initialOffset},s.MAIN_CSS_CLASS="es-mobile-spinner-container",s.SPINNER_SMALL_RADIUS=23.97,s.SPINNER_SMALL_DIMENSION=26.5,s.SPINNER_LARGE_RADIUS=31.46,s.SPINNER_LARGE_DIMENSION=34.78,s.START_SPINNER_EVENT="start-spinner-event",s}(N),Yt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wt=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.container=t,n.getElement().className=e.MAIN_CSS_CLASS,n.container.getService(Bs.environment).isVaafca(n.container)&&(n.spinner=new Gt(n.container),n.getElement().appendChild(n.spinner.element)),ks.addClass(n.element,e.CONTAINER_CSS_CLASS),n}return Yt(e,a),e.MAIN_CSS_CLASS="vms-mobile-spinner",e.CONTAINER_CSS_CLASS="vms-mobile-spinner-container hidden-node",e}(ee),Ft=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kt=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable(!0)&&(n.spinner=new Wt(n.container),n.view=new wt,n.events=new Ot(t,n.view,n.spinner)),n}return Ft(e,a),e.prototype.isApplicable=function(e){var t=a.prototype.isApplicable.call(this,e),n=this.getService(Bs.environment),i=this.getService(Bs.context);return!!i.isVertical()||(i.useMobileUi()||!(n.isSky()&&!n.isVaafca(this.container)&&i.canAutoplay()))&&t},e.pluginName="PLUGIN_MOBILE_PLAY_BUTTON",e}(ce),jt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xt=function(a){function e(e){var o=a.call(this,e.container)||this;o.manuallyPaused=!1,o.wasAutoplayed=!0,o.firstPlay=!0,o.event39Tracked=!1,o.countdown=e,o.view=o.countdown.view;var n=o.getService(Bs.eventManager);e.mode===An.MODE_REGULAR&&(o.view.getElement().onmouseover=function(){o.showPause()},o.view.getElement().onmouseleave=function(){o.restart()}),o.getService(Bs.context).canAutoplay()&&ks.onClick(o.view.element,function(){o.manuallyPaused=!0,o.pause()}),o.bindClick();var i=o.getService(Bs.context);return n.addListener(o.countdown.container,"ready",function(){var a=o.container.bcPlayer(),e=function(){o.wasAutoplayed=!1,o.manuallyPaused=!!a.paused()};a.controlBar.playToggle&&ks.onClick(a.controlBar.playToggle.el_,e),ks.onClick(a.tech_.el_,e),ks.onFutureClick(o.countdown.view.element,e),a.adControlBar&&a.adControlBar.playToggle&&ks.onClick(a.adControlBar.playToggle.el_,e),n.addListener(o.container,"play",function(){o.manuallyPaused=!1}),o.countdown&&o.countdown.display(),n.trigger(o.container,"CHECK_VISIBILITY")}),n.addListener(o.countdown.container,"play",function(){o.countdown=null,o.view.hide()}),n.addCustomListener(o.countdown.container,dt.EVENT_SCROLL_HIDDEN,function(){o.pause();var t=o.getService(Bs.context);o.countdown&&o.countdown.started&&!o.event39Tracked&&t.hasBeenVisible&&(o.event39Tracked=!0,o.getService(Bs.analytics).omniture.track([R.ONSCROLL_HIDDEN]))}),n.addCustomListener(o.countdown.container,dt.EVENT_SCROLL_VISIBLE,function(){var t=o.container.getService(Bs.pageManager);t.currentlyPlaying&&t.currentlyPlaying!==o.container?o.pause():i.errored||o.manuallyPaused||(o.paused=!1,ks.removeClass(o.container.view.wrapper,"vms-autoplay-paused"),o.countdown&&o.countdown.reset())}),n.addCustomListener(o.countdown.container,dt.EVENT_PAGE_HIDDEN,function(){o.pause()}),n.addCustomListener(o.countdown.container,dt.EVENT_PAGE_VISIBLE,function(){i.errored||o.manuallyPaused||!i.visibility.isVisible||(o.paused=!1,ks.removeClass(o.container.view.wrapper,"vms-autoplay-paused"),o.countdown&&o.countdown.reset())}),n.addCustomListener(o.countdown.container,Te.ON_UP_NEXT,function(t){o.view.show(),o.firstPlay=!1,setTimeout(function(){o.getService(Bs.environment).browser.isMobile()||o.countdown&&o.countdown.start(t)},100)}),n.addCustomListener(o.container,ut.STICKY_VISIBLE_EVENT,function(){var t;(!(null!==(t=o.container.bcPlayer())&&void 0!==t)||!t.hasStarted())&&i.canAutoplay()&&o.moveCountdown()}),n.addListener(o.container,"ready",function(){var t;(!(null!==(t=o.container.bcPlayer())&&void 0!==t)||!t.hasStarted())&&i.canAutoplay()&&i.isSticky()&&o.moveCountdown()}),n.addCustomListener(o.container,ut.STICKY_HIDDEN_EVENT,function(){var n;if((!(null!==(n=o.container.bcPlayer())&&void 0!==n)||!n.hasStarted())&&i.canAutoplay()){var e=o.container.getPluginInstance(bt.pluginName).view.spinnerContainer.children[0];o.countdown.getElementContainer().appendChild(e),ks.addClass(o.countdown.view.element,"vms-mobile-autoplay")}}),o}return jt(e,a),e.prototype.moveCountdown=function(){var a=this.container.getPluginInstance(Kt.pluginName),t;null===(t=null==a?void 0:a.view)||void 0===t||t.hide();var e=this.container.getPluginInstance(bt.pluginName);e.view.spinnerContainer.append(this.view.getElement()),ks.addClass(e.view.element,"vms-mobile-autoplay")},e.prototype.restart=function(){!this.paused&&this.wasAutoplayed&&(this.view.pause.hide(),this.view.counter.show())},e.prototype.pause=function(){var t=this.container.getService(Bs.pageManager);t.currentlyPlaying===this.container&&(t.currentlyPlaying=null,this.manuallyPaused&&this.countdown&&this.getService(Bs.analytics).omniture.track([R.COUNTDOWN_PAUSED])),ks.addClass(this.container.view.wrapper,"vms-autoplay-paused"),this.paused=!0,this.countdown&&clearInterval(this.countdown.interval),this.view.play.show(),this.view.pause.hide(),this.view.spinner.hide(),this.view.counter.hide()},e.prototype.bindClick=function(){var t=this;ks.onClick(this.view.play.element,function(){(t.pause(),t.firstPlay)?t.container.bcPlayer().play():t.container.getPluginInstance(Ie.pluginName).events.next()}),ks.onClick(this.view.spinner.element,function(){(t.manuallyPaused=!0,t.getService(Bs.context).clickToPlay=!0,t.pause(),t.firstPlay)||t.container.getPluginInstance(Ie.pluginName).events.next()})},e.prototype.showPause=function(){!this.paused&&this.wasAutoplayed&&(this.view.pause.show(),this.view.counter.hide())},e.EVENT_DECREASED="countdown-decreased",e.COUNTDOWN_STARTED="countdown-started",e}(u),zt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qt=function(n){function e(){var e=n.call(this,document.createElement("span"))||this;return e.getElement().className="vms-autoplay-pause",e.hide(),e}return zt(e,n),e}(N),$t=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qt=function(a){function e(e){var i=a.call(this,document.createElement("span"))||this;return i.getElement().className="vms-autoplay-counter",i.getElement().innerHTML=""+e,i}return $t(e,a),e}(N),Zt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jt=function(n){function e(){var e=n.call(this,document.createElement("span"))||this;return document.createElement("span"),e.getElement().className="vms-autoplay-play",e.hide(),e}return Zt(e,n),e}(N),en=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),tn=function(a){function s(e){var t=this,n="http://www.w3.org/2000/svg";(t=a.call(this,document.createElementNS(n,"svg"))||this).initialOffset=""+2*H*s.RADIUS,t.element.setAttribute("class","vms-spinner-svg"),t.element.setAttribute("width","100"),t.element.setAttribute("height","100"),t.circleContainer=document.createElementNS(n,"g"),t.circle=document.createElementNS(n,"circle"),t.circle.setAttribute("class","circle_animation"),t.circle.style.strokeDashoffset=t.initialOffset,t.applyRegularStyle(),t.circle.setAttribute("stroke","#19acf0"),t.circle.setAttribute("fill","none"),t.circle.setAttribute("display","block"),t.circleContainer.appendChild(t.circle),t.element.appendChild(t.circleContainer),t.container=e,e.getService(Bs.environment).browser.isMobile()&&t.applyMobile();var i=e.getService(Bs.eventManager);return i.addCustomListener(e,s.EVENT_COUNTDOWN_REGULAR_STYLE,function(){t.applyRegularStyle()}),i.addCustomListener(t.container,ut.STICKY_VISIBLE_EVENT,function(){t.applyStickyStyle()}),i.addCustomListener(t.container,ut.STICKY_HIDDEN_EVENT,function(){t.applyRegularStyle()}),t}return en(s,a),s.prototype.applyRegularStyle=function(){this.circle.setAttribute("r",""+s.RADIUS),this.circle.setAttribute("cy","21"),this.circle.setAttribute("cx","21"),this.circle.setAttribute("stroke-width","2.8")},s.prototype.applyStickyStyle=function(){this.element.setAttribute("class","vms-spinner-svg vms-spinner-svg-sticky"),this.circle.setAttribute("r",""+s.STICKY_RADIUS),this.circle.setAttribute("cy","17"),this.circle.setAttribute("cx","17"),this.circle.setAttribute("stroke-width","2.8")},s.prototype.applyMobile=function(){var t=this.container.getService(Bs.environment),e=t.getDomain();-1!==Ds.AB_TEST_DISABLED_SITES.indexOf(e)&&t.browser.isMobile()&&(this.element.setAttribute("class","vms-spinner-svg vms-spinner-svg-mobile"),this.circle.setAttribute("r",""+s.MOBILE_RADIUS),this.circle.setAttribute("cy","17"),this.circle.setAttribute("cx","17"),this.circle.setAttribute("stroke-width","2"))},s.prototype.reset=function(){this.circle.style.strokeDasharray=this.initialOffset,this.circle.style.strokeDashoffset=this.initialOffset},s.prototype.start=function(){this.circle.style.strokeDashoffset="0"},s.RADIUS=19.8,s.MOBILE_RADIUS=16.2,s.STICKY_RADIUS=16,s.EVENT_COUNTDOWN_REGULAR_STYLE="EVENT_COUNTDOWN_REGULAR",s}(N),nn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),an=function(a){function e(e,o){var n=a.call(this,document.createElement("div"))||this;n.mainClass="vms-spinner",n.element.className=n.mainClass;var i=document.createElement("span");return i.className="vms-autoplay-bg",n.pause=new Qt,n.counter=new qt(e),n.play=new Jt,n.spinner=new tn(o),n.element.appendChild(i),n.element.appendChild(n.pause.getElement()),n.element.appendChild(n.counter.getElement()),n.element.appendChild(n.play.getElement()),n.element.appendChild(n.spinner.getElement()),n}return nn(e,a),e.prototype.removefromDom=function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)},e}(N),rn=function(){function t(){}return t.VIEW="rp-default-state",t.METADATA_CONTAINER="rp-default-state-metadata",t.METADATA_DOMAIN="rp-default-state-domain",t.TITLE_CONTAINER="rp-default-state-title",t.DESCRIPTION_CONTAINER="rp-default-state-description",t.PLAYER_STATE="rp-default-state-display",t.DURATION_CONTAINER="rp-default-state-duration",t}(),on=t(1),sn=t(4),ln=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),cn=function(a){function r(e){var i=a.call(this,document.createElement("div"))||this;return i.container=e,i.createElements(),i}return ln(r,a),r.prototype.createElements=function(){var n=document.createElement("table"),e=document.createElement("tr");this.spinnerColumn=document.createElement("td"),this.metadataColumn=document.createElement("td"),n.appendChild(e),e.appendChild(this.spinnerColumn),e.appendChild(this.metadataColumn),this.metadataContainer=document.createElement("div"),this.domain=document.createElement("span"),this.duration=document.createElement("span"),this.metadataContainer.appendChild(this.domain),this.metadataContainer.appendChild(this.duration),this.titleContainer=document.createElement("div"),this.title=document.createElement("h4"),this.titleContainer.appendChild(this.title),this.metadataColumn.appendChild(this.metadataContainer),this.metadataColumn.appendChild(this.titleContainer),this.element.appendChild(n),this.descriptionContainer=document.createElement("div"),this.description=document.createElement("div"),this.descriptionContainer.appendChild(this.description),this.setClassNames()},r.prototype.setClassNames=function(){this.element.className=rn.VIEW,this.metadataContainer.className=rn.METADATA_CONTAINER,this.domain.className=rn.METADATA_DOMAIN,this.titleContainer.className=rn.TITLE_CONTAINER,this.duration.className=rn.DURATION_CONTAINER,this.descriptionContainer.className=rn.DESCRIPTION_CONTAINER},r.prototype.attach=function(a){a.appendChild(this.element);var e=this.container.getService(Bs.environment),t=this.container.getService(Bs.context);e.isHubPage||e.isNewsHub()||t.forceHubStyle()||(this.container.view.module.moduleHeader.innerHTML="",this.container.view.module.moduleHeader.appendChild(this.descriptionContainer),this.container.view.module.moduleContent.innerHTML="")},r.prototype.getDomain=function(t){var e=t.source,n=Ms.getDomain();return window.location!==window.parent.location&&document.referrer&&(n=Ms.getDomain(document.referrer)),e=-1<r.displayedSources.indexOf(e)?I[e]||e:n&&-1!==n.indexOf(Ds.THE_ADVERTISER)?I.TheAdvertiser:n},r.prototype.refresh=function(a){var e=this.container.view.element.hasAttribute("vms-title")&&this.container.view.element.getAttribute("vms-title"),t=this.container.getService(Bs.context);this.title.innerHTML=t.firstPlay&&e||a.title,this.appendDurationMarker(this.duration,a.duration),this.domain.innerHTML=this.getDomain(a);var n=this.container.getService(Bs.environment);this.description.innerHTML=Ct.findCaption(this.container,a);var i=this.container.getService(Bs.context);if(!t.firstPlay||i.useMobileUi())if(n.isHubPage||n.isNewsHub()||t.forceHubStyle()||i.useMobileUi()){on.extend(sn);var r="<h1 "+(n.isNewsHub()||t.forceHubStyle()?"":"class=\"heading\"")+">"+a.title;n.isNewsHub()||t.forceHubStyle()||(r+="<span class=\"time\">"+M.formatDuration(a.duration/1e3)+"</span>"),r+="</h1>",this.container.view.module.moduleHeader.innerHTML=r,n.isSky()?this.container.view.module.moduleContent.innerHTML="\n                      <div class=\"byline g_font-base-s\">\n                      <div class=\"date-live\">"+on(a.date.live).format("DD MMMM YYYY - hh:mmA")+"</div>\n                          <div class=\"byline_logo logo-skynews\"></div>\n                      </div>\n                      <div class=\"poster\"><img src=\""+a.poster+"\"></div>\n                      <div class=\"video-body\"><p>"+a.body["skynews.com.au"].web.replace("\n\n","<br /><br />")+"</p></div>":(this.container.view.module.moduleContent.innerHTML="<div class=\"poster\"><img src=\""+a.poster+"\" alt=\"\"></div>\n                          <div tabindex=\"-1\" class=\"description\"><p>"+a.caption+"</p></div>",this.container.view.module.moduleFooter.innerHTML="<ul class=\"info\">\n            <li class=\"date\">"+on(a.date.live).format("DD MMMM YYYY")+"</li>\n            <li class=\"age\">"+on().from(a.date.live)+"</li>\n            <li class=\"primaryCategory\">"+a.sectionPath+"</li>\n        </ul>")}else this.container.view.module.moduleHeader.innerHTML="",this.container.view.module.moduleHeader.appendChild(this.descriptionContainer),this.container.view.module.moduleContent.innerHTML=""},r.displayedSources=["AAP","AP","BlinkTV","Carsales","Carsguide","FOXSPORTS","FoxSportsPulse","Getty","OLD_FOXSPORTS","Quest","REUTERS","Rightster_barcroft_media","Rightster_celebrity_wire","Rightster_future_tv","Rightster_hollyscoop","Rightster_moda_mob","Rightster_newsy","Rightster_ruptly_tv","Rightster_splash_news","Rightster_the_savory","Rightster_unscriptd","Rightster_video_fashion","Rightster_viral_spiral","Rightster_wochit","Rightster_wochit_uk","Splash","Storyful","TEN","Wibbitz","Wochit","WSJ"],r}(G),dn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pn=function(a){function e(e,r){var n=a.call(this,e)||this;return n.metadata=r,n.setEvents(),n}return dn(e,a),e.prototype.setEvents=function(){var a=this;ks.addClass(this.container.view.wrapper,rn.PLAYER_STATE);var e=this.getService(Bs.eventManager),s=this.container.getService(Bs.environment),d=this.container.getService(Bs.context);(s.browser.isMobile()||d.useMobileUi())&&this.metadata.view.hide(),e.addSingleCustomListener(this.container,qo.BC_READY,function(){s.browser.isMobile()||a.metadata.view.attach(a.container.view.wrapper.children[0])}),e.addSingleEventListener(this.container,"play",function(){ks.removeClass(a.container.view.wrapper,rn.PLAYER_STATE)}),e.addCustomListener(this.container,D.CAPI_FETCHED,function(e){a.metadata.view.refresh(e)}),e.addCustomListener(this.container,ut.STICKY_HIDDEN_EVENT,function(){M.truncateDescription(a.metadata.view.description,En.DESKTOP_DESCRIPTION_HEIGHT)}),e.addCustomListener(this.container,ut.STICKY_VISIBLE_EVENT,function(){M.truncateDescription(a.metadata.view.description,ut.STICKY_DESCRIPTION_HEIGHT)});var t=function(){var e=a.container.getService(Bs.utag),t=s.getPageType(e,a.container);if(t&&t!==c.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE){var n=a.container.getService(Bs.context),i=a.container.getService(Bs.context);a.container.getService(Bs.environment).browser.isMobile()||i.useMobileUi()?M.truncateDescription(a.metadata.view.description,En.MOBILE_DESCRIPTION_HEIGHT):n.isSticky()?M.truncateDescription(a.metadata.view.description,ut.STICKY_DESCRIPTION_HEIGHT):M.truncateDescription(a.metadata.view.description,En.DESKTOP_DESCRIPTION_HEIGHT)}};e.addCustomListener(this.container,qo.BC_READY,function(){t()}),e.addListener(this.container,"ready",function(){!function(){var e=a.container.getService(Bs.environment),t=e.getDomain();if((-1===Ds.AB_TEST_DISABLED_SITES.indexOf(t)||e.browser.isMobile()||d.useMobileUi())&&a.metadata.view.metadataParentContainer){var n=a.container.view.wrapper.getBoundingClientRect(),i=a.metadata.view.metadataParentContainer.getBoundingClientRect(),r=a.metadata.view.spinnerContainer.getBoundingClientRect(),o=Ps(r.height/2),s=Ps(n.width),l=Ps(n.height/2+o);l=Ps(l-i.height),a.metadata.view.spinnerContainer.style.top="-"+l+"px",a.metadata.view.spinnerContainer.style.width=s+"px"}}()}),e.addListener(this.container,"play",function(){t()})},e}(u),mn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),un=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return mn(e,n),e.prototype.createElements=function(){this.metadataParentContainer=document.createElement("table");var n=document.createElement("tr");this.spinnerColumn=document.createElement("td"),this.metadataColumn=document.createElement("td"),this.metadataParentContainer.appendChild(n),n.appendChild(this.metadataColumn),this.metadataContainer=document.createElement("div"),this.domain=document.createElement("span"),this.duration=document.createElement("span"),this.metadataContainer.appendChild(this.domain),this.metadataContainer.appendChild(this.duration),this.titleContainer=document.createElement("div"),this.title=document.createElement("h4"),this.titleContainer.appendChild(this.title),this.metadataColumn.appendChild(this.metadataContainer),this.metadataColumn.appendChild(this.titleContainer),this.spinnerContainer=document.createElement("table");var e=document.createElement("tr");e.appendChild(this.spinnerColumn),this.spinnerContainer.appendChild(e),ks.addClass(this.spinnerContainer,"countdown-ab-alternate"),this.element.appendChild(this.spinnerContainer),this.element.appendChild(this.metadataParentContainer),this.descriptionContainer=document.createElement("div"),this.description=document.createElement("div"),this.descriptionContainer.appendChild(this.description),this.setClassNames()},e}(cn),gn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),yn=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return gn(e,n),e}(cn),_n=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),En=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this,i=n.getService(Bs.context);if(i.isVertical())return n.view=new yn(t),n;var r=n.getService(Bs.environment),o=r.getDomain();return n.view=-1===Ds.AB_TEST_DISABLED_SITES.indexOf(o)&&r.browser.isMobile()||i.useMobileUi()?new un(t):new cn(t),n.events=new pn(t,n),n}return _n(e,a),e.pluginName="PLUGIN_METADATA",e.DESKTOP_DESCRIPTION_HEIGHT=28,e.MOBILE_DESCRIPTION_HEIGHT=52,e}(A),vn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),An=function(a){function g(e,t,n){var i=a.call(this,e,g.pluginName)||this;return i.initialDuration=5,i.duration=5,i.completed=!1,i.mode="MODE_REGULAR",i.started=!1,i.initialDuration=i.duration=t||5,i.id=""+Math.random(),i.view=new an(i.duration,e),i.mode=n||g.MODE_REGULAR,i.events=new Xt(i),i}return vn(g,a),g.prototype.isMobileAllowed=function(){var a=this.getService(Bs.environment),e=this.container.getService(Bs.context),t=a.browser.isMobile()||e.useMobileUi(),n=a.isSky();return t&&n&&!a.isVaafca(this.container)},g.prototype.getElementContainer=function(){var a=this.getService(Bs.context);if(a.useMobileUi()||this.isMobileAllowed()||a.isSticky()&&a.canAutoplay()&&!this.container.bcPlayer().hasStarted()){var e=this.container.getPluginInstance(bt.pluginName);return ks.addClass(e.view.element,"vms-mobile-autoplay"),e.view.spinnerContainer}var t=this.container.getPluginInstance(En.pluginName);return this.element||t.view.spinnerColumn},g.prototype.display=function(){var n=this.getService(Bs.context),e=this.container.getPluginInstance(Ie.pluginName);!n.errored&&(n.firstPlay||0<e.view.recommendations.items.length)&&(this.getElementContainer().appendChild(this.view.getElement()),this.start())},g.prototype.decrease=function(){var n=F.getVisibilityRate(this.container.view.element),e=this.getService(Bs.eventManager);e.trigger(this.container,ze.EVENT_CHECK_LOGIN),0<this.duration&&!ot.isHidden()&&n>=dt.visibilityThreshold&&(this.duration--,e.trigger(this.container,Xt.EVENT_DECREASED,this.duration)),0===this.duration&&(clearInterval(this.interval),this.duration=5,this.view.spinner.reset(),this.view.hide(),this.completed=!0,this.callback?this.callback():this.container.bcPlayer()&&this.container.bcPlayer().play()),this.view.counter.html(""+this.duration)},g.prototype.reset=function(){this.events.paused=!1,this.view.pause.hide(),this.view.play.hide(),this.duration=this.initialDuration,this.view.counter.html(""+this.duration),this.view.spinner.show(),this.view.spinner.reset(),this.display()},g.prototype.forceStop=function(){clearInterval(this.interval)},g.prototype.start=function(t,e){var a=this;clearInterval(this.interval),this.interval=null,t&&(this.callback=t);var i=this.getService(Bs.context),r=this.getService(Bs.environment),o=!1,s=r.browser.isMobile()||r.browser.isIOS();s||r.isHubPage?o=i.firstPlay:(o=!je.get(this.container).autoplayEnabled||!1===i.autoPlay,"boolean"==typeof e&&(o=!e)),(i.canAutoPlayPlaylist()&&i.auth.isSubscriberOrRegisteredUser()||s&&!i.firstPlay&&-1===Ms.getDomain().indexOf(Ds.TASTE))&&(o=!1);var l=this.container.getService(Bs.context);if(r.isSky()||l.useMobileUi()){var d=this.container.getService(Bs.utag),p=r.getPageType(d,this.container);(p&&p===c.ARTICLE_PAGE_TYPE||p===c.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE)&&(o=!i.canAutoplay())}(!i.firstPlay&&-1<this.container.view.cssClasses.indexOf("vms-continuousplay-off")&&(o=!0),i.isVertical()&&(o=!0),o)?(ks.addClass(this.container.view.element,"vms-autoplay-disabled"),ks.addClass(this.container.view.wrapper,"vms-autoplay-paused"),this.view.play.show(),this.view.spinner.hide(),this.view.counter.hide(),this.events.wasAutoplayed=!1,this.events.bindClick()):(this.started=!0,this.getService(Bs.eventManager).trigger(this.container,Xt.COUNTDOWN_STARTED),ks.removeClass(this.container.view.element,"vms-autoplay-disabled"),ks.removeClass(this.container.view.wrapper,"vms-autoplay-paused"),this.mode===g.MODE_REGULAR?(this.view.play.hide(),this.view.spinner.show(),this.view.spinner.reset(),this.view.pause.hide(),this.view.counter.show()):(ks.addClass(this.container.view.element,"vms-autoplay-enhanced"),this.view.spinner.show(),this.view.spinner.reset(),this.view.play.show()),setTimeout(function(){s&&!a.isMobileAllowed()||a.view.spinner.start()},1),this.interval=setInterval(function(){a.decrease()},1e3))},g.pluginName="PLUGIN_AUTOPLAY_COUNTDOWN",g.MODE_REGULAR="MODE_REGULAR",g.MODE_ENHANCED="MODE_ENHANCED",g}(A),Cn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sn=function(a){function s(e,t,n){var i=a.call(this,e)||this;return i.lastExtractionPoint=0,i.adsEventsSet=!1,i.adsPosition=0,i.seeking=!1,i.videoTimerOn=!1,i.adTimerOn=!1,i.sendMetadataEvent=function(){i.videoTimerOn||i.seeking||(i.videoTimerOn=!0,i.nielsen.sendEvent(s.LOAD_METADATA_EVENT,i.config.getMetadata()))},i.endEvent=function(){i.videoTimerOn=!1,i.adTimerOn=!1,i.nielsen.sendEvent(s.END_EVENT,i.playHeadPosition())},i.stopEvent=function(){i.seeking||(i.nielsen.sendEvent(s.STOP_EVENT,i.adTimerOn?i.adsPosition:i.playHeadPosition()),i.videoTimerOn=!1,i.adTimerOn=!1)},i.sendAdMetadata=function(){i.adTimerOn=!0,i.nielsen.sendEvent(s.LOAD_METADATA_EVENT,i.config.getMetadata("ads"))},i.adsPlayHeadPosition=function(){var n=i.container.bcPlayer();if(n&&n.ima3&&n.ima3.adPlayer){var e=n.ima3.adPlayer.currentTime();return Os(e)}},i.playHeadPosition=function(){var t=i.container.bcPlayer().currentTime();return Os(t)},i.nielsen=n,i.config=t,i.setEvents(),i}return Cn(s,a),s.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager),t=this.container.bcPlayer();e.addCustomListener(this.container,s.VIDEO_LOADED_EVENT,function(){var e=a.container.getService(Bs.context).currentlyPlayingVideo;a.config.setVideo(e)}),e.addMultipleListener(this.container,["play","timeupdate"],function(){a.videoTimerOn||a.sendMetadataEvent()}),e.addListener(this.container,"play",function(){var e=a.container.bcPlayer(),t;e.ads.isAdPlaying&&(a.adsEventsSet||(a.adsEventsSet=!0,null===(t=e.ima3.adPlayer)||void 0===t||t.on("timeupdate",function(){var e=a.adsPlayHeadPosition();0<e&&e!==a.lastExtractionPoint&&(a.adsPosition=e,a.nielsen.sendEvent(s.SET_PLAY_HEAD_POSITION,e))})))}),e.addListener(this.container,"timeupdate",function(){var e=a.playHeadPosition();0<e&&e!==a.lastExtractionPoint&&!a.seeking&&(a.lastExtractionPoint=e,a.nielsen.sendEvent(s.SET_PLAY_HEAD_POSITION,e))}),e.addListener(this.container,"ended",this.endEvent),e.addListener(this.container,"pause",this.stopEvent),e.addCustomListener(this.container,fe.ON_SKIP_EVENT,this.endEvent),e.addCustomListener(this.container,Te.UP_NEXT_CLICK,this.endEvent),e.addListener(this.container,"ads-pause",this.stopEvent),e.addListener(this.container,"ads-play",this.sendAdMetadata),e.addListener(this.container,"ads-ad-started",this.sendAdMetadata),e.addMultipleListener(this.container,["ads-ad-ended","ads-ad-skipped"],this.stopEvent),e.addMultipleListener(this.container,["ads-allpods-completed","ads-ad-skipped"],function(){a.sendMetadataEvent()});var n=t.error();n&&n.code&&this.endEvent(),this.container.bcPlayer().controlBar.progressControl.seekBar.on("mousedown",function(){a.seeking=!0}),this.container.bcPlayer().controlBar.progressControl.seekBar.on("mouseup",function(){setTimeout(function(){a.seeking=!1},500)})},s.LOAD_METADATA_EVENT="loadMetadata",s.SET_PLAY_HEAD_POSITION="setPlayheadPosition",s.STOP_EVENT="stop",s.END_EVENT="end",s.VIDEO_LOADED_EVENT="videoLoaded",s}(u),hn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tn=function(a){function e(e,o,n){var i=a.call(this,n)||this;return i.videoDuration=null,i.firstPlay=!0,i.autoplayEventTracked=!1,i.accountId=e,i.videoId=o,i.playerConfig=i.getService(Bs.config).player,i.container=n,i.element=document.createElement("video"),i.element.setAttribute("data-account",i.accountId),i.element.id="p-"+n.bcInfo.id,i.element.setAttribute("vms-video-id",i.videoId),i.element.setAttribute("data-embed","default"),i.element.setAttribute("controls","controls"),i.element.className=" video-js",i.getService(Bs.environment).browser.isIOS()&&i.element.setAttribute("playsinline","playsinline"),i.setEvents(),i}return hn(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);e.addListener(this.container,"play",function(){a.getService(Bs.pageManager).pauseAll([a.container])}),e.addMultipleListener(this.container,["loadedmetadata"],function(){a.autoplayEventTracked=!1}),e.addMultipleListener(this.container,["timeupdate"],function(){if(!a.autoplayEventTracked){var e=a.getService(Bs.context).clickToPlay?R.CLICK_TO_PLAY:R.AUTOPLAY;a.getService(Bs.analytics).omniture.track([e]),a.autoplayEventTracked=!0}}),e.addCustomListener(this.container,ze.EVENT_USER_STATUS,function(e){var t=a.getService(Bs.context),n=a.getService(Bs.environment);e===ze.USER_SUBSCRIBER&&-1<Ds.PROJECT0_SITES.indexOf(n.getDomain())&&(t.adsDisabled=!0)}),e.addSingleEventListener(this.container,"play",function(){var e=je.get(a.container),t=a.container.getPluginInstance(An.pluginName),n=a.getService(Bs.context);n.clickToPlay=!(e.autoplayEnabled&&t.completed),a.getService(Bs.context).firstPlay=!1}),e.addListener(this.container,"ready",function(){var e=a.container.view.element.getElementsByClassName("vjs-play-control"),n;e&&e[0]&&e[0].setAttribute("id","vjs-play-control"),a.brightcovePlayer.responsive(!1);var t=a.container.view.element.getElementsByClassName("vjs-big-play-button");t&&t[0].setAttribute("id","vjs-big-play-button");var i=a.getBCPlayer();null===(n=i.controlBar.fullscreenToggle)||void 0===n||n.addClass("active"),i.on("error",function(){if(a.getService(Bs.environment).browser.isIOS()){var e=i.error();e&&e.code&&3===e.code&&0<=a.getService(Bs.context).retryPlaybackOnError&&(i.error(null),i.pause(),i.load(),i.currentTime(0),i.play(),a.getService(Bs.context).retryPlaybackOnError--)}else a.getService(Bs.eventManager).trigger(a.container,qo.PLAYER_PLAYBACK_ERROR)})}),e.addListener(this.container,"ima3-ready",function(){var e;null===(e=a.getBCPlayer().ima3.adControlBar.fullscreenToggle)||void 0===e||e.addClass("active")}),e.addListener(this.container,"timeupdate",function(){a.container.bcPlayer().liveTracker&&(a.container.bcPlayer().liveTracker.atLiveEdge()?ks.addClass(a.container.view.element,"vms-live-at-edge"):ks.removeClass(a.container.view.element,"vms-live-at-edge"))}),e.addListener(this.container,"ima3error",function(){a.getService(Bs.eventManager).trigger(a.container,qo.PLAYER_ADS_PLAYBACK_ERROR),a.getService(Bs.analytics).omniture.track([R.AD_FAILED_LOADING])}),e.addListener(this.container,["adserror","ima3-ad-error"],function(){a.getService(Bs.eventManager).trigger(a.container,qo.PLAYER_ADS_PLAYBACK_ERROR),a.getService(Bs.analytics).omniture.track([R.AD_FAILED])}),e.addListener(this.container,"ended",function(){var e=a.getBCPlayer(),n=function(){e.off("play",n)},i;null===(i=e.controlBar.playToggle)||void 0===i||i.on("click",n),e.one("loadstart",function(){e.off("play",n)})})},e.prototype.getElement=function(){return this.element},e.prototype.load=function(a){var l=this;return this.getService(Bs.eventManager).setPlayerEvents(this.container),new Promise(function(t,n){var e=E.parseEmbedCode(a);a=1===e.length?"ref:"+a:e.pop();var i=function(o){window&&window.utag_data&&window.utag_data.ad_ppid&&l.brightcovePlayer&&l.brightcovePlayer.ima3&&l.brightcovePlayer.ima3.settings&&(l.brightcovePlayer.ima3.settings.ima3SdkSettings={},l.brightcovePlayer.ima3.settings.ima3SdkSettings.ppid=window.utag_data.ad_ppid),l.brightcovePlayer.catalog.getVideo(a,function(r,e){if(r&&r.response){if("AD_CONFIG_NOT_FOUND"===(r=JSON.parse(r.response).pop()).error_code||"VIDEO_URLS_RETRIEVE_FAILURE"===r.error_code)return i();if(r.error_code){var a=l.container.getPluginInstance(rt.pluginName);l.brightcovePlayer.error(a.getError(r))}}null===r?(l.getService(Bs.context).withBCVideo(e),o&&!1===l.getService(Bs.context).adsDisabled&&l.container.getPluginInstance(nt.pluginName).augmentSources(e),l.videoDuration=e.duration,window._sf_async_config&&(window._sf_async_config.autoDetect=!1),l.getService(Bs.context).currentlyPlayingVideo=e,l.brightcovePlayer.catalog.load(e),new h(l.container).setTrackingEvent(),l.getService(Bs.eventManager).trigger(l.container,qo.BC_READY),l.getService(Bs.eventManager).trigger(l.container,Sn.VIDEO_LOADED_EVENT),l.container.bcPlayer().el().getElementsByClassName("vjs-poster")[0].onmousedown=function(){l.getService(Bs.context).manuallyStarted=!0},l.firstPlay&&l.getService(Bs.eventManager).addSingleEventListener(l.container,"play",function(){l.getService(Bs.analytics).reset().heartbeat.set(),l.firstPlay=!1}),t(e)):n(r)},o)};l.container.getPluginInstance(nt.pluginName).getAdConfigId().then(function(t){i(t)}).catch(function(){i()})})},e.prototype.render=function(a){var e=this;a||(a=bc),this.getService(Bs.eventManager).addCustomListener(this.container,"utag_ready",function(){var t=e.getService(Bs.eventManager);t.trigger(e.container,ze.EVENT_CHECK_LOGIN),e.getService(Bs.config).withHeartbeat(),a.usingAdBlocker().then(function(){var n=["playToggle","volumePanel","progressControl","liveDisplay","remainingTimeDisplay","currentTimeDisplay","timeDivider","durationDisplay","CustomControlSpacer","PlaybackRateMenuButton","SubsCapsButton","fullscreenToggle"];e.getService(Bs.context).isVertical()&&(n=["progressControl"]),e.brightcovePlayer=a(e.element,{techOrder:["html5"],controlBar:{children:n}}),t.trigger(e.container,"BC_FUNC_READY");var o=function(){e.load(e.container.bcInfo.id),e.refreshEvents()};-1===e.container.view.cssClasses.indexOf("vms-iframe")?e.getService(Bs.nielsen).load().then(function(){o()}).catch(function(t){console.log(t),o()}):o()})}),new _(this.container)},e.prototype.refreshEvents=function(){this.getService(Bs.eventManager).setPlayerEvents(this.container)},e.prototype.getBCPlayer=function(){return this.brightcovePlayer},e}(u),Nn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),In=function(a){function e(e){var i=a.call(this,e)||this;return i.fullscreen=!1,i}return Nn(e,a),e.prototype.trackMuteStatus=function(n){if(n!==this.lastMuted){var e=n?R.MUTE:R.UNMUTE;this.getService(Bs.analytics).omniture.track([e]),this.lastMuted=n}},e.prototype.setEvents=function(){var a=this,e=this.container,t=this.getService(Bs.eventManager);t.addListener(e,"ready",function(){var t;null===(t=e.bcPlayer().controlBar.volumePanel)||void 0===t||t.muteToggle.on("click",function(){a.trackMuteStatus(e.bcPlayer().muted())})}),t.addListener(e,"ima3-ready",function(){e.bcPlayer().ima3.adControlBar.volumePanel.muteToggle.on("click",function(){a.trackMuteStatus(e.bcPlayer().ima3.adPlayer.muted())})}),t.addListener(e,"fullscreenchange",function(){a.fullscreen!==e.bcPlayer().isFullscreen()&&(a.fullscreen=e.bcPlayer().isFullscreen(),!0===a.fullscreen&&a.getService(Bs.analytics).omniture.track([R.FULLSCREEN_CHANGE]))})},e}(u),bn=function(){},Pn=function(){function t(t){this.tracked=[],this.events=new In(t)}return t.prototype.push=function(n){window.mready=window.mready||[],window.mready.push(function(e){e.ev(n)})},t.prototype.pushNpv=function(n){window.mready=window.mready||[],window.mready.push(function(e){e.npv(n)})},t.prototype.delay=function(a,e){void 0===this.delayedEvents&&(this.delayedEvents=[]);var t=new bn;t.events=a,t.evars=e,this.delayedEvents.push(t)},t.prototype.fireDelayed=function(){if(this.delayedEvents){for(var a=[],e={},t=0,n=this.delayedEvents,i;t<n.length;t++)for(var r in i=n[t],a=a.concat(i.events),i.evars)e[r]=i.evars[r];this.delayedEvents=[],0<a.length&&this.track(a,e)}},t.prototype.track=function(a,r,t){void 0===t&&(t=!1);var n={events:a};void 0!==r&&Object.keys(r).forEach(function(t){n[t]=r[t]}),t?this.pushNpv(n):this.push(n)},t.prototype.trackOnce=function(a,e,t){void 0===t&&(t=!1),-1===this.tracked.indexOf(a.join(" "))&&(this.track(a,e,t),this.tracked.push(a.join(" ")))},t}(),wn=function(){},Ln=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),On=function(s){function n(e){var t=s.call(this,e)||this;t.watchedTime=0;var i=t.getService(Bs.eventManager),r=t.getPlayer(),o=t.getService(Bs.context);return r.on(o.ssai?"adtimeupdate":"timeupdate",function(){if(t.container.view.element.parentNode&&t.watchedTime<n.SKIP_THRESHOLD){var a=Os(r.currentTime());t.watchedTime!=a&&(i.trigger(t.container,n.EVENT_WATCHED_INCREMENT,a),t.watchedTime=a),t.watchedTime>=n.SKIP_THRESHOLD&&i.trigger(t.container,n.EVENT_AD_SKIPPABLE)}}),t}return Ln(n,s),n.prototype.getPlayer=function(){return this.container.bcPlayer().ima3.adPlayer||this.container.bcPlayer()},n.EVENT_WATCHED_INCREMENT="AD_WATCHED_INCREMENT",n.EVENT_AD_SKIPPABLE="AD_SKIPPABLE",n.SKIP_THRESHOLD=4,n}(u),fn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rn=function(s){function e(t){var n=s.call(this,document.createElement("div"))||this;n.isSkippable=!1,n.container=t,n.element.className=e.CSS_NAME,n.image=document.createElement("img"),n.image.className="rp-ad-skip-img",n.skipText=document.createElement("div"),n.skipText.innerHTML=e.afterAdLabelDesktop,n.skipText.className="rp-ad-skip-text",n.element.appendChild(n.skipText),n.element.appendChild(n.image);var i=n.container.getService(Bs.environment),r=n.container.getService(Bs.context);(i.browser.isMobile()||r.useMobileUi())&&(ks.addClass(n.element,"rp-ad-skip-mobile"),n.skipText.innerHTML=e.afterAdLabelMobile);var o=n.container.getService(Bs.eventManager);return o.addCustomListener(n.container,ut.STICKY_HIDDEN_EVENT,function(){n.skipText.innerHTML=e.afterAdLabelDesktop}),o.addCustomListener(n.container,ut.STICKY_VISIBLE_EVENT,function(){n.skipText.innerHTML=e.afterAdLabelMobile}),n}return fn(e,s),e.prototype.display=function(n){Dn.skip_ad_enabled&&(this.countDown=new On(this.container));var e=this.container.bcPlayer();!this.container.getService(Bs.context).ssai&&(!e.ima3||e.ima3.currentAd&&e.ima3.currentAd.isSkippable())||n.appendChild(this.element)},e.prototype.show=function(){var e=this.container.bcPlayer(),t=this.container.getService(Bs.context);this.container.bcPlayer().ads.isAdPlaying()&&(t.ssai||e.ima3&&(!e.ima3.currentAd||!e.ima3.currentAd.isSkippable()))?s.prototype.show.call(this):this.hide()},e.prototype.reset=function(){this.isSkippable=!1,this.image.style.display="block",this.skipText.innerHTML="You can skip ad in 4s",ks.removeClass(this.element,"rp-skippable-ad")},e.prototype.skippable=function(){this.isSkippable=!0,this.countDown=null,this.image.style.display="none",this.skipText.innerHTML="Skip ad",ks.addClass(this.element,"rp-skippable-ad")},e.prototype.refreshCountdown=function(t){this.skipText.innerHTML="You can skip ad in "+(On.SKIP_THRESHOLD-t)+"s"},e.prototype.refresh=function(n){var e=this;this.image.src=n.thumbnail,this.image.onerror=function(){e.image.getAttribute("data-errored")||(e.image.setAttribute("data-errored","errored"),e.image.src=V.get()+"img/fallback.jpg",e.image.width=100,e.image.height=50)}},e.CSS_NAME="rp-ad-skip",e.afterAdLabelDesktop="Your video will play after the ad",e.afterAdLabelMobile="Video will play after the ad",e}(N),Mn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dn=function(a){function r(e){var t=a.call(this,e,r.pluginName)||this;return t.view=new Rn(t.container),t.setEvents(),t}return Mn(r,a),r.prototype.setEvents=function(){var a=this,e=this.getService(Bs.context),t=this.getService(Bs.eventManager);t.addListener(this.container,"ads-ad-started",function(){a.view.refresh(a.getService(Bs.context).capiVideo),a.view.display(a.container.bcPlayer().el_),r.skip_ad_enabled&&a.view.reset(),a.view.show()}),t.addListener(this.container,"play",function(){a.view.hide()});var n=function(){a.getService(Bs.environment).browser.isMobile()&&setTimeout(function(){a.container.bcPlayer().userActive(!1)},2e3)};t.addListener(this.container,"ads-ad-ended",function(){a.view.hide(),n()}),t.addListener(this.container,"ima3-complete",function(){a.container.bcPlayer().userActive(!0),n()}),t.addListener(this.container,"ads-ad-skipped",n),t.addListener(this.container,"ima3error",n),t.addListener(this.container,"ima3-ad-error",n),t.addCustomListener(this.container,On.EVENT_AD_SKIPPABLE,function(){a.view.skippable()}),t.addCustomListener(this.container,On.EVENT_WATCHED_INCREMENT,function(e){a.view.refreshCountdown(e)}),ks.onClick(this.view.element,function(){if(a.view.isSkippable){if(e.ssai){var n=a.container.bcPlayer().ssai(),t=n.currentTimelineState();n.seekInAbsoluteTime(t.linearAd.absoluteEndTime())}else a.container.bcPlayer().ima3.adsManager.skip();a.getService(Bs.analytics).omniture.track([R.AD_SKIPPED]),a.view.hide()}})},r.pluginName="PLUGIN_AD_CONTROLS",r.skip_ad_enabled=!1,r}(A),kn=function(){function t(a,i,t){void 0===t&&(t=!0),this.src=a,this.callback=i,this.createScript(t)}return t.prototype.createScript=function(n){var e=this;this.script=document.createElement("script"),this.script.setAttribute("src",this.src),this.script.onload=function(){e.callback()},n||(this.script.onerror=function(){e.callback()})},t.prototype.load=function(){document.body.appendChild(this.script)},t}(),Vn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bn=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.providerName="CASTING_PROVIDER",e}return Vn(e,n),e.prototype.load=function(){var n=this;return new Promise(function(e){new kn(n.getScriptUrl(),function(){e({})}).load()})},e.prototype.getName=function(){return this.providerName},e.prototype.moveButton=function(){var a=this.getControlBarControl();if(a){var e=this.container.bcPlayer().controlBar.el_,t=this.container.bcPlayer().controlBar.durationDisplay.el_.nextSibling;a&&t&&(e.removeChild(a),e.insertBefore(a,t))}},e}(u),xn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Un=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.providerName="AIRPLAY",e.visible=!1,e.casting=!1,e}return xn(e,n),e.prototype.getScriptUrl=function(){return e.AIRPLAY_PLUGIN_URL},e.prototype.isCasting=function(){return this.casting},e.prototype.enable=function(){var n=this;if(this.container.bcPlayer().bcAirplay){this.bcPlugin=this.container.bcPlayer().bcAirplay();var e=this.container.bcPlayer().tech(!0).el();e.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){switch(e.availability){case"available":n.visible=!0;break;case"not-available":n.visible=!1;}}),e.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",function(){n.casting=!n.casting;var e=n.getService(Bs.eventManager);n.casting?e.trigger(n.container,Xn.EVENT_CASTING_START):e.trigger(n.container,Xn.EVENT_CASTING_STOP)})}},e.prototype.startCasting=function(){var t;null===(t=this.container.bcPlayer().controlBar.airplayButton)||void 0===t||t.handleClick()},e.prototype.checkProviderAvailability=function(){return this.visible||void 0!==window.WebKitPlaybackTargetAvailabilityEvent},e.prototype.checkStatus=function(){return this.checkProviderAvailability()},e.prototype.getControlBarControl=function(){return this.container.bcPlayer().controlBar.airplayButton},e.AIRPLAY_PLUGIN_URL="//players.brightcove.net/videojs-bc-airplay/1/videojs-bc-airplay.js",e}(Bn),Hn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gn=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.providerName="CHROMECAST",e.chromecastAvailable=!1,e.casting=!1,e}return Hn(e,n),e.prototype.getScriptUrl=function(){return e.CHROMECAST_PLUGIN_URL},e.prototype.isCasting=function(){return this.casting},e.prototype.enable=function(){var t;this.bcPlugin=this.container.bcPlayer().chromecastReceiver({appName:"NewsCorp Brightcove Video Player"}),this.bcPlugin.fsToggleIndex_=-1;try{this.chromecastAvailable=null===(t=this.bcPlugin)||void 0===t?void 0:t.chromecastGlobalsAvailable()}catch(t){}},e.prototype.startCasting=function(){this.container.bcPlayer().childNameIndex_.controlBar.childNameIndex_.ChromecastButton.handleClick_()},e.prototype.checkProviderAvailability=function(){return window.chrome&&window.chrome.cast&&window.cast&&window.cast.framework&&window.cast.framework.CastContext&&window.cast.framework.CastContext.getInstance},e.prototype.checkStatus=function(){var a=this;try{var e=this.bcPlugin.castSession(),t=e&&e.getMediaSession&&void 0!==e.getMediaSession(),n=this.getService(Bs.eventManager);return!1===this.casting&&t&&(this.casting=!0,n.trigger(this.container,Xn.EVENT_CASTING_START),n.addSingleEventListener(this.container,"loadedmetadata",function(){a.casting=!1})),t||(this.casting=!1,n.trigger(this.container,Xn.EVENT_CASTING_STOP)),"NO_DEVICES_AVAILABLE"!==this.bcPlugin.castContext().getCastState()}catch(t){return!1}},e.prototype.getControlBarControl=function(){return this.container.bcPlayer().controlBar.el_.querySelector(".vjs-chromecast-receiver-button")},e.CHROMECAST_PLUGIN_URL="//players.brightcove.net/videojs-chromecast-receiver/2/videojs-chromecast-receiver.js",e}(Bn),Yn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wn=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Yn(e,n),e.prototype.isEnabled=function(){var n=this.getService(Bs.environment).browser,e=this.getService(Bs.context);return(n.isSafari()||this.isChromeEnabled())&&!e.isVertical()},e.prototype.isChromeEnabled=function(){var t=this.getService(Bs.environment).browser.isChrome();return t&&(t="primary-media"===this.container.view.element.parentElement.getAttribute("id")),t||ks.addClass(this.container.view.element,"vms-chromecast-disabled"),t},e.prototype.getCastingProvider=function(){return this.getService(Bs.environment).browser.isSafari()?new Un(this.container):new Gn(this.container)},e}(u),Fn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kn=function(a){function e(){var t=a.call(this,document.createElement("div"))||this;return t.element.className=e.CSS_CASTING_BUTTON,t}return Fn(e,a),e.prototype.attachTo=function(t){t.appendChild(this.element)},e.CSS_CASTING_BUTTON="vms-casting-button",e}(N),jn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xn=function(a){function i(e){var i=a.call(this,e)||this;return i.castingEnabled=!1,i.providerFactory=new Wn(e),i.view=new Kn,i.setEvents(),i}return jn(i,a),i.prototype.onLoaded=function(){if(this.provider.enable(),!this.getService(Bs.environment).browser.isMobile())try{this.provider.moveButton()}catch(t){}},i.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,"BC_FUNC_READY",function(){if(a.providerFactory.isEnabled()){a.provider=a.providerFactory.getCastingProvider(),a.provider.load().then(function(){a.onLoaded()});var e=20,t=setInterval(function(){e--;var n=a.getService(Bs.environment);return a.provider.checkProviderAvailability()?(a.castingEnabled=!0,n.browser.isMobile()&&(a.view.attachTo(a.container.view.wrapper.querySelector(".video-js")),a.view.hide()),void clearInterval(t)):void(0==e&&(n.browser.isIOS()&&a.provider instanceof Gn&&(a.provider=new Un(a.container),a.provider.load().then(function(){return a.onLoaded()}),a.castingEnabled=!0),clearInterval(t)))},100)}}),e.addListener(this.container,"timeupdate",function(){var e;(null===(e=a.provider)||void 0===e?void 0:e.checkStatus())&&a.view.show()}),e.addCustomListener(this.container,i.EVENT_CASTING_START,function(){a.getService(Bs.analytics).omniture.track([R.CASTING_BUTTON_CLICK],{eVar185:a.provider.getName()}),a.getService(Bs.context).preventViewabilityPause=!0}),e.addCustomListener(this.container,i.EVENT_CASTING_STOP,function(){a.getService(Bs.context).preventViewabilityPause=!1}),ks.onClick(this.view.element,function(){a.provider.startCasting()})},i.pluginName="PLUGIN_CASTING",i.EVENT_CASTING_START="EVENT_CASTING_START",i.EVENT_CASTING_STOP="EVENT_CASTING_STOP",i}(A),zn=function(){function d(){}return d.getMaxHeight=function(e){var t=1*e.view.element.offsetWidth/d.RATIO,i=e.getService(Bs.environment),r=window.document,o=r.querySelector(".main-header-content.mini-nav")||r.querySelector(".navigation")||r.querySelector(".header__top")||r.querySelector("header"),a=(null==o?void 0:o.offsetHeight)||0,s=(null===(l=window.document.getElementById("fixed-ads"))||void 0===l?void 0:l.offsetHeight)||0,c=Ls(t,d.PERCENT_HEIGHT*(window.innerHeight-a-s)),l;return i.browser.isDesktop()?Ls(c,d.DESKTOP_HEIGHT_LIMIT):c},d.fitInViewport=function(e){e.getService(Bs.environment);try{var t=d.RATIO;e.view.element.style.width="100%";var n=d.getMaxHeight(e),a=n*t||e.view.element.parentElement.offsetWidth*t;a>window.innerWidth&&(n=(a=window.innerWidth-50)*(1/t)),a<d.MINIMUM_WIDTH&&(n=(a=d.MINIMUM_WIDTH)*(1/t)),e.view.element.style.height=n+"px",e.view.element.style.width=a+"px",e.view.element.style.setProperty("--martini-player-width",a+"px"),e.view.element.style.setProperty("--martini-player-height",n+"px")}catch(t){}},d.PERCENT_HEIGHT=.7,d.DESKTOP_HEIGHT_LIMIT=1e3,d.MINIMUM_WIDTH=224,d.RATIO=9/16,d}(),Qn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),$n=function(){for(var l=0,e=0,t=arguments.length;e<t;e++)l+=arguments[e].length;var n=Array(l),i=0;for(e=0;e<t;e++)for(var r=arguments[e],o=0,a=r.length;o<a;o++,i++)n[i]=r[o];return n},qn=function(a){function c(e,t){var n=a.call(this,document.createElement("div"))||this;return n.expanded=!1,n.element.className=c.CSS_CLASS,n.container=e,n.setEvents(),n.appendTo(t),n}return Qn(c,a),c.prototype.expand=function(m){var g=this,n=this.container.bcPlayer(),e=n.muted();n.muted(!0),null==n||n.play(),null==n||n.pause(),n.muted(e);var i=this.container.getService(Bs.lightningPlayerOrchestrator);i.index=0,n.ads.isAdPlaying()&&n.ima3.adPlayer.pause(),i.setOverlay();var t=this.container.getService(Bs.context),a=this.container.getPluginInstance(Ie.pluginName),r=new W(this.container,m||t.capiVideo,a.view.recommendations);a.view.recommendations.items=$n([r],a.view.recommendations.items.filter(function(t){return t.capiVideo.id!==r.capiVideo.id})),m&&(a.view.recommendations.items.find(function(e){return m.id===e.capiVideo.id})||a.view.recommendations.items.push(new W(this.container,t.capiVideo,a.view.recommendations))),i.overlay.style.display="block";var o=t.bcVideo;if(m){var s=m.platformId.split("-");2===s.length?n.catalog.getVideo(s[1],function(n,e){i.load(g.container,e)}):i.load(this.container,o)}else i.load(this.container,o);this.scrollTop=window.scrollY||window.pageYOffset,ks.addClass(window.document.body.parentElement,"video-full-screen");var l=this.container.getService(Bs.eventManager);l.trigger(this.container,c.EVENT_ENTER_FULLSCREEN),this.expanded=!0,l.addCustomListener(this.container,c.EVENT_CLOSE_FULLSCREEN,function(){setTimeout(function(){isFinite(n.duration())||(g.container.getService(Bs.analytics).heartbeat.stopTracking=!1),n.currentTime(n.duration()-.1),n.play(),n.on("ended",function(){g.container.getService(Bs.analytics).heartbeat.stopTracking=!1})},0),window.scrollTo({top:g.scrollTop,left:0,behavior:"auto"});var a=1e3,e=setInterval(function(){0!=--a&&g.scrollTop!==window.scrollY||(zn.fitInViewport(g.container),clearInterval(e))},1);n.play(),g.expanded=!1})},c.prototype.setEvents=function(){var n=this;ks.onClick(this.element,function(){var e=n.container.getService(Bs.analytics).omniture;e.track([R.FULLSCREEN_CHANGE]),e.track([R.CLICK_TO_PLAY]),n.expand()});try{window.matchMedia("(orientation: portrait)").addEventListener("change",function(e){e.matches||n.expanded&&(n.container.getService(Bs.lightningPlayerOrchestrator).disposeAll(),n.expanded=!1)})}catch(t){}},c.prototype.appendTo=function(t){t.appendChild(this.element)},c.CSS_CLASS="vms-vertical-expand",c.EVENT_ENTER_FULLSCREEN="EVENT_ON_VERTICAL_FULLSCREEN",c.EVENT_CLOSE_FULLSCREEN="EVENT_ON_CLOSE_VERTICAL_FULLSCREEN",c}(N),Zn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jn=function(a){function d(e){var i=a.call(this,e)||this;return i.playerName="NewsCorp Brightcove Video Player",i.trackPlay=!1,i.activeSession=!1,i.stopTracking=!1,i.container=e,i}return Zn(d,a),d.prototype.getMetadata=function(a){var e=this.getService(Bs.environment),t=a.capiVideo,n=new wn;n.channel=t.categoriesExtended().slice(0,4).join(", "),n.brand=e.brand(),n.site=e.site(),n.videoSource=t.source&&t.source.toLowerCase()||"NA",n.playlistIndex=a.recommendationsOrigin||null,n.advtType=a.ssai?"SSAI":"CSAI",n["a.media.network"]=e.network(),n.mediacontenttype=a.videoContentType,n.mediaautoplayanalytics=a.auth.getAuthTokenValues(),n.inactivetab=e.tabLoaded,n.videoQuality=a.videoQuality,n.playlistOrder=a.playOrder,n.abcookie=e.abCookie.getHeartbeatLabel(),n.accessType=a.capiVideo.accessType===l.ACCESS_TYPE_PREMIUM?"restricted":"free";var i="close caption disabled";a.hasSubtitles()&&"true"===window.sessionStorage.getItem(Be.STORAGE_NAME)&&(i="closed caption enabled"),n.mediacaptionstatus=i;try{var r=this.container.getPluginInstance(Xn.pluginName);r.castingEnabled&&(n.CastingStatus=r.provider.getName())}catch(t){}return n},d.prototype.initialiseSession=function(n){this.activeSession||this.endSession();var e=ADB.va.MediaHeartbeat;this.mediaObject=e.createMediaObject(n.mediainfo.name,n.mediainfo.id,n.mediainfo.duration,e.StreamType.VOD),this.setMetadata(),this.mediaHeartbeat.trackSessionStart(this.mediaObject,{}),this.activeSession=!0},d.prototype.setMetadata=function(){var n=ADB.va.MediaHeartbeat,e=this.getMetadata(this.getService(Bs.context));this.mediaObject.setValue(n.MediaObjectKey.StandardVideoMetadata,e)},d.prototype.endSession=function(){this.activeSession&&(this.mediaHeartbeat.trackSessionEnd(this.mediaObject,{}),this.activeSession=!1)},d.prototype.set=function(){var p=this;this.heartbeatConfig=this.getService(Bs.config).heartbeat;var e=this.container.bcPlayer(),m=ADB.va.MediaHeartbeat,t=ADB.va.MediaHeartbeatConfig,i=new(0,ADB.va.MediaHeartbeatDelegate),a;i.getCurrentPlaybackTime=function(){return null==e?void 0:e.currentTime()},i.getQoSObject=function(){var e=null,r,t,n;try{var i=null===(r=p.container)||void 0===r?void 0:r.bcPlayer().getVideoPlaybackQuality(),a=null===(n=null===(t=p.container)||void 0===t?void 0:t.bcPlayer().tech(!0).vhs.playlists.media())||void 0===n?void 0:n.attributes;e=m.createQoSObject(a&&a.BANDWIDTH||0,i.creationTime,24,i.droppedVideoFrames)}catch(t){}return e},"function"==typeof Visitor.getInstance&&(a=Visitor.getInstance(this.heartbeatConfig.visitor.orgId,window.utag_data.adobe.visitorObjectConfig));var n=null;void 0===window.metrics.s?((n=new AppMeasurement(this.heartbeatConfig.appMeasurement.rsid)).visitor=a,n.trackingServer=this.heartbeatConfig.appMeasurement.trackingServer,n.account=this.heartbeatConfig.appMeasurement.rsid,n.visitorID=this.heartbeatConfig.appMeasurement.visitorId,n.pageName="",n.charSet="UTF-8"):n=window.metrics.s;var r=this.getService(Bs.context),o=new t;o.trackingServer=this.heartbeatConfig.heartbeat.trackingServer,o.playerName=r.isVertical()?d.VERTICAL_PLAYER:this.playerName,o.channel=r.capiVideo.categories.join(", "),o.debugLogging=!1,o.appVersion="",o.ssl=!0,o.ovp="",this.mediaHeartbeat=new m(i,o,n),this.initialiseSession(e),this.setEvents()},d.getScript=function(a){var e=d.scripts.filter(function(e){return e.env===a})[0];return e?e.script:""},d.prototype.setEvents=function(){var s=this,e=this.container.bcPlayer(),t=function(){e.ads.isAdPlaying()||(s.trackPlay=!0,s.mediaHeartbeat.trackPlay())};e.on("playing",function(){s.stopTracking||(s.trackPlay?e.off("playing",t):t())});var n=this.getService(Bs.eventManager);n.addListener(this.container,"loadedmetadata",function(){s.setMetadata()}),n.addCustomListener(this.container,fe.ON_SKIP_EVENT,function(){s.endSession()}),n.addCustomListener(this.container,qn.EVENT_ENTER_FULLSCREEN,function(){s.endSession(),s.stopTracking=!0}),n.addCustomListener(this.container,Te.UP_NEXT_CLICK,function(){s.endSession()}),n.addListener(this.container,"play",function(){if(s.stopTracking)s.endSession();else{if(!s.activeSession){var e=s.container.bcPlayer();s.initialiseSession(e)}s.mediaHeartbeat.trackPlay()}}),n.addListener(this.container,"pause",function(){s.container.bcPlayer().ended()||s.mediaHeartbeat.trackPause()}),n.addListener(this.container,"ended",function(){s.stopTracking||(s.mediaHeartbeat.trackComplete(s.mediaObject,{}),s.endSession())}),n.addListener(this.container,"ads-play",function(){s.mediaHeartbeat.trackPlay()}),n.addListener(this.container,"ads-pause",function(){s.mediaHeartbeat.trackPause()}),n.addListener(this.container,"ads-ad-started",function(){if(!s.activeSession){var t=s.container.bcPlayer();s.initialiseSession(t)}var n=ADB.va.MediaHeartbeat;if(e.ads.ad&&e.ads&&e.ads.ad.duration&&e.ads.ad.duration>d.AD_DURATION_TRACKING_THRESHOLD){var i=n.createAdBreakObject("Ad break name",0,0);s.mediaHeartbeat.trackEvent(n.Event.AdBreakStart,i);var r=n.createAdObject("Ad title",e.ads.ad.id+"",e.ads.ad.index,e.ads.ad.duration);s.mediaHeartbeat.trackEvent(n.Event.AdStart,r,{})}});var a=function(){var e=ADB.va.MediaHeartbeat;s.mediaHeartbeat.trackEvent(e.Event.AdSkip),s.mediaHeartbeat.trackEvent(e.Event.AdBreakComplete),s.mediaHeartbeat.trackPlay(),s.container.getPluginInstance(Dn.pluginName).view.hide()};n.addListener(this.container,"ads-ad-skipped",a),n.addListener(this.container,"ima3error",a),n.addListener(this.container,"ima3-ad-error",a),n.addListener(this.container,"ads-ad-ended",function(){if(e.ads.ad){var n=ADB.va.MediaHeartbeat;s.mediaHeartbeat.trackEvent(n.Event.AdComplete),s.mediaHeartbeat.trackEvent(n.Event.AdBreakComplete)}})},d.scripts=[{env:"dev",script:"//tags.news.com.au/sit/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"sit",script:"//tags.news.com.au/sit/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"pat",script:"//tags.news.com.au/sit/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"uat",script:"//tags.news.com.au/sit/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"beta",script:"//tags.news.com.au/prod/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"prod",script:"//tags.news.com.au/prod/heartbeat/v2.2.0/MediaSDK.min.js"}],d.VERTICAL_PLAYER="NewsCorp Brightcove Video Player - Vertical",d.VERTICAL_PLAYER_FULLSCREEN="NewsCorp Brightcove Video Player - Vertical Fullscreen",d.AD_DURATION_TRACKING_THRESHOLD=3,d}(u),ei=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ti=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.omniture=new Pn(t),n.heartbeat=new Jn(t),n}return ei(e,a),e.prototype.reset=function(){return this.heartbeat&&this.heartbeat.mediaHeartbeat&&this.heartbeat.endSession(),this.heartbeat=new Jn(this.container),this},e.pluginName="PLUGIN_ANALYTICS",e}(A),ni={sdk:{apn:"NewsCorpAU Brightcove Player",sfcode:"",nsdkv:"600",apid:"",nol_sdkDebug:""},video:{type:"content",assetid:"",program:"",title:"",length:0,segB:"",segC:"",isfullepisode:"n",adloadtype:2,hasAds:2,dataSrc:"cms"},ads:{type:"preroll",assetid:"defaultAdId"}},ai=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ii=function(){return(ii=Object.assign||function(a){for(var e=1,n=arguments.length,i;e<n;e++)for(var t in i=arguments[e])Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a}).apply(this,arguments)},ri=function(a){function e(e){var i=a.call(this,e)||this;return i.environment=i.getService(Bs.environment),i.config=ni,i}return ai(e,a),e.prototype.initSDKConfig=function(){var r=this.getService(Bs.utag),e=r.get("net_site"),t=r.get("net_sec1"),n="",i="",o=this.environment.isProd()?"P":"T";this.config.sdk.sfcode=this.environment.isProd()?"dcr":"dcr-cert",this.config.sdk.apn=[e,t,"videos"].join(" "),Ms.getSearchParams().dbnielsen&&(this.config.sdk.nol_sdkDebug="DEBUG"),window.nn&&window.nn.PAGEAPPID?this.config.sdk.apid=window.nn.PAGEAPPID:(window.nn&&window.nn.APPID&&(n=window.nn.APPID[e]&&window.nn.APPID[e].all||"",i=window.nn.APPID[e]&&window.nn.APPID[e][t]||n),this.config.sdk.apid=""+o+i)},e.prototype.getSDKConfig=function(){return this.config.sdk},e.prototype.getVideoMetadata=function(){return this.config.video},e.prototype.getAdsMetadata=function(){return this.config.ads},e.prototype.getMetadata=function(t){return t&&"ads"===t?(this.setAdsMetadata(),ii(ii({},this.getSDKConfig()),this.getAdsMetadata())):ii(ii({},this.getSDKConfig()),this.getVideoMetadata())},e.prototype.setVideo=function(t){this.video=t,this.setVideoMetadata()},e.prototype.setAdsMetadata=function(){var a=this.container.bcPlayer(),t;if(a.ads&&a.ads.ad&&a.ads.ad.id?t=a.ads.ad:a.ads&&a.ads.pod&&a.ads.pod.id&&(t=a.ads.pod),t&&t.id&&(this.config.ads.assetid=t.id),t&&t.type&&"string"==typeof t.type){var e=t.type;0<=["preroll","midroll","postroll"].indexOf(e.toLocaleString())&&(this.config.ads.type=e.toLocaleString())}},e.prototype.setVideoMetadata=function(){this.video&&(this.config.video.assetid=this.video.id,this.config.video.title=0===this.video.duration?e.LIVE_LABEL+this.video.name:this.video.name,this.config.video.hasAds="AD_SUPPORTED"===this.video.economics?"1":"0",this.config.video.length=0===this.video.duration?e.LIVE_DURATION:this.video.duration,this.config.video.program=this.config.sdk.apn)},e.LIVE_DURATION=86400,e.LIVE_LABEL="Live - ",e}(u),oi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),si=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.sdk={},n}return oi(e,a),e.prototype.load=function(){var n=this;return new Promise(function(e,t){-1!==Ms.getDomain().indexOf(Ds.CODESPORTS)&&e();var a=100,i=setInterval(function(){if(!(0!=--a||window.nn&&window.nn.APPID))return clearInterval(i),t({error:"NIELSEN FAILED TO LOAD"});if(window.nn&&void 0!==window.NOLBUNDLE&&"function"==typeof window.NOLBUNDLE.nlsQ){var o=new ri(n.container);return n.initSDK(o),clearInterval(i),e()}},100)})},e.prototype.log=function(t){Ms.getSearchParams().dbnielsen&&console.log("%c [Replayer][Nielsen] "+t,"background: #222; color: #bada55")},e.prototype.initSDK=function(t){t.initSDKConfig(),this.sdk=window.NOLBUNDLE.nlsQ(t.config.sdk.apid,this.container.bcInfo.videoId,{apn:t.config.sdk.apn,sfcode:t.config.sdk.sfcode,nol_sdkDebug:t.config.sdk.nol_sdkDebug}),this.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@ - setting events"),this.events=new Sn(this.container,t,this)},e.prototype.sendEvent=function(n,e){this.sdk&&(this.log("["+n+"] "+JSON.stringify(e)),this.sdk.ggPM(n,e))},e.pluginName="PLUGIN_NIELSEN",e}(A),li=function(){},ci=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),di=function(a){function c(e,t){var n=a.call(this,t)||this;n.module=new li,n.element=e,n.cssClasses=n.element.className.split(" "),n.wrapper=document.createElement("div"),n.wrapper.className=c.containerClassName;var i=n.element.children[0];i?n.setHeaderAndContent(i):(n.element.appendChild(n.wrapper),n.createHeader(),n.createFooter(),n.createContent());var r=n.findExistingChapters();r&&(n.module.moduleChapters=r);var o=n.getService(Bs.environment),s=o.getDomain();return-1===Ds.AB_TEST_DISABLED_SITES.indexOf(s)&&o.browser.isMobile()&&ks.addClass(n.element,"ab-test-play-icon-center"),o.browser.isMobile()&&ks.addClass(n.element,"vms-mobile"),n}return ci(c,a),c.prototype.getDefaultClasses=function(){var t=c.defaultCssClasses;return this.getService(Bs.environment).browser.isDesktop()||t.push("mobile"),this.container.log(t),t},c.prototype.setHeaderAndContent=function(a){this.element.insertBefore(this.wrapper,a);var e=this.findExistingHeader();e?this.module.moduleHeader=e:this.createHeader();var t=this.findExistingContent();t?this.module.moduleContent=t:this.createContent();var n=this.findExistingFooter();n?this.module.moduleFooter=n:this.createFooter()},c.prototype.findExistingHeader=function(){var n=this.element.getElementsByClassName("module-header vms-header"),e=null;return 0<n.length&&(e=n[0]),e},c.prototype.findExistingContent=function(){var n=this.element.getElementsByClassName("module-content"),e=null;return 0<n.length&&(e=n[0]),e},c.prototype.findExistingChapters=function(){var n=null,e=this.element.getAttribute(D.CHAPTERS_CONTAINER_ATTRIBUTE);return e&&(n=document.getElementById(e)),n},c.prototype.findExistingFooter=function(){var n=this.element.getElementsByClassName("module-footer"),e=null;return 0<n.length&&(e=n[0]),e},c.prototype.createHeader=function(){this.module.moduleHeader=document.createElement("div"),this.module.moduleHeader.className="module-header vms-header",this.element.appendChild(this.module.moduleHeader)},c.prototype.createContent=function(){this.module.moduleContent=document.createElement("div"),this.module.moduleContent.className="module-content",this.element.appendChild(this.module.moduleContent)},c.prototype.createFooter=function(){this.module.moduleFooter=document.createElement("div"),this.module.moduleFooter.className="module-footer",this.element.appendChild(this.module.moduleFooter)},c.prototype.showBigPlayButton=function(){0<this.wrapper.getElementsByClassName("vjs-big-play-button").length&&(this.wrapper.getElementsByClassName("vjs-big-play-button")[0].style.display="block")},c.defaultCssClasses=["vms","vms-player","vms-ready"],c.containerClassName="videoWrapper",c.embedCodeAttributeName="vms-embedcode",c}(u),pi=function(){function t(a,i){this.id=a.getAttribute(di.embedCodeAttributeName);var t=E.parseEmbedCode(this.id);2===t.length?(this.reference=!1,this.accountId=t[0],this.videoId=t[1]):(this.reference=!0,this.accountId=i.player.getAccountId(),this.videoId=t[0])}return t.prototype.getVideoId=function(){var t=this.videoId;return!0===this.reference&&(t="ref:"+t),t},t}(),mi=function(){function t(){}return t.get=function(n){var e;return e=0<document.querySelectorAll("body.story, body.article, #articlecontainer, #articlestory, #article-comments").length?"single player":n.view.element.className.match(/archive/i)?"hub player":document.querySelectorAll(".vms-standalone").length?"embed":"other",e},t}(),ui=function(){function t(){}return t.getCode=function(a,e){void 0===e&&(e=!1);var t="";try{for(var n=Ms.getSearchParams().referrer||window.document.referrer,i={facebook:"_FBK",google:"_GGL",twitter:"_TWT",linkedin:"_LIN",reddit:"_RED"},r=new URL(n).hostname,o=0,s=Object.keys(i),l;o<s.length;o++)l=s[o],-1<r.indexOf(l)&&(t=i[l])}catch(t){}if(e){var c="WEB_REG821";return(d={})[Ds.THE_ADVERTISER]="AAWEB_MRE170_a",d[Ds.COURIER_MAIL]="CMWEB_MRE170_a",d[Ds.DAILY_TELEGRAPH]="DTWEB_MRE170_a",d[Ds.HERALD_SUN]="HSWEB_MRE170_a",d[Ds.CAIRNS_POST]="CPWEB_MRE170_a",d[Ds.GEELONG_ADVERTISER]="GAWEB_MRE170_a",d[Ds.GOLDCOAST_BULLETIN]="GCWEB_MRE170_a",d[Ds.NT_NEWS]="NTWEB_MRE170_a",d[Ds.THE_CHRONICLE]="TCWEB_MRE170_a",d[Ds.TOWNSVILLE_BULLETIN]="TBWEB_MRE170_a",d[Ds.WEEKLY_TIMES_NOW]="WTWEB_MRE170_a",d[Ds.THE_MERCURY]="TMWEB_MRE170_a",d[Ds.THE_AUSTRALIAN]="TAWEB_MRE170_a",d[Ds.CODESPORTS]="CSWEB_MRE170_a",(d[a]||c)+t}var d;return c="WEB_REG821",(d={})[Ds.THE_ADVERTISER]="AAWEB_WRE170_a",d[Ds.COURIER_MAIL]="CMWEB_WRE170_a",d[Ds.DAILY_TELEGRAPH]="DTWEB_WRE170_a",d[Ds.HERALD_SUN]="HSWEB_WRE170_a",d[Ds.CAIRNS_POST]="CPWEB_WRE170_a",d[Ds.GEELONG_ADVERTISER]="GAWEB_WRE170_a",d[Ds.GOLDCOAST_BULLETIN]="GCWEB_WRE170_a",d[Ds.NT_NEWS]="NTWEB_WRE170_a",d[Ds.THE_CHRONICLE]="TCWEB_WRE170_a",d[Ds.TOWNSVILLE_BULLETIN]="TBWEB_WRE170_a",d[Ds.WEEKLY_TIMES_NOW]="WTWEB_WRE170_a",d[Ds.THE_MERCURY]="TMWEB_WRE170_a",d[Ds.THE_AUSTRALIAN]="TAWEB_WRE170_a",d[Ds.CODESPORTS]="CSWEB_WRE170_a",(d[a]||c)+t},t}(),gi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),yi=function(a){function e(e,r){var n=a.call(this,e)||this;return n.view=r,n.setEvents(),n}return gi(e,a),e.prototype.setEvents=function(){var a=this,e=this.container.getService(Bs.context),t=this.getService(Bs.eventManager),c=this.getService(Bs.environment),d=this.getService(Bs.analytics);t.addCustomListener(this.container,po.EVENT_CAPI_LOADED,function(){a.view.title.innerHTML=e.capiVideo.title,a.view.duration.innerHTML=M.formatDuration(e.capiVideo.duration/1e3)}),t.addCustomListener(this.container,qo.BC_READY,function(){t.addCustomListener(a.container,ze.EVENT_USER_STATUS,function(){a.container.view.wrapper.appendChild(a.view.element),a.view.hide();var n=a.container.getPluginInstance(Si.pluginName);n.shouldDisplay()&&e.capiVideo.accessType===l.ACCESS_TYPE_PREMIUM&&(a.view.show(),ks.addClass(a.container.view.element,Si.VMS_CLASS),e.forceAutoplay(!1)),t.addMultipleListener(a.container,["play","timeupdate","loadedmetadata"],function(){n.shouldDisplay()?(a.view.show(),a.container.bcPlayer().pause(),t.trigger(a.container,ze.EVENT_CHECK_LOGIN)):a.view.hide()})})}),ks.onClick(this.view.loginButton,function(){var e=a.getService(Bs.utag),t=a.container.getPluginInstance(Si.pluginName);d.omniture.trackOnce(["event10"],{eVar23:e.get("net_site")+"|"+e.get("net_sec1")+"|global-sign-in|login-video-player|1|"+e.get("net_content_type")+"|"+e.get("net_pn")},!0);try{t.setPremiumAdsSession(),newscorpau.rampart.login(window.location.href)}catch(e){var n=a.getService(Bs.environment);if(Ds.THE_AUSTRALIAN===n.getDomain()){var i=document.querySelector(".header__user-status .header__user-login");i&&(t.setPremiumAdsSession(),i.click())}}}),ks.onClick(this.view.subscribeButton,function(){var e=a.getService(Bs.utag),t=a.container.getPluginInstance(Si.pluginName);d.omniture.trackOnce(["event10"],{eVar23:e.get("net_site")+"|"+e.get("net_sec1")+"|global-sign-in|register-video-player|2|"+e.get("net_content_type")+"|"+e.get("net_pn")},!0);try{t.setPremiumAdsSession();var n="video",i=a.getService(Bs.context);i.capiVideo.source===l.SOURCE_KTV&&(n="KTV"),window.location.href="/subscribe/news/1/?sourceCode="+ui.getCode(c.getDomain(),c.browser.isMobile())+"&dest="+encodeURIComponent(window.location.href)+"&memtype="+(i.auth.currentRole===ze.USER_ANONYMOUS?"anonymous":"registered")+"&mode=premium&BT="+n+"&AssetId="+i.capiVideo.id}catch(e){var r=a.getService(Bs.environment);if(Ds.THE_AUSTRALIAN===r.getDomain()){var o=document.querySelector(".header__user-status .header__user-subscribe");o&&(t.setPremiumAdsSession(),o.click())}}})},e}(u),_i=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ei=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.container=t,n.element.className=e.CSS_PREMIUM_VIDEO,n.headerContainer=document.createElement("div"),ks.addClass(n.headerContainer,e.CSS_HEADER),n.premiumLabel=document.createElement("div"),n.premiumLabel.innerHTML=e.PREMIUM_CONTENT_LABEL,n.premiumLabel.className="premium-content-label",n.duration=document.createElement("div"),n.duration.innerHTML="00:00",n.duration.className=e.CSS_DURATION,n.headerContainer.appendChild(n.premiumLabel),n.headerContainer.appendChild(n.duration),n.premiumvideoContainer=document.createElement("div"),n.premiumvideoContainer.className="premiumvideo-container",n.title=document.createElement("div"),n.title.className="title-container",n.premiumvideoContainer.appendChild(n.headerContainer),n.premiumvideoContainer.appendChild(n.title),n.element.appendChild(n.premiumvideoContainer),n.subscribeButtonContainer=document.createElement("div"),n.subscribeButtonContainer.className="subscribe-button-container",n.subscribeButton=document.createElement("button"),n.subscribeButton.className="subscribe-button",n.subscribeButton.innerHTML=e.SUBSCRIBE_BUTTON_LABEL,n.loginButton=document.createElement("button"),n.loginButton.className="login-button",n.loginButton.innerHTML=e.LOGIN_BUTTON_LABEL,n.watchLabel=document.createElement("div"),n.watchLabel.innerHTML=e.WATCH_PREMIUM_VIDEO_LABEL,n.watchLabel.className="watch-video-label",n.subscribeButtonContainer.appendChild(n.subscribeButton),n.subscribeButtonContainer.appendChild(n.loginButton),n.subscribeButtonContainer.appendChild(n.watchLabel),n.premiumvideoContainer.appendChild(n.subscribeButtonContainer),n.element.appendChild(n.premiumvideoContainer),n}return _i(e,a),e.prototype.show=function(){a.prototype.show.call(this),this.container.getService(Bs.analytics).omniture.trackOnce([R.BREACH_DISPLAYED],{eVar176:"standard"})},e.CSS_PREMIUM_VIDEO="vms-premium-video",e.CSS_HEADER="premium-header",e.CSS_DURATION="premium-duration",e.PREMIUM_CONTENT_LABEL="PREMIUM",e.WATCH_PREMIUM_VIDEO_LABEL="to watch the premium video",e.SUBSCRIBE_BUTTON_LABEL="Subscribe",e.LOGIN_BUTTON_LABEL="Log in",e}(N),vi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ai=function(a){function e(e){var i=a.call(this,document.createElement("div"))||this;return i.container=e,i.element.className=Ei.CSS_PREMIUM_VIDEO,i.headerContainer=document.createElement("div"),ks.addClass(i.headerContainer,Ei.CSS_HEADER),i.premiumLabel=document.createElement("div"),i.premiumLabel.innerHTML=Ei.PREMIUM_CONTENT_LABEL,i.premiumLabel.className="premium-content-label",i.duration=document.createElement("div"),i.duration.innerHTML="00:00",i.duration.className=Ei.CSS_DURATION,i.headerContainer.appendChild(i.premiumLabel),i.headerContainer.appendChild(i.duration),i.premiumvideoContainer=document.createElement("div"),i.premiumvideoContainer.className="premiumvideo-container",i.title=document.createElement("div"),i.title.className="title-container",i.premiumvideoContainer.appendChild(i.headerContainer),i.premiumvideoContainer.appendChild(i.title),i.element.appendChild(i.premiumvideoContainer),i.subscribeButtonContainer=document.createElement("div"),i.subscribeButtonContainer.className="subscribe-button-container",i.subscribeButton=document.createElement("button"),i.subscribeButton.className="subscribe-button",i.subscribeButton.innerHTML=Ei.SUBSCRIBE_BUTTON_LABEL,i.loginButton=document.createElement("button"),i.loginButton.className="login-button",i.loginButton.innerHTML=Ei.LOGIN_BUTTON_LABEL,i.watchLabel=document.createElement("div"),i.watchLabel.innerHTML=Ei.WATCH_PREMIUM_VIDEO_LABEL,i.watchLabel.className="watch-video-label",i.subscribeButtonContainer.appendChild(i.subscribeButton),i.subscribeButtonContainer.appendChild(i.loginButton),i.subscribeButtonContainer.appendChild(i.watchLabel),i.element.appendChild(i.premiumvideoContainer),i.ampTextContainer=document.createElement("div"),i.ampTextContainer.className="vms-premium-amp",i.ampTextContainer.innerHTML="<div>Become a member to access our premium video content</div>",i.premiumvideoContainer.appendChild(i.ampTextContainer),i}return vi(e,a),e.prototype.show=function(){a.prototype.show.call(this),this.container.getService(Bs.analytics).omniture.trackOnce([R.BREACH_DISPLAYED],{eVar176:"standard"})},e.CSS_PREMIUM_VIDEO="vms-premium-video",e.CSS_HEADER="premium-header",e.CSS_DURATION="premium-duration",e.PREMIUM_CONTENT_LABEL="PREMIUM",e.WATCH_PREMIUM_VIDEO_LABEL="to watch the premium video",e.SUBSCRIBE_BUTTON_LABEL="Subscribe",e.LOGIN_BUTTON_LABEL="Log in",e}(N),Ci=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Si=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.view=e.AMP_ENABLED?Ms.isAmp()?new Ai(t):new Ei(t):new Ei(t),n.events=new yi(t,n.view),n}return Ci(e,a),e.prototype.shouldDisplay=function(){var n=this.container.getService(Bs.context),e=!1;return n.capiVideo.accessType===l.ACCESS_TYPE_PREMIUM&&(ze.getStatusFromCookie()!==ze.USER_ANONYMOUS&&n.auth.currentRole!==ze.USER_ANONYMOUS||(e=!0)),Ms.getSearchParams().forcePremium&&(e=!0),e},e.prototype.getPremiumAdsSessionId=function(){var t=this.getService(Bs.context);return window.btoa("vms-premium-login-"+t.capiVideo)},e.prototype.setPremiumAdsSession=function(){var t=this.getService(Bs.context);sessionStorage.setItem(this.getPremiumAdsSessionId(),window.btoa("vms-premium-login-"+t.capiVideo))},e.prototype.shouldAdsBeDisabled=function(){var t=!1;return sessionStorage.getItem(this.getPremiumAdsSessionId())&&ze.getStatusFromCookie()===ze.USER_SUBSCRIBER&&(t=!0,sessionStorage.removeItem(this.getPremiumAdsSessionId())),t},e.pluginName="PLUGIN_PREMIUM_VIDEO",e.VMS_CLASS="vms-show-premium",e.AMP_ENABLED=!1,e}(A),hi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ti=function(a){function e(e,o,n){var i=a.call(this,document.createElement("div"))||this;return i.container=e,i.lightning=o,i.element.className=i.getClassName(),i.element.innerHTML=i.getDefaultContent(),i.appendTo(n),i.setEvents(),i}return hi(e,a),e.prototype.appendTo=function(t){t.appendChild(this.element)},e.className="",e}(N),Ni=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ii=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Ni(e,n),e.prototype.getClassName=function(){return e.className},e.prototype.getDefaultContent=function(){return e.defaultContent},e.prototype.setEvents=function(){var t=this;ks.onClickOnly(this.element,function(){t.container.getService(Bs.lightningPlayerOrchestrator).disposeAll()})},e.className="lp-close",e.defaultContent="X",e}(Ti),bi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pi=function(a){function e(t,n){var i=a.call(this,t,e.pluginName)||this;return i.enabled=!1,i.displayed=!1,i.element=document.createElement("div"),i.element.className=e.className,i.lightning=n,i.setEvents(),i}return bi(e,a),e.prototype.hasSubtitles=function(){return 0<this.getPlayer().textTracks().tracks_.filter(function(t){return"subtitles"===t.kind}).length},e.prototype.getPlayer=function(){var t;return(null===(t=this.lightning)||void 0===t?void 0:t.bcPlayer)||this.container.bcPlayer()},e.prototype.refreshState=function(){if(this.hasSubtitles()){this.displayed?ks.addClass(this.element,"active"):ks.removeClass(this.element,"active");for(var a=0,e=this.getPlayer().textTracks().tracks_,t;a<e.length;a++)if(t=e[a],"subtitles"===t.kind){t.mode=this.displayed?"showing":"disabled";break}}},e.prototype.setEvents=function(){var n=this;this.getPlayer().on("play",function(){n.getPlayer().one("timeupdate",function(){n.hasSubtitles()?(ks.removeClass(n.element,"cc-disabled"),"true"===window.sessionStorage.getItem(Be.STORAGE_NAME)?ks.addClass(n.element,"active"):ks.removeClass(n.element,"active")):ks.addClass(n.element,"cc-disabled")})}),this.lightning?(this.displayed="true"===window.sessionStorage.getItem(Be.STORAGE_NAME),ks.onClickOnly(this.element,function(){n.displayed=!n.displayed,window.sessionStorage.setItem(Be.STORAGE_NAME,""+n.displayed),n.refreshState()}),this.getPlayer().on("timeupdate",function(){return n.refreshState()})):ks.onClickOnly(this.element,function(){var e=n.container.getPluginInstance(Be.pluginName);e.events.clickHandler(),e.events.display?ks.addClass(n.element,"active"):ks.removeClass(n.element,"active")})},e.prototype.appendTo=function(t){t.appendChild(this.element)},e.pluginName="LP_PLUGIN_CAPTIONS",e.className="lp-captions cc-disabled",e}(A),wi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Li=function(a){function e(t,n){var i=a.call(this,t,e.pluginName)||this;return i.shaved=!1,i.element=document.createElement("div"),i.element.className=e.className,i.element.setAttribute("id","description-"+new Date().getTime()),i.lightning=n,i.overlay=document.createElement("div"),i.overlay.className="vms-description-overlay hidden-node",i.getPlayer().el_.appendChild(i.overlay),i.setEvents(),i}return wi(e,a),e.prototype.setEvents=function(){var n=this;this.lightning&&this.getPlayer().on("timeupdate",function(){if(!n.getPlayer().userActive_&&!ks.hasClass(n.overlay,"hidden-node")){ks.addClass(n.overlay,"hidden-node");var e=n.element.getAttribute("id");document.getElementById(e+"-link").classList.remove("seeless"),document.getElementById(""+e).classList.toggle("expanded"),n.getPlayer().el_.classList.remove("lp-description-expanded")}}),this.getPlayer().on("timeupdate",function(){var e=100-100*n.element.offsetHeight/n.getPlayer().el_.offsetHeight-5;n.getPlayer().el_.querySelector("video").style.setProperty("--webkit-media-text-track-container-maxheight",e+"%","important"),n.getPlayer().el_.querySelector(".vjs-text-track-display").style.setProperty("--webkit-media-text-track-container-maxheight",e+"%","important")})},e.prototype.getPlayer=function(){var t;return(null===(t=this.lightning)||void 0===t?void 0:t.bcPlayer)||this.container.bcPlayer()},e.prototype.appendTo=function(t){t.appendChild(this.element)},e.prototype.shorten=function(n){var e=n.indexOf("\n\n");return-1===e&&(e=255),n.slice(0,e)},e.prototype.refresh=function(n){var e=this;this.capiVideo=n,this.element.innerHTML=""+this.shorten(n.standfirst),this.lightning?this.getPlayer().one("play",function(){e.lightning&&(e.getPlayer().lastActive=new Date().getTime());try{e.shave()}catch(t){}}):this.shave()},e.prototype.shave=function(){if(!this.shaved){this.shaved=!0;var n=this.element.getAttribute("id");U("#"+n,60,{link:{href:"javascript:(function () {let description = document.getElementById('"+n+"');\n                            let link = document.getElementById('"+n+"-link'); \n                            let player =  document.getElementById('"+this.getPlayer().getAttribute("id")+"');\n                            if (player.classList.contains('vjs-user-active')) {    \n                                description.classList.toggle('expanded'); \n                                description.appendChild(link);\n                                link.classList.toggle('seeless');\n                                player.classList.toggle('lp-description-expanded');\n                                player.querySelector('.vms-description-overlay').classList.toggle('hidden-node');\n                            }})()",textContent:"See more",className:"seemore",id:n+"-link"}});var e="lp-title-"+new Date().getTime();this.element.innerHTML="<div class=\"lp-title\" id=\""+e+"\">"+this.capiVideo.title+"</div>"+this.element.innerHTML,U("#"+e,60,{classname:"title-shave"})}},e.pluginName="LP_PLUGIN_DESCRIPTION",e.className="lp-description",e}(A),Oi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fi=function(a){function e(t,n){var i=a.call(this,t,e.pluginName)||this;return i.element=document.createElement("div"),i.element.className=e.className,i.element.innerHTML="Live",i.lightning=n,i.setEvents(),i}return Oi(e,a),e.prototype.checkDisplay=function(){this.shouldDisplay()?this.show():this.hide()},e.prototype.getPlayer=function(){var t;return(null===(t=this.lightning)||void 0===t?void 0:t.bcPlayer)||this.container.bcPlayer()},e.prototype.setEvents=function(){var t=this;this.checkDisplay(),this.getPlayer().on("play",function(){t.checkDisplay()})},e.prototype.hide=function(){this.element.style.display="none"},e.prototype.show=function(){this.element.style.display="block"},e.prototype.appendTo=function(t){t.appendChild(this.element)},e.prototype.shouldDisplay=function(){return this.lightning?0>=this.lightning.capiVideo.duration:0>=this.container.player.videoDuration},e.pluginName="LP_PLUGIN_LIVE",e.className="lp-live",e}(A),Ri=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mi=function(a){function e(t,n){var i=a.call(this,t,e.pluginName)||this;return i.lightning=n,i.element=document.createElement("div"),i.element.className=e.className,i.element.innerHTML=e.defaultContent,(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(e.STORAGE_NAME))&&ks.addClass(i.element,"hidden-node"),i}return Ri(e,a),e.prototype.setEvents=function(){},e.prototype.appendTo=function(t){t.appendChild(this.element)},e.prototype.hide=function(){this.element.style.display="none"},e.prototype.show=function(){this.element.style.display="block"},e.pluginName="LP_PLUGIN_MUTE_TOOLTIP",e.STORAGE_NAME="vms-lp-mute-tooltip",e.className="lp-mute-tooltip",e.defaultContent="Click to unmute",e}(A),Di=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ki=function(a){function o(e,t){var n=a.call(this,e,o.pluginName)||this;return n.muted=!1,n.element=document.createElement("div"),n.element.className=o.className,localStorage.setItem(o.STORAGE_NAME,"true"),n.lightning=t,n.tooltip=new Mi(e,n.lightning),n.tooltip.appendTo(n.getPlayer().el_),n.setEvents(),n}return Di(o,a),o.prototype.getPlayer=function(){var t;return(null===(t=this.lightning)||void 0===t?void 0:t.bcPlayer)||this.container.bcPlayer()},o.prototype.toggleMute=function(a){var e,t;this.muted=a;var n=this.getPlayer();(n.muted(this.muted),n.ima3&&n.ima3.adPlayer&&n.ima3.adsManager&&(null===(t=null===(e=n.ima3)||void 0===e?void 0:e.adPlayer)||void 0===t||t.muted(this.muted)),this.lightning)&&(this.container.getPluginInstance(lo.pluginName).mute.muted=this.muted),this.getService(Bs.analytics).omniture.events.trackMuteStatus(this.muted)},o.prototype.mute=function(){ks.addClass(this.element,"lp-muted"),this.tooltip.show(),localStorage.setItem(o.STORAGE_NAME,"true"),this.toggleMute(!0)},o.prototype.unmute=function(){ks.removeClass(this.element,"lp-muted"),this.tooltip.hide(),localStorage.removeItem(o.STORAGE_NAME),this.toggleMute(!1)},o.prototype.checkMuteStatus=function(){var t=this.getPlayer(),n;if(t.ads.isAdPlaying()){var e=null===(n=t.ima3)||void 0===n?void 0:n.adPlayer;e&&e.muted()?(ks.addClass(this.element,"lp-muted"),localStorage.setItem(o.STORAGE_NAME,"true"),this.tooltip.show()):(ks.removeClass(this.element,"lp-muted"),localStorage.removeItem(o.STORAGE_NAME),this.tooltip.hide())}this.getPlayer().muted()?(ks.addClass(this.element,"lp-muted"),localStorage.setItem(o.STORAGE_NAME,"true"),this.tooltip.show()):(ks.removeClass(this.element,"lp-muted"),localStorage.removeItem(o.STORAGE_NAME),this.tooltip.hide())},o.prototype.setEvents=function(){var t=this,e=this.container.getService(Bs.eventManager);this.getPlayer().on("ready",function(){return t.checkMuteStatus()}),this.getPlayer().on("play",function(){return t.checkMuteStatus()}),this.getPlayer().on("timeupdate",function(){return t.checkMuteStatus()}),this.getPlayer().on("ima3-started",function(){return t.checkMuteStatus()}),ks.onClickOnly(this.element,function(){t.muted="true"===localStorage.getItem(o.STORAGE_NAME),localStorage.setItem(Mi.STORAGE_NAME,"true"),t.muted?(t.unmute(),e.trigger(t.container,o.EVENT_ON_UNMUTE,t.getPlayer()),localStorage.removeItem(o.STORAGE_NAME),t.container.bcPlayer().muted(!1)):(t.mute(),e.trigger(t.container,o.EVENT_ON_MUTE,t.getPlayer()),localStorage.setItem(o.STORAGE_NAME,"true"),t.container.bcPlayer().muted(!0))})},o.prototype.appendTo=function(t){t.appendChild(this.element)},o.pluginName="LP_PLUGIN_MUTE",o.className="lp-mute lp-muted",o.EVENT_ON_MUTE="EVENT_LP_ONMUTE",o.EVENT_ON_UNMUTE="EVENT_LP_ON_UNMUTE",o.STORAGE_NAME="vms-lp-mute",o}(A),Vi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bi=function(a){function e(t,n){var i=a.call(this,t,e.pluginName)||this;return i.element=document.createElement("div"),i.element.className=e.className,i.lightning=n,i.setEvents(),i}return Vi(e,a),e.prototype.getPlayer=function(){var t;return(null===(t=this.lightning)||void 0===t?void 0:t.bcPlayer)||this.container.bcPlayer()},e.prototype.setEvents=function(){var n=this;ks.onClickOnly(this.element,function(){var e=n.getPlayer();e.paused()?e.play():e.pause()})},e.prototype.appendTo=function(t){t.appendChild(this.element)},e.pluginName="LP_PLUGIN_PAUSE_AREA",e.className="lp-pause-area",e}(A),xi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ui=function(s){function e(){var t=s.call(this,document.createElement("div"))||this;t.element.className=e.CSS_NAME;var n=document.createElement("label");n.innerHTML="SHARE",t.element.appendChild(n),t.label=n;var i=document.createElement("a");i.className="rp-share-fb",t.element.appendChild(i),t.facebook=i;var r=document.createElement("a");r.className="rp-share-twitter",t.element.appendChild(r),t.twitter=r;var o=document.createElement("a");return o.className="rp-share-mail",t.element.appendChild(o),t.mail=o,t}return xi(e,s),e.prototype.attach=function(t){t.appendChild(this.element)},e.CSS_NAME="rp-share",e}(N),Hi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gi=function(a){function e(){var t=a.call(this,document.createElement("table"))||this;t.element.className=e.CSS_CLASS;var n=document.createElement("tr");t.element.appendChild(n),t.spinnerContainer=document.createElement("td"),n.appendChild(t.spinnerContainer),t.playingIn=document.createElement("td"),t.playingIn.className="rp-plays-in",n.appendChild(t.playingIn),t.refresh(10);var i=document.createElement("td");return i.className="rp-cancel-td",t.cancel=document.createElement("div"),t.cancel.className="rp-cancel",t.cancel.innerHTML="Cancel",i.appendChild(t.cancel),n.appendChild(i),t}return Hi(e,a),e.prototype.refresh=function(t){this.playingIn.innerHTML="Playing in "+t+" seconds"},e.CSS_CLASS="rp-recommendations-up-next",e}(N),Yi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wi=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;n.container=t,n.element.className=e.CSS_CLASS,n.container.getService(Bs.context).useMobileUi()&&ks.removeClass(n.element,"rp-end-state");var i=document.createElement("div");i.className="rp-end-state-bg",n.element.appendChild(i),n.metaDataContainer=document.createElement("div"),n.metaDataContainer.className="rp-metadata-container";var r=document.createElement("div");r.innerHTML="<h5 class=\"rp-watched\">You just watched</h5>",n.metaDataContainer.appendChild(r);var o=document.createElement("div");o.className="currently-watching",o.innerHTML="<h5 class=\"rp-watching\">You're watching</h5>";var s=n.container.getService(Bs.environment);-1<Ds.PREMIUM_VIDEO_SITES.indexOf(s.getDomain())&&(n.premium=document.createElement("div"),n.premium.innerText="PREMIUM",n.premium.className="vms-premium-tag",o.appendChild(n.premium)),n.metaDataContainer.appendChild(o),n.justWatched=r,n.videoTitle=document.createElement("div"),n.videoTitle.innerHTML="video title",n.videoTitle.className="rp-end-state-title",n.metaDataContainer.appendChild(n.videoTitle),n.watchAgainContainer=document.createElement("div"),n.watchAgainContainer.className="rp-watch-again";var l=document.createElement("button");l.className="rp-watch-again-button",l.innerHTML="Watch again",n.watchAgainContainer.appendChild(l),n.watchButton=l,n.metaDataContainer.appendChild(n.watchAgainContainer);var c=document.createElement("div");c.className="rp-continue-play";var d=document.createElement("button");return d.className="rp-continue-play-button",d.innerHTML="Continue watching",c.appendChild(d),n.continueButton=d,n.metaDataContainer.appendChild(c),n.element.appendChild(n.metaDataContainer),n.upNext=new Gi,n}return Yi(e,a),e.prototype.attach=function(t){this.hide(),t.appendChild(this.element)},e.prototype.refresh=function(a){var e=this.container.getService(Bs.context),t=this.container.view.element.hasAttribute("vms-title")&&this.container.view.element.getAttribute("vms-title");this.videoTitle.innerHTML=e.firstPlay&&t||a.title,this.premium&&(a.accessType===l.ACCESS_TYPE_PREMIUM?this.premium.style.display="inline-block":this.premium.style.display="none")},e.prototype.show=function(){this.refresh(this.container.getService(Bs.context).capiVideo),a.prototype.show.call(this),ks.addClass(this.container.view.wrapper,"vms-end-state")},e.prototype.hide=function(){a.prototype.hide.call(this),ks.removeClass(this.container.view.wrapper,"vms-end-state")},e.CSS_CLASS="rp-end-state",e}(N),Fi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ki=function(a){function s(e){var t=a.call(this,e,s.pluginName)||this;t.progressMouseDown=!1;var n=t.getService(Bs.environment),i=t.getService(Bs.context);return n.browser.isMobile()||i.useMobileUi()||t.setEvents(),i.isVertical()&&t.setEvents(),t}return Fi(s,a),s.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);e.addSingleEventListener(this.container,"play",function(){setTimeout(function(){e.addListener(a.container,"pause",function(){var e=a.container.getPluginInstance(Xn.pluginName);if(!e.castingEnabled||!e.provider.isCasting()){var t=a.container.getPluginInstance(ar.pluginName);if(t.view.refresh(a.getService(Bs.context).capiVideo),!a.progressMouseDown&&!a.container.bcPlayer().ended()&&a.container.bcPlayer().paused()){ks.addClass(a.container.view.wrapper,"vjs-pause-state"),ks.addClass(t.view.element,s.CSS_CLASS),t.view.show();var n=a.container.getPluginInstance(Ie.pluginName);n&&(n.view.showList(),ks.addClass(n.view.recommendations.list,s.CSS_CLASS),ks.addClass(n.view.trending.list,s.CSS_CLASS))}}})},500)}),e.addListener(this.container,"ready",function(){for(var e=0,t=[a.container.bcPlayer().controlBar.progressControl.el_,a.container.bcPlayer().controlBar.progressControl.seekBar.el_],n;e<t.length;e++)n=t[e],n.onmousedown=function(){a.progressMouseDown=!0},n.ontouchstart=function(){a.progressMouseDown=!0},n.onmouseup=function(){a.progressMouseDown=!1},n.ontouchend=function(){a.progressMouseDown=!1}}),e.addListener(this.container,"playing",function(){ks.removeClass(a.container.view.wrapper,"vjs-pause-state");var e=a.container.getPluginInstance(Ie.pluginName);e&&e.view&&(e.view.hideList(),ks.removeClass(e.view.recommendations.list,s.CSS_CLASS))})},s.pluginName="PLUGIN_PAUSE_STATE",s.CSS_CLASS="rp-pause-state",s}(A),ji=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xi=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.getElement().className=e.MAIN_CSS_CLASS,ks.addClass(n.element,e.CONTAINER_CSS_CLASS),n.metadataContainer=document.createElement("div"),n.metadataContainer.className="es-metadata-container",n.label=document.createElement("div"),n.label.innerHTML=e.UP_NEXT_LABEL,n.label.className="es-up-next-label",n.title=document.createElement("div"),n.title.className="es-title-container",n.metadataContainer.appendChild(n.label),n.metadataContainer.appendChild(n.title),n.getElement().appendChild(n.metadataContainer),n.playButton=document.createElement("div"),n.playButton.className="es-play-button-container",n.spinner=new Gt(t),n.playButton.appendChild(n.spinner.element),n.cancelButtonContainer=document.createElement("div"),n.cancelButtonContainer.className="es-cancel-button-container",n.cancelButton=document.createElement("button"),n.cancelButton.className="es-cancel-button",n.cancelButton.innerHTML=e.CANCEL_BUTTON_LABEL,n.cancelButtonContainer.appendChild(n.cancelButton),n.playButton.appendChild(n.cancelButtonContainer),n.replayButtonContainer=document.createElement("div"),n.replayButtonContainer.className="es-replay-button-container hidden-node",n.replayButton=document.createElement("button"),n.replayButton.className="es-replay-button",n.replayButtonContainer.appendChild(n.replayButton),n.playButton.appendChild(n.replayButtonContainer),n.getElement().appendChild(n.playButton),n}return ji(e,a),e.MAIN_CSS_CLASS="vms-mobile-end-state",e.CONTAINER_CSS_CLASS="vms-mobile-end-state-container hidden-node",e.UP_NEXT_LABEL="Up Next",e.REPLAY_LABEL="Replay",e.CANCEL_BUTTON_LABEL="Cancel",e}(ee),zi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qi=function(a){function e(e,r){var n=a.call(this,e)||this;return n.view=r,n.setEvents(),n}return zi(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager),r=this.container.getService(Bs.context),n=this.container.getService(Bs.environment);e.addCustomListener(this.container,qo.BC_READY,function(){return a.container.view.wrapper.appendChild(a.view.element)}),e.addListener(this.container,"play",function(){return ks.addClass(a.view.element,"hidden-node")}),e.addCustomListener(this.container,Se.UPDATE_UP_NEXT_MARKER,function(i){a.view.getElement().parentElement.style.backgroundImage="",a.view.title.innerHTML="";var e=a.container.getPluginInstance(Ee.pluginName).events.playlistItems.find(function(t){return!t.played&&t.id===i});(e&&e.capiVideo&&e.capiVideo.poster&&(a.view.getElement().parentElement.style.backgroundImage="url('"+e.capiVideo.poster+"')"),e&&e.capiVideo&&e.capiVideo.title)&&(a.view.title.innerHTML=""+e.capiVideo.title,M.truncateDescription(a.view.title,qi.MOBILE_TITLE_LENGTH_HEIGHT),a.container.getPluginInstance(bt.pluginName).descriptionView.withCapiVideo(e.capiVideo))}),e.addCustomListener(this.container,Ee.PLAYLIST_ENDED,function(){a.cancelCountdown(),a.showReplayButton()}),e.addListener(this.container,"ended",function(){if(ks.removeClass(a.view.element,"hidden-node"),r&&!r.hasRecommendations||n.isNewsHub()){var e=r.capiVideo;e&&e.poster&&(a.view.getElement().parentElement.style.backgroundImage="url('"+e.poster+"')"),e&&e.title&&(a.view.title.innerHTML=e.title,M.truncateDescription(a.view.title,qi.MOBILE_TITLE_LENGTH_HEIGHT)),a.cancelCountdown(),a.showReplayButton()}else ks.removeClass(a.view.spinner.element,"hidden-node"),ks.removeClass(a.view.cancelButtonContainer,"hidden-node"),ks.addClass(a.view.replayButtonContainer,"hidden-node"),a.view.label.innerHTML=Xi.UP_NEXT_LABEL}),ks.onClickOnly(this.view.cancelButton,function(){a.cancelCountdown(),a.view.title.innerHTML=r.capiVideo.title,M.truncateDescription(a.view.title,qi.MOBILE_TITLE_LENGTH_HEIGHT,!1),a.container.getPluginInstance(bt.pluginName).descriptionView.withCapiVideo(r.capiVideo,!1),a.showReplayButton()}),ks.onClick(this.view.spinner.playButton,function(){ks.addClass(a.view.spinner.element,"hidden-node"),ks.addClass(a.view.cancelButtonContainer,"hidden-node"),a.cancelCountdown(),e.trigger(a.container,Ee.PLAYLIST_SKIP_VIDEO_EVENT)}),ks.onClick(this.view.spinner.playButton,function(){var e=a.container.getPluginInstance(An.pluginName);e.duration=0,e.decrease()}),ks.onClick(this.view.replayButton,function(){a.getService(Bs.analytics).omniture.track([R.WATCH_AGAIN]),r.currentlyPlayingMobileItem&&r.currentlyPlayingMobileItem.id?e.trigger(a.container,Se.ITEM_PLAYED_THROUGH_REPLAY_BUTTON,r.currentlyPlayingMobileItem.id):a.container.bcPlayer().play()})},e.prototype.cancelCountdown=function(){var t=this.getService(Bs.eventManager);this.getService(Bs.analytics).omniture.track([R.COUNTDOWN_PAUSED_IN_PLAYLIST]),t.trigger(this.container,Ji.EVENT_CANCEL),this.container.getPluginInstance(An.pluginName).forceStop()},e.prototype.showReplayButton=function(){ks.addClass(this.view.spinner.element,"hidden-node"),ks.addClass(this.view.cancelButtonContainer,"hidden-node"),ks.removeClass(this.view.replayButtonContainer,"hidden-node"),this.view.label.innerHTML=Xi.REPLAY_LABEL},e}(u),$i=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qi=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable(!0)&&(n.view=new Xi(t),n.events=new Qi(t,n.view)),n}return $i(e,a),e.pluginName="MOBILE_END_STATE_PLUGIN",e.MOBILE_TITLE_LENGTH_HEIGHT=47,e}(ce),Zi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ji=function(a){function i(e,o,n){var i=a.call(this,e)||this;return i.view=o,i.mobileView=n,i.setEvents(),i.upNext=i.container.getPluginInstance(Ie.pluginName),i}return Zi(i,a),i.prototype.setEvents=function(){var c=this,e=this.getService(Bs.eventManager);e.addListener(this.container,"ready",function(){var t=c.container.getService(Bs.environment),n=c.getService(Bs.context);t.browser.isMobile()&&n.useMobileUi()||(c.view.attach(c.container.bcPlayer().el_),c.mobileView.prepend(c.upNext.view.recommendations.element)),ks.onClickOnly(c.view.metaDataContainer,function(){ks.hasClass(c.view.getElement(),"rp-pause-state")?c.container.bcPlayer().play():(c.container.bcPlayer().controlBar.playToggle?c.container.bcPlayer().controlBar.playToggle.handleClick():(c.container.bcPlayer().currentTime(0),c.container.bcPlayer().play()),c.getService(Bs.analytics).omniture.track([R.WATCH_AGAIN]),c.countDown.events.pause(),ks.addClass(c.view.upNext.element,"autoplay-cancelled"),c.upNext.view.hideList()),e.trigger(c.container,i.EVENT_ENDSTATE_METADATA_CLICK)})}),e.addListener(this.container,"play",function(){c.view.hide(),c.mobileView.refresh(c.getService(Bs.context).capiVideo)}),e.addCustomListener(this.container,Te.UP_NEXT_CLICK,function(){c.countDown&&(c.countDown.view.removefromDom(),c.countDown.events.pause(),c.countDown=null),ks.addClass(c.view.upNext.element,"autoplay-cancelled")}),e.addListener(this.container,"ended",function(){var t=c.getService(Bs.environment),n=c.getService(Bs.context),r;if(t.browser.isMobile()||n.useMobileUi()||(ks.removeClass(c.view.upNext.element,"autoplay-cancelled"),c.countDown&&(c.countDown.view.removefromDom(),c.countDown=null),c.countDown=new An(c.container,10,An.MODE_ENHANCED),ks.onClick(c.countDown.view.element,function(){c.countDown.mode===An.MODE_REGULAR&&e.trigger(c.container,i.EVENT_CANCEL)})),c.getService(Bs.context).canAutoplay()?ks.removeClass(c.container.view.element,"vms-autoplay-disabled"):ks.addClass(c.container.view.element,"vms-autoplay-disabled"),ks.removeClass(c.view.element,Ki.CSS_CLASS),ks.removeClass(c.upNext.view.recommendations.list,Ki.CSS_CLASS),ks.removeClass(c.upNext.view.trending.list,Ki.CSS_CLASS),(t.browser.isMobile()||n.useMobileUi())&&0===c.upNext.view.recommendations.items.length&&ks.removeClass(c.container.view.wrapper.children[0],"vjs-ended"),c.view.show(),c.upNext.view.showList(),c.upNext.view.trending.view&&(ks.addClass(c.upNext.view.trending.view.getElement(),"up-next-countdown-container"),e.addListener(c.container,"play",function(){ks.removeClass(c.upNext.view.trending.view.getElement(),"up-next-countdown-container")})),t.browser.isMobile()||n.useMobileUi()){var o=c.container.getPluginInstance(Ee.pluginName),a=null===(r=null==o?void 0:o.events)||void 0===r?void 0:r.playlistItems,s=c.container.serviceProvider.get(Bs.eventManager);if(a&&0<a.length&&n.mobilePlaylistItems&&0<n.mobilePlaylistItems.length)for(var l=function(i){var e=a.find(function(t){return!t.played&&t.capiVideo&&t.capiVideo.id===n.mobilePlaylistItems[i]});if(e)return s.trigger(c.container,Se.UPDATE_UP_NEXT_MARKER,e.id),"break"},m=0;m<n.mobilePlaylistItems.length&&!("break"===l(m));m++);}else{if(n.sticky&&n.hasRecommendations){var d=c.upNext.view.recommendations.items[0],p=c.container.getPluginInstance(qi.pluginName).view;p.getElement().parentElement.style.backgroundImage="url('"+d.capiVideo.poster+"')",p.title.innerHTML=""+d.capiVideo.title,M.truncateDescription(p.title,qi.MOBILE_TITLE_LENGTH_HEIGHT)}c.moveCountDown()}}),e.addCustomListener(this.container,Xt.EVENT_DECREASED,function(e){c.view.upNext.refresh(e)}),e.addCustomListener(this.container,j.EVENT_ITEM_NOT_VISIBLE,function(){c.countDown&&!c.countDown.events.manuallyPaused&&c.countDown.events.pause(),e.addSingleCustomListener(c.container,j.EVENT_ITEM_VISIBLE,function(){c.countDown&&!c.countDown.events.manuallyPaused&&c.countDown.reset()})}),e.addCustomListener(this.container,i.EVENT_CANCEL,function(){c.countDown&&c.countDown.events.pause(),ks.addClass(c.view.upNext.element,"autoplay-cancelled")}),ks.onClick(this.view.upNext.cancel,function(){c.container.getService(Bs.analytics).omniture.track([R.COUNTDOWN_PAUSED_IN_PLAYLIST]),c.countDown.events.manuallyPaused=!0,e.trigger(c.container,i.EVENT_CANCEL),c.upNext.view.recommendations.items[0]&&c.upNext.view.recommendations.items[0].cancel&&ks.addClass(c.upNext.view.recommendations.items[0].cancel,"hidden-node")}),ks.onClick(this.mobileView.resume,function(){c.container.player.getBCPlayer().paused()&&c.container.bcPlayer().play()}),ks.onClick(this.mobileView.play,function(){c.container.player.getBCPlayer().paused()&&c.container.bcPlayer().play()})},i.prototype.moveCountDown=function(){if(this.container.getService(Bs.eventManager).trigger(this.container,tn.EVENT_COUNTDOWN_REGULAR_STYLE),this.upNext.view.recommendations.items[0]){this.countDown.element=this.view.upNext.spinnerContainer,this.upNext.view.recommendations.items[0].image.insertBefore(this.view.upNext.element,this.upNext.view.recommendations.items[0].image.firstChild);var n=this.upNext.view.recommendations.items[0],e=n.element.parentNode;try{n.element.parentNode.removeChild(n.element),e.insertBefore(n.element,e.firstChild)}catch(t){}}},i.EVENT_CANCEL="EVENT_CANCEL_UPNEXT",i.EVENT_ENDSTATE_METADATA_CLICK="EVENT_ENDSTATE_METADATA_CLICK",i}(u),er=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),tr=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;n.element.className=e.CSS_NAME,n.container=t;var i=document.createElement("div");return i.className="rp-now-playing-label",i.innerHTML="NOW PLAYING",n.element.appendChild(i),n.resume=document.createElement("div"),n.resume.className="rp-resume",n.resume.innerHTML="Resume",n.element.appendChild(n.resume),n.play=document.createElement("div"),n.play.className="rp-now-playing-play",n.element.appendChild(n.play),n.titleContainer=document.createElement("div"),n.titleContainer.className="rp-now-playing-title-container",n.title=document.createElement("div"),n.title.className="rp-now-playing-title",n.title.innerHTML="...",n.titleContainer.appendChild(n.title),n.duration=document.createElement("div"),n.duration.className="rp-now-playing-duration",n.duration.innerHTML="2:32",n.titleContainer.appendChild(n.duration),n.element.appendChild(n.titleContainer),n}return er(e,a),e.prototype.prepend=function(n){if(0===n.children.length)n.appendChild(this.element);else{var e=n.children[0];n.insertBefore(this.element,e)}},e.prototype.refresh=function(t){this.title.innerHTML=M.truncate(t.title,75),this.duration.innerHTML=M.formatDuration(t.duration/1e3)},e.CSS_NAME="rp-now-playing",e}(N),nr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ar=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.view=new Wi(t),n.mobileView=new tr(t),n.events=new Ji(t,n.view,n.mobileView),n}return nr(e,a),e.pluginName="PLUGIN_ENDSTATE",e}(A),ir=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),rr=function(a){function e(e){var i=a.call(this,e)||this;return i.title="",i}return ir(e,a),e.prototype.set=function(a,e){this.title=e;var t=this.getService(Bs.environment);return this.url="facebook"===a?"http://www.facebook.com/sharer.php?u="+encodeURIComponent(t.pageUrl)+"&t="+this.title:"http://twitter.com/share?url="+encodeURIComponent(t.pageUrl)+"&text="+this.title,this.title=e,this},e.prototype.show=function(){var a=window.innerWidth||document.documentElement.clientWidth||screen.width,e=window.innerHeight||document.documentElement.clientHeight||screen.height,t=(a-550)/2+(void 0===window.screenLeft?screen.left:window.screenLeft),n=(e-300)/2+(void 0===window.screenTop?screen.top:window.screenTop),i=window.open(this.url,"standalone"in window.navigator&&window.navigator.standalone?"_blank":"Share","width=550px,height=300px,left="+t+"px,top="+n+"px,resizeable,scrollbars");i&&i.focus&&i.focus()},e}(u),or=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),sr=function(a){function n(e,r){var n=a.call(this,e)||this;return n.view=r,n.popup=new rr(e),n.setEvents(),n}return or(n,a),n.prototype.setEvents=function(){var t=this;this.getService(Bs.eventManager).addSingleEventListener(this.container,"play",function(){var e=t.container.getPluginInstance(ar.pluginName);t.view.attach(e.view.element);var a=t.getService(Bs.analytics);ks.onClick(t.view.facebook,function(){a.omniture.track([R.SOCIAL_SHARING],{eVar43:n.FACEBOOK}),t.popup.set(n.FACEBOOK,t.getService(Bs.context).capiVideo.title).show()}),ks.onClick(t.view.twitter,function(){a.omniture.track([R.SOCIAL_SHARING],{eVar43:n.TWITTER}),t.popup.set(n.TWITTER,t.getService(Bs.context).capiVideo.title).show()});var i=t.getService(Bs.environment).pageUrl,r=t.getService(Bs.context).capiVideo.title;t.view.mail.setAttribute("href","mailto:?subject=Watch: "+r+"&body=I recommend you watch "+r+", watch it here "+i),t.view.mail.setAttribute("target","_blank"),ks.onClick(t.view.mail,function(){a.omniture.track([R.SOCIAL_SHARING],{eVar43:n.MAIL})})})},n.FACEBOOK="facebook",n.TWITTER="twitter",n.MAIL="email",n}(u),lr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),cr=function(a){function e(t){var n=this;return-1===Ms.getDomain().indexOf(Ds.KIDSNEWS)&&((n=a.call(this,t,e.pluginName)||this).view=new Ui,n.events=new sr(t,n.view)),n}return lr(e,a),e.pluginName="PLUGIN_SHARING_LINKS",e}(A),dr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pr=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.container=t,n.element.className=e.CSS_NAME,n.hide(),n.iconContainer=document.createElement("div"),n.iconContainer.className="vms-vertical-share-icon-container",n.close=document.createElement("div"),n.close.className="vms-vertical-share-popup-close",n.close.innerHTML="X",n.element.appendChild(n.close),n.title=document.createElement("div"),n.title.className="vms-vertical-share-popup-title",n.title.innerHTML="Share to",n.element.appendChild(n.title),n.copyLink=document.createElement("div"),n.copyLink.className="vms-vertical-share-icon vms-vertical-share-popup-copy",n.copyLink.innerHTML="",n.iconContainer.appendChild(n.copyLink),n.emailLink=document.createElement("div"),n.emailLink.className="vms-vertical-share-icon vms-vertical-share-popup-email",n.emailLink.innerHTML="",n.iconContainer.appendChild(n.emailLink),n.twitterLink=document.createElement("div"),n.twitterLink.className="vms-vertical-share-icon vms-vertical-share-popup-twitter",n.twitterLink.innerHTML="",n.iconContainer.appendChild(n.twitterLink),n.facebookLink=document.createElement("div"),n.facebookLink.className="vms-vertical-share-icon vms-vertical-share-popup-facebook",n.facebookLink.innerHTML="",n.iconContainer.appendChild(n.facebookLink),n.element.appendChild(n.iconContainer),n.setEvents(),n}return dr(e,a),e.prototype.setEvents=function(){var n=this;ks.onClick(this.close,function(){n.hide();var e=n.container.getService(Bs.lightningPlayerOrchestrator);e.current.bcPlayer.play(),e.current.view.element.style.opacity=1}),ks.onClickOnly(this.copyLink,function(){var e=document.createElement("input");e.style.display="none",document.body.appendChild(e),e.value=window.location.href,e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),navigator.clipboard.writeText(window.location.href),ks.addClass(n.copyLink,"copied"),setTimeout(function(){ks.removeClass(n.copyLink,"copied")},2e3)}),ks.onClickOnly(this.emailLink,function(){n.container.getPluginInstance(cr.pluginName).view.mail.click()}),ks.onClickOnly(this.facebookLink,function(){n.container.getPluginInstance(cr.pluginName).view.facebook.click()}),ks.onClickOnly(this.twitterLink,function(){n.container.getPluginInstance(cr.pluginName).view.twitter.click()})},e.prototype.appendTo=function(t){t.appendChild(this.element)},e.CSS_NAME="vms-vertical-share-popup",e}(N),mr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ur=function(a){function e(t,n){var i=a.call(this,document.createElement("div"))||this;if(i.element.className=e.CSS_CLASS,i.lightning=n,i.container=t,i.setEvents(),i.container.getService(Bs.environment).browser.isDesktop()){var r=i.container.getService(Bs.lightningPlayerOrchestrator);i.appendTo(r.overlay),i.popup=new pr(i.container),i.popup.appendTo(r.overlay)}else i.lightning&&i.appendTo(i.lightning.bcPlayer.el_);return i}return mr(e,a),e.prototype.close=function(){this.container.getService(Bs.lightningPlayerOrchestrator).disposeAll()},e.prototype.checkShareVisibility=function(a){var e;void 0===a&&(a=!1);var t=this.container.getPluginInstance(lo.pluginName),n=this.container.getService(Bs.lightningPlayerOrchestrator);this.element.style.display=t.canonicalVideo===(null===(e=n[a?"next":"previous"])||void 0===e?void 0:e.capiVideo)?"block":"none"},e.prototype.checkCurrentVisibility=function(){var a=this.container.getPluginInstance(lo.pluginName),t=this.container.getService(Bs.lightningPlayerOrchestrator),n;this.element.style.display=a.canonicalVideo===(null===(n=t.current)||void 0===n?void 0:n.capiVideo)?"block":"none"},e.prototype.setEvents=function(){var a=this,e=this.container.getService(Bs.eventManager),t=this.container.getService(Bs.lightningPlayerOrchestrator);e.addCustomListener(this.container,_r.EVENT_SWIPE_UP,function(){a.checkShareVisibility(!0)}),e.addCustomListener(this.container,_r.EVENT_SWIPE_DOWN,function(){a.checkShareVisibility()}),e.addCustomListener(this.container,qn.EVENT_ENTER_FULLSCREEN,function(){return a.checkCurrentVisibility()}),ks.onClick(this.element,function(){navigator&&navigator.share?navigator.share({title:document.title,text:"I recommend you watch "+document.title,url:window.location.href}):(a.popup.show(),t.current.bcPlayer.pause(),t.current.view.element.style.opacity="0.5")})},e.prototype.appendTo=function(t){t.appendChild(this.element)},e.CSS_CLASS="vms-vertical-share",e}(N),gr=function(){function t(a,i){var t=this;this.container=a,this.lightning=i,this.element=document.createElement("div"),this.element.className="rp-end-state-container",this.endStateView=new Wi(a),this.endStateView.attach(this.element),this.endStateView.element.style.removeProperty("display"),ks.onClickOnly(this.endStateView.watchButton,function(){t.getPlayer().currentTime(0),t.getPlayer().play()})}return t.prototype.getPlayer=function(){var t;return(null===(t=this.lightning)||void 0===t?void 0:t.bcPlayer)||this.container.bcPlayer()},t.prototype.refresh=function(t){this.endStateView.refresh(t)},t.prototype.appendTo=function(t){t.appendChild(this.element)},t}(),yr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),_r=function(a){function r(e,r){var n=a.call(this,e)||this;return n.touchmove=!1,n.className=r,n.getService(Bs.environment).browser.isMobile()&&(n.className+=" mobile"),n.id="lp-"+new Date().getTime(),n.element=document.createElement("video-js"),n.element.setAttribute("id",n.id),n.element.setAttribute("data-embed","default"),n.element.setAttribute("controls","controls"),n.element.setAttribute("playsinline","playsinline"),n.element.className="lightning-player "+n.className,n.observer=new re.ResizeObserver(function(){n.fitDisplay()}),n.observer.observe(window.document.body),n}return yr(r,a),r.prototype.fitDisplay=function(){var n=window.innerHeight,e=9*n/16;e>window.innerWidth?(this.element.style.height="100%",this.element.style.left="0"):(this.element.style.height=n+"px",this.element.style.width=e+"px",this.element.style.marginLeft="-"+e/2+"px")},r.prototype.show=function(n){var e=this;this.player=n,this.registerComponents(),this.detectSwipe(),this.player.bcPlayer.on("loadedmetadata",function(){e.element.style.opacity="1",e.player.bcPlayer.el_.style.background="black"}),this.element.onmouseover=function(){e.player.lastActive=new Date().getTime()}},r.prototype.registerComponents=function(){var n=this.getService(Bs.environment);this.pauseArea=new Bi(this.container,this.player),this.pauseArea.appendTo(this.player.bcPlayer.el_),this.closeButton=new Ii(this.container,this.player,this.player.bcPlayer.el_),this.captions=new Pi(this.container,this.player),this.captions.appendTo(this.player.bcPlayer.el_),this.description=new Li(this.container,this.player),this.description.appendTo(this.player.bcPlayer.el_);var e=this.container.getPluginInstance(lo.pluginName);this.player.capiVideo!==e.canonicalVideo||n.browser.isDesktop()||(this.share=new ur(this.container,this.player),ks.addClass(this.description.element,"has-share-icon")),this.description.refresh(this.player.capiVideo),this.element.setAttribute("capi-id",this.player.capiVideo.id),this.live=new fi(this.container,this.player),this.live.appendTo(this.player.bcPlayer.el_),this.mute=new ki(this.container,this.player),this.mute.appendTo(this.player.bcPlayer.el_),this.player.bcPlayer.muted(this.container.bcPlayer().muted()),this.mute.checkMuteStatus()},r.prototype.addEndState=function(){var a=this;if(!this.endState){this.endState=new gr(this.container,this.player),this.endState.appendTo(this.player.bcPlayer.el_),this.endState.refresh(this.player.capiVideo);var e=this.container.getPluginInstance(lo.pluginName).recommendations;e.appendTo(this.endState.element),this.getService(Bs.eventManager).addCustomListener(this.container,qn.EVENT_CLOSE_FULLSCREEN,function(){var t=a.container.getPluginInstance(ar.pluginName);e.appendTo(t.view.element)})}},r.prototype.detectSwipe=function(){var s=this,e=this.player.bcPlayer.el_,t=this.container.getService(Bs.eventManager),n=this.container.getService(Bs.lightningPlayerOrchestrator),i=0,o=0;e.addEventListener("touchmove",function(e){s.touchmove=!0,"lp-recommendation-item-image"!==e.target.className&&t.trigger(s.container,r.EVENT_SWIPE_MOVE,e.changedTouches[0].screenY)}),e.addEventListener("touchstart",function(e){setTimeout(function(){if(s.touchmove){try{n.next.bcPlayer.play().then(function(){n.next.bcPlayer.pause()})}catch(t){}try{n.previous.bcPlayer.play().then(function(){n.previous.bcPlayer.pause()})}catch(t){}}},50),1<e.touches.length&&e.preventDefault(),i=e.changedTouches[0].screenY,s.touchStartY=i},!1),e.addEventListener("touchend",function(e){setTimeout(function(){return s.touchmove=!1},50),o=e.changedTouches[0].screenY,t.trigger(s.container,r.EVENT_SWIPE_END,o),Rs(i-o),o<i&&r.PIXELS_SWIPE_THRESHOLD,o>i&&r.PIXELS_SWIPE_THRESHOLD},!1)},r.prototype.hide=function(){this.element.style.opacity="0"},r.EVENT_SWIPE_UP="LP_EVENT_SWIPE_UP",r.EVENT_ON_INTERACT="LP_EVENT_ON_INTERACT",r.EVENT_AUTO_SWIPES="LP_EVENT_AUTO_SWIPES",r.EVENT_SWIPE_DOWN="LP_EVENT_SWIPE_DOWN",r.EVENT_SWIPE_MOVE="LP_EVENT_SWIPE_MOVE",r.EVENT_SWIPE_END="LP_EVENT_SWIPE_END",r.EVENT_REFRESH_VIEW="EVENT_REFRESH_LP_VIEW",r.PIXELS_SWIPE_THRESHOLD=85,r}(u),Er={sit:3207,uat:3207,beta:5591,prod:5591},vr=function(){function t(){}return t.get=function(t){return Er[t.name]},t}(),Ar=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cr=function(r){function e(e,l){var n=r.call(this,e)||this;n.baseUrl="http://pubads.g.doubleclick.net/gampad",n.gdfp_req=1,n.impl="s",n.output="xml_vast4",n.unviewed_position_start=1,n.url="",n.correlator="[timestamp]",n.hl="en",n.cmsid="3207",n.description_url="",n.ad_rule=1,n.pvid="",n.env="vp",n.path="/adx";var i=n.getService(Bs.environment),o=n.getService(Bs.context);l&&"ads"!==l||(n.sz=o.isVertical()?"240x427":"427x240",n.env="vp",n.path="/ads"),n.custom_params=new et(e),"beta"===i.getEnvName()&&!0===o.sticky&&(n.sticky="true");var a=Ms.getSearchParams();return n.iu=a.iu||window.ads_api&&window.ads_api.uname||"",n.cmsid=""+vr.get(i),n.description_url=n.url=encodeURIComponent(i.pageUrl),n}return Ar(e,r),e.prototype.setBCPlayer=function(t){this.custom_params.setBCPlayer(t)},e.prototype.setVideoId=function(t){this.vid=t},e.prototype.toQueryString=function(){for(var a="",e=0,t=Object.getOwnPropertyNames(this),n;e<t.length;e++)switch(n=t[e],n){case"baseUrl":case"path":case"serviceProvider":case"container":break;case"custom_params":a+="cust_params="+this.custom_params.get()+"&";break;case"sticky":a+="pp=Desktop%20Sticky%20Player&";break;default:a+=n+"="+this[n]+"&";}return a.replace(/\&+$/,"")},e.prototype.get=function(){return""+this.baseUrl+this.path+"?"+this.toQueryString()},e}(u),Sr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),hr=function(a){function l(e,r){var n=a.call(this,e)||this;return n.enabled=!0,n.score=-1,n.tracked=!1,n.requested=!1,n.ads_api=r,n}return Sr(l,a),l.prototype.initiateBids=function(n){if(this.score=0,this.ads_api&&this.enabled&&this.ads_api.requestVideoBids){this.requested=!0;var a=n?!n:this.container.bcPlayer().muted();this.ads_api.requestVideoBids(this.container.player.element.id,a),this.score++}},l.prototype.getVideoBids=function(){if(this.ads_api&&this.enabled&&this.ads_api.getVideoBids&&this.requested)return this.requested=!1,this.score++,this.ads_api.getVideoBids(this.container.player.element.id)},l.prototype.get=function(){if(!this.requested)throw"Bid was not requested";var t=this.getVideoBids()||"",e={};if(-1===t.indexOf(l.EMPTY_BID))for(var n=t.split("&"),i=0;i<n.length;i++){var r=n[i].split("="),o=r[0],a=r[1];e[o]=a}return e},l.prototype.track=function(){if(!this.tracked&&!this.getService(Bs.context).adsDisabled&&this.container.bcPlayer().hasStarted()){if(0<this.score){var t=this.container.getService(Bs.utag).get(l.STATUS_FIELD);t===l.STATUS_NOT_REQUESTED&&(this.score=1.1),t===l.STATUS_SENT&&(this.score=1.2)}this.container.getService(Bs.analytics).omniture.track([],{eVar145:""+this.score}),this.tracked=!0}},l.STATUS_FIELD="prebid_video_status",l.STATUS_NOT_REQUESTED="not_requested",l.STATUS_SENT="request_sent",l.EMPTY_BID="bid_response=empty",l}(u),Tr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nr=function(a){function e(){var e=a.call(this,document.createElement("video"))||this;e.data="AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAABfhtZGF0AAACrgYF//+q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjc5NSBhYWE5YWE4IC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNyAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAtWWIhADf1dnw3uEMYFxdkKGLFSE8V8gmBVxjgYDTpR+Y4yY1IjXPue2iMDxhChqtQNqizZpF2+2rwW2krhO2fCAoGkXHTEIo+ZBWcdm7KoicD60oIS2OgbdHyuhWlsICALRNH0V7Vj8lIlBq+uVlhMi8Hnb+g1anuos/9uAaevnkLz29NBsg9nwxYjfbjWCfyn0ByJPW5MhzcjqghFWdTr3/kNjhQHkLMeFhPWD434XLPAql/UEAAAAIQZohbE3/L6DeBABMYXZjNTcuMTA3LjEwMABCIAjBGDgAAAAZQZpCPCGTKYTf7rNbEPYyb+kR0yUbk2auASEQBGCMHCEQBGCMHAAAADRBmmNJ4Q8mUwJv7rNfgEIgjcNxb+K7lWGI2BoOt3rwTeMKqYsTgqyrwnKraagNYeofMxrMIRAEYIwcIRAEYIwcAAAANUGahEnhDyZTAm/Id9WHMnrNziFQCHZQx6q6ucN0p3bYb0CnK1qSjSl1y5nMOoj1SFC5PFUVIRAEYIwcIRAEYIwcAAAATkGapkvhCEPIfARwNUBHA3AURPEf1Y/KUVLg4tMkBqMjQOBfsEESYkEYAMjimFGm0U8oDTVsM7u1kCJhUjU5daYHd9IkQtjo9DxXRkFSByEQBGCMHCEQBGCMHAAAAAgBnsVqQl+7gSEQBGCMHCEQBGCMHAAAADlBmshL4QhDyHwEUCVARQJwFPGf+DfR5BegD+7r0RCipmFFG+s0s1Y+qwVfiaLkodcMyJ4onioM3v8hEARgjBwhEARgjBwAAAAIAZ7nakJfu4AhEARgjBwhEARgjBwAAAA4QZrqS+EIQ8hsCMC1AjAvAU8d//VvcGxKPUubRd3pPVN4+T0R39FcclnahNyFE1gsw0vns6yqE8AhEARgjBwAAAAJAZ8JakKf4pg/IRAEYIwcIRAEYIwcAAAAL0GbC0vhCEPIbAjAtQIwLwCEP+bxXnvHFz5py+e3oRxI/Cdj02OMzpOvHFzWR2BQIRAEYIwcIRAEYIwcAAAAHEGbLEvhCEPIfAQQlAQQsAhT/+dTgbX0k/KktuAhEARgjBwhEARgjBwhEARgjBwhEARgjBwhEARgjBwAAAarbW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAAhYAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAvh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAAggAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAACqqqwAYAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAIIAAAEAAABAAAAAAJwbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAAyAAAAGgBVxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACG21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAdtzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAACAAGABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAMWF2Y0MBZAAK/+EAGGdkAAqs2Ul+XDhAAAADAEAAAAyDxIllgAEABmjr48siwAAAABBwYXNwAAAABAAAAAMAAAAYc3R0cwAAAAAAAAABAAAADQAAAgAAAAAUc3RzcwAAAAAAAAABAAAAAQAAAFBjdHRzAAAAAAAAAAgAAAAFAAAEAAAAAAEAAAYAAAAAAQAAAgAAAAABAAAGAAAAAAEAAAIAAAAAAQAABgAAAAABAAACAAAAAAIAAAQAAAAAKHN0c2MAAAAAAAAAAgAAAAEAAAACAAAAAQAAAAIAAAABAAAAAQAAAEhzdHN6AAAAAAAAAAAAAAANAAADawAAAAwAAAAdAAAAOAAAADkAAABSAAAADAAAAD0AAAAMAAAAPAAAAA0AAAAzAAAAIAAAAEBzdGNvAAAAAAAAAAwAAAAwAAADvwAAA+gAAAQsAAAEcQAABM8AAATnAAAFMAAABUgAAAWKAAAFowAABeIAAALddHJhawAAAFx0a2hkAAAAAwAAAAAAAAAAAAAAAgAAAAAAAAIWAAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAACAAAABAAAAQAAAAACVW1kaWEAAAAgbWRoZAAAAAAAAAAAAAAAAAAAu4AAAGQAVcQAAAAAAC1oZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU291bmRIYW5kbGVyAAAAAgBtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAcRzdGJsAAAAanN0c2QAAAAAAAAAAQAAAFptcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAAu4AAAAAAADZlc2RzAAAAAAOAgIAlAAIABICAgBdAFQAAAAAB9AAAAAnYBYCAgAURkFblAAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAAAZAAAEAAAAAExzdHNjAAAAAAAAAAUAAAABAAAAAQAAAAEAAAACAAAAAgAAAAEAAAAJAAAAAQAAAAEAAAAKAAAAAgAAAAEAAAAMAAAABQAAAAEAAAB4c3RzegAAAAAAAAAAAAAAGQAAABgAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAABAc3RjbwAAAAAAAAAMAAADpwAAA9wAAAQgAAAEZQAABMMAAATbAAAFJAAABTwAAAWEAAAFlwAABdYAAAYCAAAAGnNncGQBAAAAcm9sbAAAAAIAAAAB//8AAAAcc2JncAAAAAByb2xsAAAAAQAAABkAAAABAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ny44My4xMDA=",e.element.setAttribute("id","test"),e.element.volume=1e-9,e.element.style.visibility="hidden",e.element.style.width="0px";var i=document.createElement("source");return i.setAttribute("type","video/mp4"),i.setAttribute("src","data:video/mp4;base64,"+e.data),e.element.appendChild(i),e}return Tr(e,a),e.prototype.append=function(t){this.container=t,this.parent=this.container.parentNode.parentNode,this.parent.appendChild(this.element)},e.prototype.remove=function(){this.parent.removeChild(this.element)},e.prototype.play=function(){return this.element.play()},e}(N),Ir=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),br=function(a){function o(e,o,n){var i=a.call(this,e)||this;return i.removed=!1,i.analytics=o,i.view=n,i}return Ir(o,a),o.prototype.unmutePlayer=function(t){t.volume(1),t.muted(!1),this.analytics.onUnmute(),t.ads.isAdPlaying()&&t.ima3&&t.ima3.adPlayer&&(t.ima3.adPlayer.muted(!1),t.ima3.adPlayer.volume(1),t.ima3.adPlayer.play()),t.el().removeAttribute("muted"),t.paused()&&t.play()},o.prototype.removeClickToUnmute=function(t){this.removed||(this.removed=!0,ks.removeClass(t.controlBar.el_,"vms-muted-autoplay-controlbar"),this.container.bcPlayer().el_.removeChild(this.view.ctaContainer))},o.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,o.clickEvent,function(){var e=a.container.bcPlayer();a.unmutePlayer(e),a.removeClickToUnmute(e)}),e.addListener(this.container,"ready",function(){a.view.cta.style.opacity="1"});var n=function(){var e=a.container.bcPlayer();ks.addClass(e.controlBar.el_,"vms-muted-autoplay-controlbar"),a.view.setPlayerComponent(),a.view.cta.style.opacity="1",a.removed=!1},t=function(){var e=a.container.bcPlayer();!1===e.muted()?a.removeClickToUnmute(e):a.removed&&n()};e.addListener(this.container,"play",function(){t()}),e.addListener(this.container,"volumechange",function(){t()}),e.addListener(this.container,"ads-volumechange",function(){var e;(e=a.container.bcPlayer()).ads.isAdPlaying()&&e.ima3&&e.ima3.adPlayer&&(!1===e.ima3.adPlayer.muted()?a.removeClickToUnmute(e):a.removed&&n())})},o.clickEvent="muted-autoplay-click-to-unmute",o}(u),Pr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),wr=function(n){function a(e){return n.call(this,e)||this}return Pr(a,n),a.prototype.setPlayerComponent=function(){var t=this;this.ctaContainer=document.createElement("div"),this.ctaContainer.className=a.CSS_CLASS,this.cta=document.createElement("div"),this.cta.className="cta",this.ctaContainer.appendChild(this.cta),this.container.bcPlayer().el_.appendChild(this.ctaContainer),ks.onClickOnly(this.ctaContainer,function(){t.getService(Bs.eventManager).trigger(t.container,br.clickEvent)})},a.CSS_CLASS="rp-muted-autoplay",a}(u),Lr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Or=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.track=function(t){this.getService(Bs.analytics).omniture.track([t])},e.prototype.onUnmute=function(){this.track(R.UNMUTE)},e.prototype.trackIfAutoplayed=function(a){var e=this;this.getService(Bs.eventManager).addSingleEventListener(this.container,"play",function(){var t=e.getService(Bs.context);t.canAutoplay()&&!t.manuallyStarted&&e.track(a)})},e.prototype.onPromisePlayAllowed=function(){this.trackIfAutoplayed(R.AUTOPLAY_ALLOWED)},e.prototype.onPromisePlayBlocked=function(){this.trackIfAutoplayed(R.AUTOPLAY_BLOCKED)},e}(u),fr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rr=function(a){function r(e){var t=a.call(this,e,r.pluginName)||this;return t.view=new wr(t.container),t.analytics=new Or(e),t.events=new br(t.container,t.analytics,t.view),t.load(),t}return fr(r,a),r.prototype.onAllowed=function(){this.analytics.onPromisePlayAllowed(),this.mp4.remove(),this.getService(Bs.eventManager).trigger(this.container,r.MUTED_CHECKED)},r.prototype.setMutedDisplay=function(){var t=this,e=this.container.bcPlayer();e.el().setAttribute("muted",!0),e.volume(0),e.muted(!0),this.getService(Bs.eventManager).trigger(this.container,r.MUTED_CHECKED),this.view.setPlayerComponent(),setTimeout(function(){t.events.setEvents()},100)},r.prototype.onBlocked=function(){var t=this;this.analytics.onPromisePlayBlocked(),this.getService(Bs.eventManager).addListener(this.container,"ready",function(){console.log("Play unmuted was blocked, muting content."),t.setMutedDisplay()}),this.mp4.remove()},r.prototype.load=function(){var t=this;if(this.getService(Bs.context).autoPlay){if(this.mp4=new Nr,this.mp4.append(this.container.view.element),!this.getService(Bs.environment).browser.isDesktop())return this.onBlocked();try{if(Ms.getSearchParams().mutedAutoplay)return void this.onBlocked();this.mp4.play().then(function(){t.onAllowed()}).catch(function(){t.onBlocked()})}catch(t){this.onAllowed()}}else this.getService(Bs.eventManager).trigger(this.container,r.MUTED_CHECKED)},r.pluginName="PLUGIN_MUTED_AUTOPLAY",r.MUTED_CHECKED="EVENT_MUTED_CHECKED",r}(A),Mr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dr=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.slotParams={},t.globalAdRequestParams={},t.completed=!1,t.setEvents(),t}return Mr(o,a),o.prototype.isEnabled=function(){return!0},o.prototype.setEvents=function(){var t=this;this.isEnabled()&&(this.getService(Bs.eventManager),this.getIASPet().then(function(){return t.run()}))},o.prototype.getIASPet=function(){var l=this;return new Promise(function(e,t){var n=150,i=setInterval(function(){var r=window.__iasPET,a=l.container.getPluginInstance(Vr.pluginName),s;void 0!==r&&void 0!==r.VERSION&&void 0!==(null===(s=a.adUrl)||void 0===s?void 0:s.iu)&&(clearInterval(i),e(r)),0==--n&&t()},100)})},o.prototype.run=function(){var a=this;this.completed=!1;var e=this.container.getPluginInstance(Vr.pluginName);this.getIASPet().then(function(t){var n=[{adSlotId:o.slotId,size:[1,1],adUnitPath:e.adUrl.iu,type:"video"}];t.pubId=C.anId,t.queue.push({adSlots:n,dataHandler:function(e){a.iasDataHandler(e)}})})},o.prototype.iasDataHandler=function(t){var e={};try{e=JSON.parse(t)}catch(t){return void this.container.log("PET parse failed")}for(var n in this.globalAdRequestParams={fr:e.fr},e.brandSafety)this.globalAdRequestParams[n]=e.brandSafety[n];if(e.custom)for(var n in e.custom)this.globalAdRequestParams[n]=e.custom[n];var a=e.slots[o.slotId];for(var n in this.slotParams={},a)this.slotParams[n]=Array.isArray(a)?a[n].join(","):a[n];this.completed=!0,this.container.log("[IAS PET]","IAS PET COMPLETED",this.globalAdRequestParams,this.slotParams)},o.pluginName="IAS_PET_PLUGIN",o.slotId="ad-1",o.INTEGRAL_URL="https://integralads.com",o}(A),kr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vr=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.container=t,n.getService(Bs.eventManager).addCustomListener(n.container,"capi_ready",function(){setTimeout(function(){n.adUrl=new Cr(t)},300)}),n.setEvents(),n}return kr(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);if(e.addListener(this.container,"ended",function(){a.headerBidding&&a.headerBidding.initiateBids(),a.container.getPluginInstance(Dr.pluginName).run()}),this.getService(Bs.environment).browser.isMobile())var t=100,n=setInterval(function(){void 0!==window.ads_api&&window.ads_api.requestVideoBid&&0<t--?(clearInterval(n),a.headerBidding=new hr(a.container,window.ads_api),a.headerBidding.initiateBids(!0)):0>=t&&(clearInterval(n),a.container.getService(Bs.analytics).omniture.track([],{eVar145:"0"}))},100);e.addSingleCustomListener(this.container,Rr.MUTED_CHECKED,function(){e.addListener(a.container,"ready",function(){a.headerBidding||a.getService(Bs.context).ssai||(a.headerBidding=new hr(a.container,window.ads_api),a.container.serviceProvider.register(Bs.headerBidding,a.headerBidding),a.headerBidding.initiateBids())})}),e.addSingleCustomListener(this.container,qo.BC_READY,function(){a.container.bcPlayer().ima3.adMacroReplacement=function(){return a.adMacroReplacement()}}),e.addMultipleListener(this.container,["progress","ima3-started"],function(){a.headerBidding&&a.headerBidding.track()})},e.prototype.adMacroReplacement=function(a){void 0===a&&(a=!1);var r=this.container.getService(Bs.context);if(r.isVertical()&&!a&&0!=r.playOrder%2)return"";if(r.checkUserTypeParameter(),r.checkAdsDomainDisabled(),!this.container.getService(Bs.context).adsDisabled){this.adUrl.custom_params.clearAdditionalValues(),this.adUrl.setVideoId(this.container.bcInfo.getVideoId()),this.adUrl.setBCPlayer(this.container.bcPlayer());try{var t=this.headerBidding&&this.headerBidding.get();t&&0<Object.keys(t).length?(console.log("VJS - bid received"),this.adUrl.custom_params.addValues(t),this.headerBidding.score++):console.log("VJS - bid empty")}catch(t){}var n=this.container.getPluginInstance(Dr.pluginName);return n.completed&&(this.adUrl.url=this.adUrl.description_url=Dr.INTEGRAL_URL,this.adUrl.custom_params.addValues(n.globalAdRequestParams),this.adUrl.custom_params.addValues(n.slotParams)),this.container.log("[AD URL]",this.adUrl.get()),this.getService(Bs.context).adsDisabled?"":this.adUrl.get()}},e.pluginName="PLUGIN_IMA3",e}(A),Br=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xr=function(a){function e(t,n){var i=a.call(this,t,e.pluginName)||this;return i.trackPlay=!1,i.setVodFullscreen=!1,i.activeSession=!1,i.lightning=n,i}return Br(e,a),e.prototype.reset=function(){this.initialiseSession(this.lightning.bcPlayer)},e.prototype.initialiseSession=function(a){var e;this.activeSession&&this.endSession();var t=ADB.va.MediaHeartbeat;this.mediaObject=t.createMediaObject(a.mediainfo.name,a.mediainfo.id,a.mediainfo.duration,this.setVodFullscreen?"vod_fullscreen":t.StreamType.VOD),this.setMetadata(),null===(e=this.mediaHeartbeat)||void 0===e||e.trackSessionStart(this.mediaObject,{}),this.activeSession=!0},e.prototype.setMetadata=function(){var n=ADB.va.MediaHeartbeat,e=this.getMetadata(this.getService(Bs.context));this.mediaObject.setValue(n.MediaObjectKey.StandardVideoMetadata,e)},e.prototype.endSession=function(){var t;this.activeSession&&(null===(t=this.mediaHeartbeat)||void 0===t||t.trackSessionEnd(this.mediaObject,{}),this.activeSession=!1),this.mediaHeartbeat=null},e.prototype.getMetadata=function(c){var e=this.getService(Bs.environment),t=this.lightning.capiVideo,n=new wn,i=this.getService(Bs.lightningPlayerOrchestrator);n.channel=t.categoriesExtended().slice(0,4).join(", "),n.brand=e.brand(),n.site=e.site(),n.videoSource=t.source&&t.source.toLowerCase()||"NA",n.playlistIndex=c.recommendationsOrigin||null,n.advtType=c.ssai?"SSAI":"CSAI",n["a.media.network"]=e.network();var r=this.lightning.bcPlayer.mediainfo;if(r){var o=po.CT_STANDARD;if(r.custom_fields)switch(r.custom_fields.ad_controls){case po.AC_SENSITIVE:o=po.AC_SENSITIVE;break;case po.AC_SPONSORED:o=po.AC_SPONSORED;break;default:-1<this.container.view.cssClasses.indexOf(po.SPONSORED_CSS)&&(o=po.AC_SPONSORED);}n.mediacontenttype=o}n.inactivetab=e.tabLoaded,n.videoQuality=c.videoQuality,n.playlistOrder=i.index,n.accessType=t.accessType===l.ACCESS_TYPE_PREMIUM?"restricted":"free";var a="close caption disabled";return c.hasSubtitles()&&"true"===window.sessionStorage.getItem(Be.STORAGE_NAME)&&(a="closed caption enabled"),n.mediacaptionstatus=a,n},e.prototype.set=function(l){var d=this;void 0===l&&(l=!1),this.heartbeatConfig=this.getService(Bs.config).heartbeat,this.setVodFullscreen=l;var t=this.lightning.bcPlayer,p=ADB.va.MediaHeartbeat,e=ADB.va.MediaHeartbeatConfig,i=new(0,ADB.va.MediaHeartbeatDelegate),a;i.getCurrentPlaybackTime=function(){var n=0;try{n=t.currentTime()}catch(t){}return n},i.getQoSObject=function(){var t=null,n;try{var e=d.lightning.bcPlayer.getVideoPlaybackQuality(),a=null===(n=d.lightning.bcPlayer.tech(!0).vhs.playlists.media())||void 0===n?void 0:n.attributes;t=p.createQoSObject(a&&a.BANDWIDTH||0,e.creationTime,24,e.droppedVideoFrames)}catch(t){}return t},"function"==typeof Visitor.getInstance&&(a=Visitor.getInstance(this.heartbeatConfig.visitor.orgId,window.utag_data.adobe.visitorObjectConfig));var n=null;void 0===window.metrics.s?((n=new AppMeasurement(this.heartbeatConfig.appMeasurement.rsid)).visitor=a,n.trackingServer=this.heartbeatConfig.appMeasurement.trackingServer,n.account=this.heartbeatConfig.appMeasurement.rsid,n.visitorID=this.heartbeatConfig.appMeasurement.visitorId,n.pageName="",n.charSet="UTF-8"):n=window.metrics.s;var r=new e;r.trackingServer=this.heartbeatConfig.heartbeat.trackingServer,r.playerName=Jn.VERTICAL_PLAYER_FULLSCREEN,r.channel=this.lightning.capiVideo.categories.join(", "),r.debugLogging=!1,r.appVersion="",r.ssl=!0,r.ovp="",this.mediaHeartbeat=new p(i,r,n),this.initialiseSession(t),this.setEvents()},e.prototype.setEvents=function(){var a=this,e=this.lightning.bcPlayer,t=function(){var t;e.ads.isAdPlaying()||(a.trackPlay=!0,null===(t=a.mediaHeartbeat)||void 0===t||t.trackPlay())};e.on("playing",function(){a.trackPlay?e.off("playing",t):t()}),this.container.getService(Bs.eventManager).addCustomListener(this.container,qn.EVENT_CLOSE_FULLSCREEN,function(){a.endSession()}),e.one("timeupdate",function(){var t;a.activeSession||a.initialiseSession(e),a.setVodFullscreen||null===(t=a.mediaHeartbeat)||void 0===t||t.trackPlay()}),e.on("pause",function(){var t;e.ended()||null===(t=a.mediaHeartbeat)||void 0===t||t.trackPause()}),e.on("ended",function(){var e;null===(e=a.mediaHeartbeat)||void 0===e||e.trackComplete(a.mediaObject,{}),a.endSession()}),e.on("ads-play",function(){var e;null===(e=a.mediaHeartbeat)||void 0===e||e.trackPlay()}),e.on("ads-pause",function(){var e;null===(e=a.mediaHeartbeat)||void 0===e||e.trackPause()}),e.on("ads-ad-started",function(){a.activeSession||a.initialiseSession(e);var t=ADB.va.MediaHeartbeat;if(e.ads.ad&&e.ads&&e.ads.ad.duration&&e.ads.ad.duration>Jn.AD_DURATION_TRACKING_THRESHOLD){var n=t.createAdBreakObject("Ad break name",0,0);a.mediaHeartbeat.trackEvent(t.Event.AdBreakStart,n);var i=t.createAdObject("Ad title",e.ads.ad.id+"",e.ads.ad.index,e.ads.ad.duration);a.mediaHeartbeat.trackEvent(t.Event.AdStart,i,{})}});var n=function(){var e=ADB.va.MediaHeartbeat;a.mediaHeartbeat.trackEvent(e.Event.AdSkip),a.mediaHeartbeat.trackEvent(e.Event.AdBreakComplete),a.mediaHeartbeat.trackPlay(),a.container.getPluginInstance(Dn.pluginName).view.hide()};e.on("ads-ad-skipped",n),e.on("ima3error",n),e.on("ima3-ad-error",n),e.on("ads-ad-ended",function(){if(e.ads.ad){var t=ADB.va.MediaHeartbeat;a.mediaHeartbeat.trackEvent(t.Event.AdComplete),a.mediaHeartbeat.trackEvent(t.Event.AdBreakComplete)}}),e.on("play",function(){a.trackPlay=!0,t()})},e.pluginName="LP_PLUGIN_ANALYTICS",e}(A),Ur=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hr=function(a){function e(e,r){var n=a.call(this,e)||this;return n.trackVidora=!1,n.id=r,n}return Ur(e,a),e.prototype.init=function(s,e,t){var n=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),this.capiVideo=s,this.lastActive=new Date().getTime(),new Promise(function(i){if(n.bcPlayer)return i();n.view=new _r(n.container,n.id),n.view.element.setAttribute("data-martini-id",s.platformId);var r=n.container.getService(Bs.lightningPlayerOrchestrator);if(e?r.overlay.insertBefore(n.view.element,r.current.view.element):r.overlay.appendChild(n.view.element),n.bcPlayer=window.bc(n.view.id,{preload:!0,controlBar:{children:["progressControl"]}}),n.analytics=new xr(n.container,n),n.bcPlayer.one("play",function(){var a=n.container.getPluginInstance(lo.pluginName),e=!n.container.bcPlayer().ended()&&a.canonicalVideo===r.current.capiVideo;n.analytics.set(e),n.analytics.setMetadata()}),n.bcPlayer.removeTechControlsListeners_(),n.bcPlayer.on("ready",function(){n.bcPlayer.tech_.off("dblclick"),n.bcPlayer.muted("true"===localStorage.getItem(ki.STORAGE_NAME))}),n.bcPlayer.on("fullscreenchange",function(){var t=n.bcPlayer;t.isFullscreen()&&t.exitFullscreen()}),n.view.hide(),Qr.AD_ENABLED)try{if(t){var o=n.container.getPluginInstance(Vr.pluginName);n.bcPlayer.ima3.adMacroReplacement=function(){return o.adMacroReplacement(!0)}}else n.bcPlayer.ima3.settings.requestMode="ondemand"}catch(t){n.container.log("Lightning player ad exception:",t)}return n.bcPlayer.on("play",function(){var a,e,t,n;null===(e=null===(a=r.previous)||void 0===a?void 0:a.bcPlayer)||void 0===e||e.pause(),null===(n=null===(t=r.next)||void 0===t?void 0:t.bcPlayer)||void 0===n||n.pause()}),n.bcPlayer.one("timeupdate",function(){setTimeout(function(){if(n.trackVidora){var t=n.getService(Bs.vidora);null==t||t.client.trackPlay(n.capiVideo),n.trackVidora=!1}},5e3)}),ks.onClick(n.view.element,function(){n.lastActive=new Date().getTime()}),n.bcPlayer.on("timeupdate",function(){ks.hasClass(n.view.element,Qr.CURRENT_PLAYER_ID)||n.bcPlayer.pause(),3e3<new Date().getTime()-n.lastActive?n.bcPlayer.userActive(!1):n.bcPlayer.userActive(!0)}),n.bcPlayer.on("ended",function(){var t=n.container.getPluginInstance(lo.pluginName).inactivity;t.counter!==t.inactivityLimit&&n.autoNext()}),ks.onTouch(n.bcPlayer.el_,function(){n.getService(Bs.eventManager).trigger(n.container,_r.EVENT_ON_INTERACT)}),n.view.show(n),n.view.description.refresh(s),i()})},e.prototype.autoNext=function(){if(this.getService(Bs.lightningPlayerOrchestrator).next){var t=this.getService(Bs.eventManager);t.trigger(this.container,_r.EVENT_SWIPE_UP,300),t.trigger(this.container,_r.EVENT_AUTO_SWIPES)}else this.view.addEndState()},e.prototype.refreshCaptionState=function(){this.view.captions.refreshState()},e.prototype.load=function(a){var e=this;return new Promise(function(t){0===a.duration?(e.bcPlayer.catalog.load(a),t()):(e.bcPlayer.one("loadedmetadata",function(){t()}),e.bcPlayer.catalog.load(a))})},e}(u),Gr=function(){function t(){}return t.EVENT_NEXT_LOADED="lp-event-next-loaded",t.EVENT_USER_SWIPE_UP="lp-event-user-swipes-up",t.EVENT_USER_SWIPE_DOWN="lp-event-user-swipes-down",t.EVENT_SWIPE_UP_ANIMATION_FINISHED="lp-event-animation-up-finished",t.EVENT_SWIPE_DOWN_ANIMATION_FINISHED="lp-event-animation-down-finished",t}(),Yr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wr=function(a){function e(e,r){var n=a.call(this,e)||this;return n.orchestrator=r,n}return Yr(e,a),e.prototype.setEvents=function(){var l=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,_r.EVENT_SWIPE_END,function(t){var n;if(l.orchestrator.hasRecommendations){var i=(null===(n=l.orchestrator.current.view)||void 0===n?void 0:n.touchStartY)-t;if(0>i){if(!l.orchestrator.previous)return;if(l.orchestrator.current.view&&-.1>i/l.orchestrator.current.view.element.clientHeight)e.trigger(l.container,_r.EVENT_SWIPE_DOWN,i);else var d=0,o=setInterval(function(){d<Rs(i)?(d+=Rs(i)/50,l.orchestrator.previous.view.element.style["margin-top"]="-"+(l.orchestrator.next.view.element.clientHeight+(i+d))+"px",l.orchestrator.current.view.element.style["margin-top"]=-i-d+"px"):clearInterval(o)},1)}else if(l.orchestrator.current.view&&.1<i/l.orchestrator.current.view.element.clientHeight)e.trigger(l.container,_r.EVENT_SWIPE_UP,i);else var a=0,s=setInterval(function(){a<i?(a+=i/50,l.orchestrator.current&&(l.orchestrator.current.view.element.style["margin-top"]=-i+a+"px"),l.orchestrator.next&&(l.orchestrator.next.view.element.style["margin-top"]=l.orchestrator.next.view.element.clientHeight-i+a+"px")):clearInterval(s)},1);l.container.getService(Bs.analytics).omniture.track([R.CLICK_TO_PLAY])}}),e.addCustomListener(this.container,_r.EVENT_SWIPE_UP,function(c){var t,n;if(void 0===c&&(c=0),l.orchestrator.hasRecommendations&&l.orchestrator.hasNext){!1===l.orchestrator.swipesUp&&l.orchestrator.index++,l.orchestrator.swipesUp=!0,e.trigger(l.container,Gr.EVENT_USER_SWIPE_UP),l.orchestrator.previous&&l.orchestrator.previous.bcPlayer&&(null===(n=null===(t=l.orchestrator.previous)||void 0===t?void 0:t.bcPlayer)||void 0===n||n.dispose(),delete window.videojs.players[l.orchestrator.previous.view.id],l.orchestrator.previous=null),l.orchestrator.index++,l.orchestrator.current.bcPlayer.pause(),setTimeout(function(){return l.orchestrator.current.bcPlayer.currentTime(0)},0);var i=0,r=l.orchestrator.current.view.element.clientHeight/30,a=setInterval(function(){i++,l.orchestrator.current.view.element.style["margin-top"]="-"+(c+r*i)+"px";var e=l.orchestrator.next.view.element.clientHeight-c-r*i;l.orchestrator.next.view.element.style["margin-top"]=e+"px",(0>=Ps(e)||30==i)&&(clearInterval(a),l.finishedUp())},1)}}),e.addCustomListener(this.container,_r.EVENT_SWIPE_DOWN,function(a){if(void 0===a&&(a=0),l.orchestrator.hasRecommendations&&(l.orchestrator.swipesUp&&l.orchestrator.index--,l.orchestrator.swipesUp=!1,void 0!==l.orchestrator.previous)){e.trigger(l.container,Gr.EVENT_USER_SWIPE_DOWN);var n=0,i=l.orchestrator.current.view.element.clientHeight/40;l.orchestrator.current.bcPlayer.pause(),l.orchestrator.current.bcPlayer.currentTime(0);var r=setInterval(function(){n++;var e=a+l.orchestrator.current.view.element.clientHeight-n*i;l.orchestrator.previous.view.element.style["margin-top"]="-"+e+"px",l.orchestrator.current.view.element.style["margin-top"]=i*n-a+"px",(0>e||40==n)&&(clearInterval(r),l.finishedDown())},1)}}),e.addCustomListener(this.container,_r.EVENT_SWIPE_MOVE,function(e){if(l.orchestrator.hasRecommendations){var t=l.orchestrator.current.view.touchStartY-e;0<t?l.orchestrator.hasNext&&l.orchestrator.next&&(l.orchestrator.current.view.element.style["margin-top"]="-"+t+"px",l.orchestrator.next.view.element.style["margin-top"]=l.orchestrator.next.view.element.clientHeight-t+"px"):l.orchestrator.previous&&(l.orchestrator.current.view.element.style["margin-top"]=-t+"px",l.orchestrator.previous.view.element.style["margin-top"]=-l.orchestrator.current.view.element.clientHeight-t+"px")}})},e.prototype.finishedUp=function(){this.orchestrator.previous=this.orchestrator.current,ks.removeClass(this.orchestrator.previous.view.element,Qr.CURRENT_PLAYER_ID),ks.addClass(this.orchestrator.previous.view.element,Qr.PREVIOUS_PLAYER_ID),this.orchestrator.previous.view.element.style.removeProperty("margin-top"),this.orchestrator.current=this.orchestrator.next,this.orchestrator.current.view.element.style.removeProperty("margin-top"),ks.removeClass(this.orchestrator.current.view.element,Qr.NEXT_PLAYER_ID),ks.addClass(this.orchestrator.current.view.element,Qr.CURRENT_PLAYER_ID),this.orchestrator.getNext(),this.getService(Bs.eventManager).trigger(this.container,Gr.EVENT_SWIPE_UP_ANIMATION_FINISHED)},e.prototype.finishedDown=function(){var n,e;null===(e=null===(n=this.orchestrator.next)||void 0===n?void 0:n.bcPlayer)||void 0===e||e.dispose(),this.orchestrator.next&&delete window.videojs.players[this.orchestrator.next.view.id],this.orchestrator.next=this.orchestrator.current,ks.removeClass(this.orchestrator.current.view.element,Qr.CURRENT_PLAYER_ID),ks.addClass(this.orchestrator.current.view.element,Qr.NEXT_PLAYER_ID),this.orchestrator.next.view.element.style.removeProperty("margin-top"),this.orchestrator.current=this.orchestrator.previous,ks.removeClass(this.orchestrator.current.view.element,Qr.PREVIOUS_PLAYER_ID),ks.addClass(this.orchestrator.current.view.element,Qr.CURRENT_PLAYER_ID),this.orchestrator.current.view.element.style.removeProperty("margin-top"),this.orchestrator.getPrevious(),this.getService(Bs.eventManager).trigger(this.container,Gr.EVENT_SWIPE_DOWN_ANIMATION_FINISHED)},e}(u),Fr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kr=function(a){function s(e){var t=a.call(this,document.createElement("div"))||this;if(!e.getService(Bs.environment).browser.isDesktop())return t;t.element.className=s.CSS_CLASS,t.container=e,t.up=document.createElement("div"),t.up.className="lp-nav "+s.DISABLED_CSS_CLASS,t.up.innerHTML="<div class=\"lp-up\"></div>",t.down=document.createElement("div"),t.down.className="lp-nav "+s.DISABLED_CSS_CLASS,t.down.innerHTML="<div class=\"lp-down\"></div>",t.element.appendChild(t.up),t.element.appendChild(t.down),t.setEvents();var n=t.container.getService(Bs.lightningPlayerOrchestrator);return t.appendTo(n.overlay),t.hide(),t}return Fr(s,a),s.prototype.setEvents=function(){var t=this,e=this.container.getService(Bs.eventManager),n=this.container.getService(Bs.analytics);e.addCustomListener(this.container,qn.EVENT_ENTER_FULLSCREEN,function(){t.show()}),ks.onClick(this.up,function(){ks.hasClass(t.up,s.DISABLED_CSS_CLASS)||(e.trigger(t.container,_r.EVENT_SWIPE_DOWN,0),e.trigger(t.container,_r.EVENT_ON_INTERACT),n.omniture.track([R.CLICK_TO_PLAY]))}),ks.onClick(this.down,function(){ks.hasClass(t.down,s.DISABLED_CSS_CLASS)||(e.trigger(t.container,_r.EVENT_SWIPE_UP,300),e.trigger(t.container,_r.EVENT_ON_INTERACT),n.omniture.track([R.CLICK_TO_PLAY]))}),e.addCustomListener(this.container,_r.EVENT_REFRESH_VIEW,function(){t.refresh()}),e.addCustomListener(this.container,Gr.EVENT_USER_SWIPE_UP,function(){ks.addClass(t.down,s.DISABLED_CSS_CLASS)}),e.addCustomListener(this.container,Gr.EVENT_NEXT_LOADED,function(){ks.removeClass(t.down,s.DISABLED_CSS_CLASS)})},s.prototype.refresh=function(){var t=this.container.getService(Bs.lightningPlayerOrchestrator),e=this.container.getService(Bs.eventManager);void 0===t.previous||null===t.previous?(ks.addClass(this.up,s.DISABLED_CSS_CLASS),e.trigger(this.container,s.EVENT_BACK_TO_FIRST)):ks.removeClass(this.up,s.DISABLED_CSS_CLASS),void 0===t.next||null===t.next?(ks.addClass(this.down,s.DISABLED_CSS_CLASS),e.trigger(this.container,s.EVENT_RECOMMENDATIONS_DEPLETED)):ks.removeClass(this.down,s.DISABLED_CSS_CLASS)},s.prototype.appendTo=function(t){t.appendChild(this.element)},s.CSS_CLASS="lp-navigation",s.DISABLED_CSS_CLASS="disabled",s.EVENT_RECOMMENDATIONS_DEPLETED="EVENT_LP_RECO_DEPLETED",s.EVENT_BACK_TO_FIRST="EVENT_LP_BACK_TO_FIRST",s}(N),jr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xr=function(l,e,o,t){return new(o||(o=Promise))(function(n,i){function r(n){try{s(t.next(n))}catch(t){i(t)}}function a(n){try{s(t.throw(n))}catch(t){i(t)}}function s(i){var s;i.done?n(i.value):(s=i.value,s instanceof o?s:new o(function(t){t(s)})).then(r,a)}s((t=t.apply(l,e||[])).next())})},zr=function(l,e){function t(t){return function(o){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&t[0]?n.return:t[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,t[1])).done)return i;switch(n=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=0<i.length&&i[i.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}t=e.call(l,s)}catch(a){t=[6,a],n=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a,n,i,c;return c={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},Qr=function(a){function m(e){var t=a.call(this,e)||this;return t.index=0,t.swipesUp=!0,t.adIndex=0,t.hasNext=!1,t.wasPlayingOnPageHidden=!1,t.hasRecommendations=!1,t.current=new Hr(t.container,m.CURRENT_PLAYER_ID),t.container.serviceProvider.register(Bs.lightningPlayerOrchestrator,t),t.overlay=document.createElement("div"),t.overlay.className="vms-vertical-overlay",t.setEvents(),t}return jr(m,a),m.prototype.setOverlay=function(){window.document.body.appendChild(this.overlay)},m.prototype.getNext=function(){var t,e,n;return Xr(this,void 0,void 0,function(){var i=this,p,r,o,a,s,c,l,u;return zr(this,function(d){switch(d.label){case 0:return p=this.container.getPluginInstance(Ie.pluginName),r=null===(t=p.view.recommendations.items[this.index+1])||void 0===t?void 0:t.capiVideo,o=null===(e=p.view.recommendations.items[this.index+2])||void 0===e?void 0:e.capiVideo,this.adIndex++,0==this.index%6&&0<this.index&&this.container.related.getNextPage(ue.TYPE_RELATED),this.next=null,r?!1===r.fetched?[4,this.container.getPluginInstance(lo.pluginName).recommendations.fetch(r)]:[3,2]:[3,3];case 1:r=d.sent(),p.view.recommendations.items.map(function(n,e){n.capiVideo.id===r.id&&(p.view.recommendations.items[e].capiVideo=r)}),d.label=2;case 2:this.next=new Hr(this.container,m.NEXT_PLAYER_ID),this.next.trackVidora=!0,this.next.init(r),a=r.platformId.split("-"),this.next.bcPlayer.catalog.getVideo(a[1],function(a,e){i.next.bcPlayer.one("loadstart",function(){s.trigger(i.container,Gr.EVENT_NEXT_LOADED,e)});var t=[];0>e.duration&&(t=e.sources.filter(function(t){return"video/mp4"==t.type})),0<t.length&&(e.sources=t),i.showPoster(i.next.bcPlayer,e),i.next.bcPlayer.catalog.load(e)}),o&&!1===o.fetched&&setTimeout(function(){return Xr(i,void 0,void 0,function(){return zr(this,function(t){switch(t.label){case 0:return[4,this.container.getPluginInstance(lo.pluginName).recommendations.fetch(o)];case 1:return o=t.sent(),[2];}})})},100),d.label=3;case 3:return(s=this.container.getService(Bs.eventManager)).trigger(this.container,_r.EVENT_REFRESH_VIEW),0==this.adIndex%2&&m.AD_ENABLED&&(c=new URLSearchParams(window.location.search),l=c.get("ads"),!m.AD_ENABLED||null!==l&&"disabled"===l||(u=this.container.getPluginInstance(Vr.pluginName),null===(n=this.next)||void 0===n||n.bcPlayer.one("play",function(){i.next.bcPlayer.ima3.adMacroReplacement=function(){return u.adMacroReplacement(!0)},i.next.bcPlayer.ima3.adrequest(u.adUrl.get())}))),[2];}})})},m.prototype.showPoster=function(n,e){n.el_.style.background="url("+e.poster+")",n.el_.style["background-size"]="contain",n.el_.style["background-repeat"]="no-repeat",n.el_.style["background-position"]="center"},m.prototype.getPrevious=function(){var a=this,t;this.previous=null;var e=this.container.getPluginInstance(Ie.pluginName);this.index--;var n=null===(t=e.view.recommendations.items[this.index])||void 0===t?void 0:t.capiVideo;if(n){this.previous=new Hr(this.container,m.PREVIOUS_PLAYER_ID),this.previous.init(n,!0);var i=n.platformId.split("-");this.previous.bcPlayer.catalog.getVideo(i[1],function(n,e){a.previous.bcPlayer.catalog.load(e),a.showPoster(a.previous.bcPlayer,e)})}this.container.getService(Bs.eventManager).trigger(this.container,_r.EVENT_REFRESH_VIEW)},m.prototype.load=function(a,e){var t=this,n=this.container.getPluginInstance(Ie.pluginName);this.originalRecommendationItems=n.view.recommendations.items,this.current.init(this.originalRecommendationItems[this.index].capiVideo,!1,!0).then(function(){t.current.bcPlayer.one("play",function(){t.current.refreshCaptionState(),t.getNext()}),t.current.load(e).then(function(){setTimeout(function(){0!==t.current.capiVideo.duration&&t.current.bcPlayer.mediainfo.id===t.container.bcPlayer().mediainfo.id&&(t.container.bcPlayer().ended()||t.current.bcPlayer.currentTime(t.container.bcPlayer().currentTime())),t.current.bcPlayer.play()},100)},function(){})})},m.prototype.disposeAll=function(){var t,e,n,i,r,o;ks.removeClass(window.document.body.parentElement,"video-full-screen"),0===this.index&&this.container.bcPlayer().currentTime(this.current.bcPlayer.currentTime()),this.previous&&this.previous.bcPlayer&&(this.previous.analytics.endSession(),null===(e=null===(t=this.previous)||void 0===t?void 0:t.bcPlayer)||void 0===e||e.dispose(),delete window.videojs.players[this.previous.view.id],this.previous=null),this.current&&this.current.bcPlayer&&(this.current.analytics.endSession(),null===(i=null===(n=this.current)||void 0===n?void 0:n.bcPlayer)||void 0===i||i.dispose(),delete window.videojs.players[this.current.view.id],this.current=new Hr(this.container,m.CURRENT_PLAYER_ID)),this.next&&this.next.bcPlayer&&(this.next.analytics.endSession(),null===(o=null===(r=this.next)||void 0===r?void 0:r.bcPlayer)||void 0===o||o.dispose(),delete window.videojs.players[this.next.view.id],this.next=null),this.container.getPluginInstance(Ie.pluginName).view.recommendations.items=this.originalRecommendationItems,this.overlay.style.display="none",this.getService(Bs.eventManager).trigger(this.container,qn.EVENT_CLOSE_FULLSCREEN)},m.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,Gr.EVENT_USER_SWIPE_UP,function(){a.current.bcPlayer.pause(),a.current.trackVidora=!1,a.hasNext=!1}),e.addCustomListener(this.container,Gr.EVENT_USER_SWIPE_DOWN,function(){a.current.bcPlayer.pause(),a.current.trackVidora=!1,a.hasNext=!0}),e.addCustomListener(this.container,Gr.EVENT_NEXT_LOADED,function(){a.hasNext=!0}),e.addCustomListener(this.container,Kr.EVENT_RECOMMENDATIONS_DEPLETED,function(){a.swipesUp=!1,a.index--}),e.addCustomListener(this.container,Gr.EVENT_SWIPE_UP_ANIMATION_FINISHED,function(){a.current.lastActive=new Date().getTime(),a.current.bcPlayer.play().catch(function(){var e="true"===localStorage.getItem("vms-lp-mute");a.current.bcPlayer.muted(e),a.current.bcPlayer.play().then(function(){a.current.bcPlayer.muted(e)}).catch(function(){a.current.bcPlayer.muted(!0),a.current.bcPlayer.play(),console.warn("Safari doesn't allow auto play with sound enabled. So auto play will continue playing muted videos.")})})}),e.addCustomListener(this.container,dt.RAW_EVENT_PAGE_HIDDEN,function(){a.current&&a.current.bcPlayer&&(a.wasPlayingOnPageHidden=!1===a.current.bcPlayer.paused(),a.current.bcPlayer.pause())}),e.addCustomListener(this.container,dt.RAW_EVENT_PAGE_VISIBLE,function(){a.wasPlayingOnPageHidden&&a.current&&a.current.bcPlayer&&a.current.bcPlayer.play()}),e.addCustomListener(this.container,ki.EVENT_ON_MUTE,function(){var e,t,n,i;null===(t=null===(e=a.next)||void 0===e?void 0:e.bcPlayer)||void 0===t||t.muted(!0),null===(i=null===(n=a.previous)||void 0===n?void 0:n.bcPlayer)||void 0===i||i.muted(!0)}),e.addCustomListener(this.container,ki.EVENT_ON_UNMUTE,function(){var e,t,n,i;null===(t=null===(e=a.next)||void 0===e?void 0:e.bcPlayer)||void 0===t||t.muted(!1),null===(i=null===(n=a.previous)||void 0===n?void 0:n.bcPlayer)||void 0===i||i.muted(!1)}),e.addCustomListener(this.container,_r.EVENT_SWIPE_UP,function(){var e;a.current.bcPlayer.ended()&&(null===(e=a.current.analytics.mediaHeartbeat)||void 0===e||e.trackComplete(a.current.analytics.mediaObject,{})),a.current.analytics.endSession(),a.current.bcPlayer.one("play",function(){a.current.analytics.set()})}),e.addCustomListener(this.container,_r.EVENT_SWIPE_DOWN,function(){a.current.analytics.endSession(),a.current.bcPlayer.one("play",function(){a.current.analytics.set()})}),e.addCustomListener(this.container,Gr.EVENT_SWIPE_DOWN_ANIMATION_FINISHED,function(){a.current.lastActive=new Date().getTime(),a.current.bcPlayer.play().catch(function(){a.current.bcPlayer.muted(!0),a.current.bcPlayer.play(),a.current.lastActive=new Date().getTime()})}),this.addKeyboardControls(),new Wr(this.container,this).setEvents()},m.prototype.addKeyboardControls=function(){var a=this,e=this.getService(Bs.eventManager),t=this.getService(Bs.analytics);window.document.addEventListener("martini",function(){a.hasNext&&(e.trigger(a.container,_r.EVENT_SWIPE_UP,300),t.omniture.track([R.CLICK_TO_PLAY]))}),window.document.addEventListener("keyup",function(n){"N"===n.key&&a.hasNext&&(e.trigger(a.container,_r.EVENT_SWIPE_UP,300),t.omniture.track([R.CLICK_TO_PLAY])),"P"===n.key&&(e.trigger(a.container,_r.EVENT_SWIPE_DOWN),t.omniture.track([R.CLICK_TO_PLAY]))})},m.AD_ENABLED=!1,m.PREVIOUS_PLAYER_ID="lightning-player-previous",m.CURRENT_PLAYER_ID="lightning-player-current",m.NEXT_PLAYER_ID="lightning-player-next",m}(u),$r=function(){function n(a,r,t,n){this.key=a,this.recommendationsKey=n||a,this.contentUrl=r,this.baseUrl=t}return n.prototype.getContentKey=function(e){return e&&e===n.RECOMMENDATION_KEY?this.recommendationsKey:this.key},n.prototype.getContentUrl=function(){return this.contentUrl},n.prototype.getBaseUrl=function(){return this.baseUrl},n.RECOMMENDATION_KEY="CAPI_RECOMMENDATIONS_KEY",n.CONTENT_KEY="CAPI_CONTENT_KEY",n}(),qr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zr=function(l,e,o,t){return new(o||(o=Promise))(function(n,i){function r(n){try{s(t.next(n))}catch(t){i(t)}}function a(n){try{s(t.throw(n))}catch(t){i(t)}}function s(i){var s;i.done?n(i.value):(s=i.value,s instanceof o?s:new o(function(t){t(s)})).then(r,a)}s((t=t.apply(l,e||[])).next())})},Jr=function(l,e){function t(t){return function(o){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&t[0]?n.return:t[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,t[1])).done)return i;switch(n=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=0<i.length&&i[i.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}t=e.call(l,s)}catch(a){t=[6,a],n=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a,n,i,c;return c={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},eo=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.htmlElements=[],n.element=document.createElement("div"),n.element.className=e.className,n}return qr(e,a),e.prototype.getPlayer=function(){var t;return(null===(t=this.lightning)||void 0===t?void 0:t.bcPlayer)||this.container.bcPlayer()},e.prototype.fetch=function(a){return Zr(this,void 0,void 0,function(){var e;return Jr(this,function(t){switch(t.label){case 0:return[4,this.getService(Bs.capi).getVideosById([a.id],this.container,$r.RECOMMENDATION_KEY)];case 1:return e=t.sent(),a=e[0],this.refreshView(a),[2,a];}})})},e.prototype.refreshView=function(n){var e=this.htmlElements.find(function(e){return n.id===e.getAttribute("data-capi-id")});e&&(e.querySelector(".lp-recommendation-item-image").src=n.poster,e.querySelector(".lp-recommendation-item-title").innerHTML=n.title)},e.prototype.addRecommendations=function(c){var a=this,e=function(d){var p=c[d],e=document.createElement("div");e.className="lp-recommendation-item",e.setAttribute("data-capi-id",p.id);var n=document.createElement("div");n.className="img-container";var r=document.createElement("img");r.className="lp-recommendation-item-image",r.src=p.poster,r.width=.4*t.getPlayer().el_.offsetWidth,r.height=16*r.width/9,n.append(r),e.appendChild(n);var s=document.createElement("h5");if(s.innerHTML=p.title,s.className="lp-recommendation-item-title",e.appendChild(s),t.element.appendChild(e),!1===p.fetched){r.src=V.get()+"img/fallback-916.jpg",s.innerHTML="...";var i={root:t.getPlayer().element};new IntersectionObserver(function(t,e){t.forEach(function(t){if(0<t.intersectionRatio){e.disconnect();var n=a.getService(Bs.capi);n.ready().then(function(){n.getVideosById([p.id],a.container,$r.RECOMMENDATION_KEY).then(function(t){if(p.fetched=!0,0<t.length){var e=t[0];s.innerHTML=e.title,r.src=e.poster,a.container.getPluginInstance(Ie.pluginName).view.recommendations.items[d].capiVideo=e,p=e;var n=a.getService(Bs.vidora);null==n||n.client.trackShown(e)}})})}})},i).observe(e)}else new IntersectionObserver(function(t,e){t.forEach(function(t){if(0<t.intersectionRatio){e.disconnect();var n=a.getService(Bs.vidora);null==n||n.client.trackShown(p)}})}).observe(e);ks.onClickOnly(e,function(){if(p.fetched){var t=a.container.getPluginInstance(lo.pluginName);try{t.close.close()}catch(t){}t.expand.expand(p);var e=a.getService(Bs.vidora);null==e||e.client.trackClick(p);var n=a.getService(Bs.analytics).omniture;n.track([R.SELECT_PLAYLIST]),n.track([R.FULLSCREEN_CHANGE])}}),t.htmlElements.push(e)},t=this;for(var n in c)e(n)},e.prototype.show=function(){for(var a=this.container.getService(Bs.context),e=0,t=this.htmlElements,n;e<t.length;e++)n=t[e],n.style.display=n.getAttribute("data-capi-id")===a.capiVideo.id?"none":"block"},e.prototype.appendTo=function(t){t.appendChild(this.element)},e.pluginName="LP_PLUGIN_RECOMMENDATIONS",e.className="lp-recommendations",e}(A),to=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),no=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;n.element.className=e.CSS_CLASS,n.container=t,n.setEvents();var i=n.container.getService(Bs.lightningPlayerOrchestrator);return n.appendTo(i.overlay),n.element.style.display="none",n}return to(e,a),e.prototype.close=function(){this.container.getService(Bs.lightningPlayerOrchestrator).disposeAll(),this.element.style.display="none"},e.prototype.setEvents=function(){var a=this,e=this.container.getService(Bs.eventManager),t=this.container.getService(Bs.lightningPlayerOrchestrator);e.addCustomListener(this.container,Kr.EVENT_RECOMMENDATIONS_DEPLETED,function(){t.current.bcPlayer.on("ended",function(){a.element.style.display="block"})}),e.addCustomListener(this.container,_r.EVENT_SWIPE_DOWN,function(){a.element.style.display="none"}),ks.onClick(this.element,function(){a.container.getService(Bs.analytics).omniture.track([R.FULLSCREEN_CHANGE]),a.close()})},e.prototype.appendTo=function(t){t.appendChild(this.element)},e.CSS_CLASS="vms-vertical-close",e}(N),ao=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),io=function(a){function s(e){var t=a.call(this,document.createElement("div"))||this;return t.animate=!0,t.element.className=s.CSS_CLASS,t.element.innerHTML="Swipe up to see more",t.container=e,t.setEvents(),t}return ao(s,a),s.prototype.setAnimation=function(){var t=this;sessionStorage.setItem(s.STORAGE,"true");var e=this.container.getService(Bs.lightningPlayerOrchestrator);this.appendTo(e.overlay),!1!==this.animate&&setTimeout(function(){ks.addClass(e.current.view.element,"bounce-effect"),ks.addClass(e.current.view.element,"bounceup"),ks.addClass(e.next.view.element,"bounce-effect"),ks.addClass(e.next.view.element,"bounceup"),ks.addClass(t.element,"bounceup"),setTimeout(function(){t.animate&&e.current&&e.next&&(ks.removeClass(e.current.view.element,"bounceup"),setTimeout(function(){ks.removeClass(e.current.view.element,"bounce-effect"),ks.removeClass(e.next.view.element,"bounce-effect")},500),ks.removeClass(e.next.view.element,"bounceup"),ks.removeClass(t.element,"bounceup"))},1200)},500)},s.prototype.setEvents=function(){var t=this,e=this.container.getService(Bs.eventManager),a=this.container.getService(Bs.lightningPlayerOrchestrator);e.addCustomListener(this.container,qn.EVENT_ENTER_FULLSCREEN,function(){var i=6e3,r=setInterval(function(){i-=500;var e=null!==sessionStorage.getItem(s.STORAGE);null!==new URLSearchParams(window.location.search).get("bounce")&&(e=!1),0>=i&&a.hasRecommendations&&a.next&&!e&&(t.setAnimation(),clearInterval(r)),e&&clearInterval(r)},500);e.addCustomListener(t.container,_r.EVENT_SWIPE_UP,function(){t.animate=!1,clearInterval(r),a.current&&(ks.removeClass(a.current.view.element,"bounce-effect"),ks.removeClass(a.current.view.element,"bounceup")),a.next&&(ks.removeClass(a.next.view.element,"bounce-effect"),ks.removeClass(a.next.view.element,"bounceup")),ks.removeClass(t.element,"bounceup"),t.element.style.display="none"})})},s.prototype.appendTo=function(t){t.appendChild(this.element)},s.CSS_CLASS="vms-vertical-swipe-up-to-see-more",s.STORAGE="lp-bouncing-shown",s}(N),ro=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),oo=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.counter=1,t.inactivityLimit=5,t.setEvents(),t}return ro(o,a),o.prototype.setEvents=function(){var t=this;this.container.getService(Bs.eventManager).addCustomListener(this.container,_r.EVENT_AUTO_SWIPES,function(){t.counter++,t.counter===t.inactivityLimit&&t.showInactivity(),t.container.getService(Bs.analytics).omniture.track([R.AUTOPLAY])})},o.prototype.hideInactivityPanel=function(){var a=this.container.getService(Bs.lightningPlayerOrchestrator),n,e;if((null===(n=this.element)||void 0===n?void 0:n.parentNode)===(null===(e=a.current.bcPlayer)||void 0===e?void 0:e.el_))try{a.current.bcPlayer.el_.removeChild(this.element)}catch(t){}},o.prototype.showInactivity=function(){var t=this,e=this.container.getService(Bs.lightningPlayerOrchestrator),n=this.container.getPluginInstance(lo.pluginName);e.next.bcPlayer.on("ended",function(){t.element=document.createElement("div"),t.element.className=o.className;var a=document.createElement("div");a.className="lp-inactivity-container",t.continueWatching=document.createElement("div"),t.continueWatching.className="continue-watching",t.continueWatching.innerHTML="Continue watching",t.cancel=document.createElement("button"),t.cancel.className="lp-inactivity-cancel",t.cancel.innerHTML="Cancel",a.innerHTML="<h3>Are you still watching?</h3>",a.appendChild(t.continueWatching),a.appendChild(t.cancel),t.element.appendChild(a),e.current.bcPlayer.el_.appendChild(t.element),ks.onClick(t.continueWatching,function(){t.counter=0,e.current.bcPlayer.el_.removeChild(t.element),t.hideInactivityPanel(),e.current.autoNext(),n.close.element.style.display="none"}),ks.onClickOnly(t.cancel,function(){n.close.element.style.display="none",e.disposeAll()}),n.close.element.style.display="block"})},o.pluginName="LP_PLUGIN_INACTIVITY",o.className="lp-inactivity",o}(A),so=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),lo=function(a){function e(e){var i=a.call(this,e)||this;return i.orchestrator=new Qr(i.container),i.setEvents(),i}return so(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.context);if(e.isVertical()&&!Ms.isAmp()){new re.ResizeObserver(function(){zn.fitInViewport(a.container)}).observe(document.body),zn.fitInViewport(this.container);var t=this.getService(Bs.eventManager);t.addListener(this.container,"ready",function(){a.canonicalVideo=e.capiVideo;var n=a.getService(Bs.environment);a.container.bcPlayer().muted("true"===localStorage.getItem(ki.STORAGE_NAME)),a.container.bcPlayer().tech_.off("dblclick"),a.container.bcPlayer().removeTechControlsListeners_(),ks.removeClass(a.container.view.element,"vms-mobile"),a.expand=new qn(a.container,a.container.bcPlayer().el_),a.close=new no(a.container),n.browser.isDesktop()&&(a.share=new ur(a.container)),new Bi(a.container).appendTo(a.container.bcPlayer().el_),new Pi(a.container).appendTo(a.container.bcPlayer().el_),a.mute=new ki(a.container),a.mute.appendTo(a.container.bcPlayer().el_),a.description=new Li(a.container),a.description.appendTo(a.container.bcPlayer().el_),a.description.refresh(e.capiVideo),new fi(a.container).appendTo(a.container.bcPlayer().el_),a.recommendations=new eo(a.container),t.addCustomListener(a.container,D.CAPI_RELATED_FETCHED,function(e){a.related=e,a.orchestrator.hasRecommendations=!0;var t=a.container.getPluginInstance(ar.pluginName);a.recommendations.appendTo(t.view.element),a.recommendations.addRecommendations(e),a.expand.expanded&&!a.orchestrator.next&&a.orchestrator.getNext()}),t.addListener(a.container,"pause",function(){a.recommendations.show()}),t.addListener(a.container,"ended",function(){var e,t;a.container.getPluginInstance(An.pluginName).forceStop();var n=a.container.getPluginInstance(qi.pluginName);null===(e=null==n?void 0:n.events)||void 0===e||e.cancelCountdown(),a.description.element.classList.remove("expanded"),null===(t=a.description.element.querySelector(".seemore"))||void 0===t||t.classList.remove("seeless"),a.container.bcPlayer().el_.classList.remove("lp-description-expanded"),a.container.view.element.querySelector(".vms-description-overlay").classList.add("hidden-node")}),a.navigation=new Kr(a.container,a.container.view.wrapper),a.inactivity=new oo(a.container),n.browser.isMobile()&&(a.swipeUp=new io(a.container))}),t.addMultipleListener(this.container,["play","timeupdate"],function(){a.expand.expanded&&a.container.bcPlayer().pause()}),t.addCustomListener(this.container,qn.EVENT_ENTER_FULLSCREEN,function(){a.container.bcPlayer().pause()}),t.addListener(this.container,"fullscreenchange",function(){var e=a.container.bcPlayer();e.isFullscreen()&&(e.exitFullscreen(),a.expand.expand())}),-1<this.container.view.cssClasses.indexOf("martini-fullscreen")&&this.expand.expand()}},e.pluginName="PLUGIN_VERTICAL",e.CSS_CLASS="vms-vertical-player",e}(A),co=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),po=function(a){function s(e){var t=a.call(this,e)||this;t.autoPlay=!0,t.preventViewabilityPause=!1,t.currentlyPlayingVideo=null,t.firstPlay=!0,t.playerType="single player",t.playOrder=1,t.recommendationsOrigin="",t.ssai=!1,t.admiralEngaged=!1,t.adsDisabled=!1,t.errored=!1,t.retryPlaybackOnError=5,t.sticky=!1,t.manuallyStarted=!1,t.clickToPlay=!1,t.hasClosedCaptions=!1,t.recommendationsStartIndex=0,t.recommendationsType="",t.videoQuality="auto",t.hasBeenVisible=!1,t.mobilePlaylistItems=[],t.currentlyPlayingMobileItem=null,t.hasRecommendations=!1,t.videoContentType=s.CT_STANDARD;var n=e.getService(Bs.environment);(-1<e.view.cssClasses.indexOf("vms-autoplay-off")||-1<e.view.cssClasses.indexOf("autoplay-off")||!n.browser.isDesktop()||n.isHubPage||t.isShowcase())&&(n.isSky()?t.autoPlay=!0:t.autoPlay=!1),n.isSky()&&(t.autoPlay=!0),(-1<e.view.cssClasses.indexOf("vms-autoplay-off")||-1<e.view.cssClasses.indexOf("autoplay-off"))&&ks.addClass(e.view.element,"vms-autoplay-disabled"),e.view.element.hasAttribute("vms-sticky-target")&&(t.sticky=!0);var i=t.getService(Bs.pageManager);return i&&i.currentlyPlaying&&i.currentlyPlaying!==e&&i.currentlyPlaying.view.element.parentNode&&(t.autoPlay=!1),t.playerType=mi.get(e),t.container=e,t.visibility=new dt(e),t.visibility.setEvents(),t.fetchedRecommendationsAmount=parseInt(e.view.element.getAttribute("vms-recs-limit")),t}return co(s,a),s.prototype.withCapiData=function(t){this.capiVideo=t,this.initClosedCaptions(t),this.getService(Bs.eventManager).trigger(this.container,s.EVENT_CAPI_LOADED)},s.prototype.initClosedCaptions=function(t){this.hasClosedCaptions=t&&t.extendedMetadata&&t.extendedMetadata.hasCaptions},s.prototype.hasSubtitles=function(){return this.hasClosedCaptions},s.prototype.forceHubStyle=function(){return this.container.view.element.hasAttribute("vms-hub-style")},s.prototype.withBCVideo=function(t){this.bcVideo=t;for(var e=!1,n=0,i=t.text_tracks,r;n<i.length;n++)r=i[n],"captions"!==r.kind&&"subtitles"!==r.kind||-1<r.src.indexOf(".vtt")&&(e=!0);this.hasClosedCaptions=this.hasClosedCaptions||t&&t.tags&&-1<t.tags.indexOf(s.CC_TAG)||e,t.custom_fields&&t.custom_fields.ad_control&&t.custom_fields.ad_control===s.AC_SENSITIVE?(this.adControl=s.AC_SENSITIVE,this.autoPlay=!1,this.adsDisabled=!0,this.videoContentType=s.CT_SENSITIVE):t.custom_fields&&t.custom_fields.ad_control&&t.custom_fields.ad_control===s.AC_SPONSORED?(this.adControl=s.AC_SPONSORED,this.adsDisabled=!0,this.videoContentType=s.CT_SPONSORED):(this.videoContentType=s.CT_STANDARD,this.adsDisabled=this.getService(Bs.environment).adsDisabled),-1<this.container.view.cssClasses.indexOf(s.SPONSORED_CSS)&&(this.adControl=s.AC_SPONSORED,this.adsDisabled=!0,this.videoContentType=s.CT_SPONSORED);var o=this.container.getPluginInstance(Si.pluginName);o&&o.shouldAdsBeDisabled()&&(this.adsDisabled=!0)},s.prototype.isVertical=function(){var n=!1,e=Ms.getSearchParams();return!Ms.isAmp()&&(("true"===e[lo.CSS_CLASS]||-1<this.container.view.cssClasses.indexOf(lo.CSS_CLASS))&&(this.forceAutoplay(!1),ks.addClass(this.container.view.element,lo.CSS_CLASS),n=!0),n)},s.prototype.isShowcase=function(){var t=!1;return-1<Ms.getDomain().indexOf(Ds.THE_AUSTRALIAN)&&this.container.view.element.closest(".module-content")&&this.container.view.element.closest(".module-content").closest(".module.video-showcase")&&(t=!0),t},s.prototype.checkUserTypeParameter=function(){var n=this.container.view.element.getAttribute("vms-userType"),e=this.getService(Bs.environment);n&&"s"===n&&-1<Ds.PROJECT0_SITES.indexOf(e.getDomain())&&(this.adsDisabled=!0)},s.prototype.checkAdsDomainDisabled=function(){-1!==Ds.ADS_DISABLED_SITES.indexOf(Ms.getDomain())&&(this.adsDisabled=!0)},s.prototype.isSticky=function(){return ks.hasClass(this.container.view.element,"vms-sticky")},s.prototype.useMobileUi=function(){return-1<this.container.view.cssClasses.indexOf(s.USE_MOBILE_UI_CLASS)},s.prototype.canAutoplay=function(){var t=this.autoPlay;return t=je.get(this.container).autoplayEnabled,this.isShowcase()&&(t=!this.firstPlay),this.adControl!==s.AC_SENSITIVE&&t},s.prototype.canAutoPlayPlaylist=function(){var a=this.container.getService(Bs.environment),e=this.container.getService(Bs.utag),t=a.browser.isMobile()||a.browser.isIOS(),n=a.getPageType(e,this.container);return!(this.firstPlay||n!==c.ARTICLE_PAGE_TYPE&&n!==c.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE&&n!==c.INDEX_PAGE_TYPE||t||-1!==Ms.getDomain().indexOf(Ds.TASTE))},s.prototype.forceAutoplay=function(t){this.autoPlay=t},s.USE_MOBILE_UI_CLASS="vms-mobile-ui",s.CC_TAG="cc-enabled",s.AC_SENSITIVE="Sensitive Content",s.AC_SPONSORED="Sponsored Content",s.SPONSORED_CSS="vms-sponsored",s.CT_SPONSORED="Sponsored",s.CT_SENSITIVE="Sensitive",s.CT_STANDARD="Standard",s.EVENT_CAPI_LOADED="EVENT_CAPI_LOADED",s}(u),mo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),uo=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return mo(e,n),e.prototype.log=function(t){"true"===Ms.getSearchParams().debug&&console.log("replayer %c"+this.container.bcInfo.getVideoId(),"color: #8eb533",t)},e}(u),go=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),yo=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.createComponent(),n}return go(e,a),e.prototype.createComponent=function(){this.loader=document.createElement("div"),this.loader.className="vms-controls";var a=this.container.getService(Bs.environment),e=this.container.getService(Bs.context);if(a.browser.isMobile()||e.isVertical()){var t=new ne;this.loader.appendChild(t.element)}else this.loader.innerHTML="<div class=\"vms-center\">\n                                <a class=\"vms-btn-loading\"></a>\n                            </div>";this.container.view.element.appendChild(this.loader)},e.pluginName="PLUGIN_LOADER",e}(A),_o=function(){function t(){}return t.disabled="VIDORA_DISABLED",t.beacon="VIDORA_BEACON",t.enabled="VIDORA_ENABLED",t}(),Eo=function(){function t(a,r,t,n){this.apiKey="",this.secret="",this.enabled="",this.apiKey=a,this.secret=r,this.enabled=t,this.container=n}return t.prototype.getApiKey=function(){return this.apiKey},t.prototype.beaconEnabled=function(){return-1<[_o.beacon,_o.enabled].indexOf(this.enabled)},t.prototype.isEnabled=function(){var t=this.container.getService(Bs.environment).getDomain();return-1===Ds.VIDORA_DISABLED_SITES.indexOf(t)&&!ks.hasClass(this.container.view.element,"vms-legacy-recommendations")&&this.enabled===_o.enabled},t}(),vo={beta:{key:"newsau_video.93DFAEA2BB0A788E1466709DFF2B086C",secret:"17157905A52B991CBB7EA45FF1206F0F29B2B44CC622FAA663",enabled:_o.enabled},prod:{key:"newsau_video.93DFAEA2BB0A788E1466709DFF2B086C",secret:"17157905A52B991CBB7EA45FF1206F0F29B2B44CC622FAA663",enabled:_o.enabled}},Ao=function(){function t(){}return t.get=function(r,e){var t=vo[r.getEnvName()],n=new Eo("","","disabled",e);if(t){var i=Ms.getSearchParams(),o=i.vidora&&i.vidora||t.enabled;n=new Eo(t.key,t.secret,o,e)}return n},t}(),Co=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),So=function(n){function e(e){return n.call(this,e)||this}return Co(e,n),e.prototype.augment=function(){return new Promise(function(n,e){return e([])})},e}(u),ho=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),To=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return ho(e,n),e.prototype.withVidora=function(t){this.vidora=t},e.prototype.augment=function(){var s=this,n=this.container.getService(Bs.context).fetchedRecommendationsAmount||e.DEFAULT_PAGE_SIZE;return new Promise(function(c,e){var t=s.getService(Bs.environment),i=function(e){if(!(0<e.length))return c([]);var t=[],i=s.getService(Bs.capi),r=e.slice(0,n);e=e.slice(n,e.length),i.getVideosById(r,s.container,$r.RECOMMENDATION_KEY).then(function(r){t=t.concat(r);for(var n=0,i=e;n<i.length;n++){var o=i[n],a=new l;a.id=o,a.fetched=!1,t.push(a)}return c(t)})},r=s.getService(Bs.context);r.recommendationsType&&"similars"===r.recommendationsType?s.vidora.getSimilarities(Vs.getDomain(t)).then(i).catch(function(){return e([])}):s.vidora.getRecommendations(Vs.getDomain(t),r.recommendationsStartIndex).then(i).catch(function(){return e([])})})},e.DEFAULT_PAGE_SIZE=3,e}(So),No=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Io=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return No(e,n),e.prototype.withVidora=function(t){this.vidora=t},e.prototype.augment=function(t){var s=this;return new Promise(function(c,n){var a=s.getService(Bs.environment);s.vidora.getTrending(Vs.getDomain(a)).then(function(i){if(0<i.length){var r=i.slice(0,e.DEFAULT_PAGE_SIZE);return i=i.slice(e.DEFAULT_PAGE_SIZE,i.length),s.getService(Bs.capi).getVideosById(r,s.container,$r.RECOMMENDATION_KEY).then(function(o){for(var e=0,t=i;e<t.length;e++){var n=t[e],r=new l;r.id=n,r.fetched=!1,o.push(r)}return c(o)}).catch(function(){return n([])})}return c(t)}).catch(function(){return n([])})})},e.DEFAULT_PAGE_SIZE=4,e}(So),bo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Po=function(a){function e(e,r){var n=a.call(this,e)||this;return n.trackedItems=[],n.vidora=r,n.setEvents(),n}return bo(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);e.addSingleCustomListener(this.container,qo.BC_READY,function(){if(a.vidora.addVidoraScript(),a.vidora.config.isEnabled()){var e=a.getService(Bs.capi),t=new To(a.container,e);t.withVidora(a.vidora),e.registerAugmenter(t);var n=new Io(a.container,e);n.withVidora(a.vidora),e.registerAugmenter(n,ue.TYPE_TRENDING)}}),e.addSingleEventListener(this.container,"play",function(){if(a.vidora.client)a.vidora.client.trackPlay();else var e=100,t=setInterval(function(){(0==--e||a.vidora.client)&&(clearInterval(t),a.vidora.client&&a.vidora.client.trackPlay())},100)}),e.addSingleCustomListener(this.container,Te.UP_NEXT_CLICK,function(){a.vidora.client&&a.vidora.client.trackClick()}),e.addCustomListener(this.container,j.EVENT_ITEM_VIEWPORT_VISIBLE,function(e){var t=e.capiVideo;t&&-1===a.trackedItems.indexOf(t.id)&&a.vidora.client&&(a.trackedItems.push(t.id),a.vidora.client.trackShown(t))}),e.addCustomListener(this.container,Se.PLAYLIST_ITEM_PLAYED,function(e){var t=e.capiVideo;t&&-1===a.trackedItems.indexOf(t.id)&&a.vidora.client&&(a.trackedItems.push(t.id),a.vidora.client.trackShown(t))})},e}(u),wo=function(){function t(){}return t.getUserId=function(){return T.getCookie(t.PCSID)},t.getCookieId=function(){return T.getCookie(t.NCGID)},t.PCSID="metrics_pcsid",t.NCGID="_ncg_id_",t.NOT_SET="not set",t}(),Lo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oo=function(a){function o(e,s,n,i){void 0===i&&(i=null);var r=a.call(this,e)||this;return r.config=s,r.api=n,r.pageSize=i,r}return Lo(o,a),o.prototype.getUrl=function(t,e){var n=""+o.BASE_URL+t;return e.forEach(function(a,e){n=n.replace(new RegExp("{"+e+"}","g"),a)}),n=this.addApiKey(n)},o.prototype.addApiKey=function(n){var e="?";return-1<n.indexOf(e)&&(e="&"),n+(e+"api_key=")+this.config.getApiKey()},o.prototype.setCategory=function(a,e){var t=this.getService(Bs.context);a.set("category",e+(""===e?"":"%26")+"aspect_ratio_"+(t.capiVideo.aspectRatio||"16:9").replace(":","_"))},o.prototype.getItemSimilarities=function(t,e,n){var a=new Map;return a.set("user_id",t),a.set("item_id",e),a.set("limit",""+(this.pageSize||o.SIMILARITIES_LIMIT)),this.setCategory(a,n||""),fetch(this.getUrl(o.SIMILARITIES_URL,a))},o.prototype.getRecommendations=function(t,e,n){var a=new Map;return a.set("user_id",t||this.api.getUserId()),a.set("limit",""+(this.pageSize||o.SIMILARITIES_LIMIT)),a.set("start_index",""+e),this.setCategory(a,n||""),fetch(this.getUrl(o.RECOMMENDATIONS_URL,a))},o.prototype.getTrending=function(t){var e=new Map;return e.set("limit",""+o.TRENDING_LIMIT),this.setCategory(e,t||""),fetch(this.getUrl(o.TRENDING_URL,e))},o.prototype.track=function(a,e){if(this.config.beaconEnabled()){var t=this.container.getService(Bs.context),n=e||t.capiVideo;this.api.send(a,n.id,{params:{cookie_id:wo.getCookieId(),group_id:Ms.getDomain()}})}},o.prototype.trackPlay=function(t){this.track(Ro.EVENT_PLAY,t)},o.prototype.trackShown=function(t){this.track(Ro.EVENT_SHOWN,t)},o.prototype.trackClick=function(t){this.track(Ro.EVENT_CLICK,t)},o.BASE_URL="https://api.vidora.com/",o.SIMILARITIES_URL="v1/users/{user_id}/items/{item_id}/similars?limit={limit}&category={category}",o.SIMILARITIES_LIMIT=10,o.TRENDING_URL="v1/items/trending?limit={limit}&categories={category}",o.RECOMMENDATIONS_URL="v1/users/{user_id}/recommendations?limit={limit}&category={category}&start_index={start_index}",o.TRENDING_LIMIT=10,o}(u),fo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ro=function(a){function s(e){var t=a.call(this,e,s.pluginName)||this;return(t.api=null,t.fetchedTypes=[],t.config=Ao.get(t.getService(Bs.environment),e),t.config.beaconEnabled())&&(t.events=new Po(e,t),t.container.getService(Bs.eventManager).addListener(t.container,"ready",function(){t.serviceProvider.register(Bs.vidora,t)})),t}return fo(s,a),s.prototype.addVidoraScript=function(){var t=document.createElement("script");t.setAttribute("script-name","vidora"),t.innerHTML="(function(a,b,c,d,e){var f={_q:[]};f.ready=f.push=function(a){f._q.push(a)},c in a||(a[c]=f),a[c].ready(function(a,b){b._i(d,e)})})(window,document,\"vidora\",\""+this.config.getApiKey()+"\");",document.head.appendChild(t),this.bindEvents()},s.prototype.ready=function(){var a=this;return new Promise(function(e,n){var i=s.READY_ATTEMPTS,r=setInterval(function(){if(0==--i&&!a.api)return clearInterval(r),n({error:"VIDORA_NOT_READY"});if(a.api){wo.getUserId()!==wo.NOT_SET&&a.api.setUserId(wo.getUserId());var o=a.container.getService(Bs.context).isVertical()?30:null;return a.client=new Oo(a.container,a.config,a.api,o),clearInterval(r),e()}},100)})},s.prototype.getSimilarities=function(t){var a=this;return new Promise(function(n,e){a.ready().then(function(){if(a.container.log("[Vidora]",a.config.isEnabled()),!a.config.isEnabled())return e();var i=a.getService(Bs.context);a.client.getItemSimilarities(a.api.getUserId(),i.capiVideo.id,t).then(function(t){t.json().then(function(t){t.items&&0<t.items.length&&a.fetchedTypes.push(s.TYPE_SIMILARITIES),n(t.items)})}).catch(function(){return e()})}).catch(function(){return e()})})},s.prototype.getTrending=function(t){var a=this;return new Promise(function(n,i){a.ready().then(function(){return a.config.isEnabled()?void a.client.getTrending(t).then(function(t){t.json().then(function(t){t?(0<t.length&&a.fetchedTypes.push(s.TYPE_TRENDING),n(t)):i([])})}).catch(function(){return i()}):i()}).catch(function(){return i()})})},s.prototype.getRecommendations=function(a,e){var l=this;return void 0===e&&(e=0),new Promise(function(n,i){l.ready().then(function(){return l.config.isEnabled()?void l.client.getRecommendations(l.api.getUserId(),e,a).then(function(t){t.json().then(function(r){if(r&&r.items&&0<r.items.length){for(var e=[],t=0,o=r.items,a;t<o.length;t++)a=o[t],e.push(a.id);var s=l.getService(Bs.context);r.next_index&&0<r.next_index&&r.next_index>s.recommendationsStartIndex?s.recommendationsStartIndex=r.next_index:l.getService(Bs.eventManager).trigger(l.container,Te.UP_NEXT_DEPLETED),n(e)}else i([])})}):i()})})},s.prototype.wasContentFetched=function(){return 0<this.fetchedTypes.length},s.prototype.bindEvents=function(){var n=this;window.vidora.ready(function(e){n.api=e})},s.pluginName="PLUGIN_VIDORA",s.JS_PATH="https://assets.vidora.com/js/vidora-client.1.x.x.min.js",s.EVENT_PLAY="play",s.EVENT_SHOWN="shown",s.EVENT_CLICK="click",s.TYPE_SIMILARITIES="SIMILARITIES",s.TYPE_TRENDING="TRENDING",s.READY_ATTEMPTS=50,s.VMS_ATTR_TYPE="vms-vidora-type",s}(A),Mo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Do=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.setEvents(),n}return Mo(e,a),e.prototype.getPlayer=function(t){return t.ads.isAdPlaying()&&t.ima3&&t.ima3.adPlayer||t},e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager),i=this.getService(Bs.context);e.addCustomListener(this.container,dt.EVENT_SCROLL_HIDDEN,function(){if(!i.preventViewabilityPause){var e=a.container.bcPlayer();e&&(i.wasPlaying=!!i.playing,a.getPlayer(e).pause())}}),e.addCustomListener(this.container,dt.EVENT_SCROLL_VISIBLE,function(){var e=a.container.bcPlayer();e&&i.wasPlaying&&a.getPlayer(e).play()}),e.addCustomListener(this.container,dt.EVENT_PAGE_HIDDEN,function(){if(!i.preventViewabilityPause){var e=a.container.bcPlayer();e&&(i.wasPlaying=!!i.playing,a.getPlayer(e).pause())}}),e.addCustomListener(this.container,dt.EVENT_PAGE_VISIBLE,function(){var e=a.container.bcPlayer();e&&i.wasPlaying&&a.getPlayer(e).play()})},e.pluginName="PLUGIN_VIEWABILITY",e}(A),ko=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vo=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.setEvents(),n}return ko(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.environment),o=this.getService(Bs.context),t=this.getService(Bs.eventManager);t.addListener(this.container,"ready",function(){if(!e.browser.isIOS()&&!o.ssai){var t=a.container.bcPlayer(),n=t.ima3&&t.ima3.adControlBar&&t.ima3.adControlBar.fullscreenToggle;n&&n.addClass("active")}}),t.addListener(this.container,"ima3-started",function(){if(e.browser.isIOS()&&!o.ssai){var t=a.container.bcPlayer(),n=t.ima3&&t.ima3.adControlBar&&t.ima3.adControlBar.fullscreenToggle;n&&n.removeClass("active")}}),t.addListener(this.container,["adserror","ads-allpods-completed","ads-ad-skipped","adtimeout"],function(){var e=a.container.bcPlayer(),n,t;o.ssai||null===(n=e.ima3.adControlBar.fullscreenToggle)||void 0===n||n.addClass("active"),null===(t=e.controlBar.fullscreenToggle)||void 0===t||t.addClass("active")})},e.pluginName="PLUGIN_IOS_FULLSCREEN_ADS",e}(A),Bo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xo=function(a){function e(){var t=a.call(this,document.createElement("div"))||this;return t.element.className=e.CSS_NAME,t.progress=document.createElement("div"),t.progress.className="rp-progress",t.element.appendChild(t.progress),t}return Bo(e,a),e.CSS_NAME="rp-alternate-progress-bar",e}(N),Uo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ho=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.setEvents(),n}return Uo(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager);e.addListener(this.container,"ready",function(){var e=a.container.bcPlayer();a.view=new xo,a.recommendationsBar=new xo,a.recommendationsBar.element.className+="-mobile",a.container.getPluginInstance(ar.pluginName).mobileView.element.appendChild(a.recommendationsBar.element),e.el().appendChild(a.view.element)}),e.addListener(this.container,"timeupdate",function(){if(a.container.view.element.parentNode){var e=a.container.bcPlayer(),t=e.currentTime(),n=e.duration();a.view.progress.style.width=100*(t/n)+"%",a.recommendationsBar.progress.style.width=100*(t/n)+"%"}})},e.pluginName="PLUGIN_PROGRESS_BAR",e}(A),Go=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yo=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.setEvents(),n}return Go(e,a),e.prototype.setEvents=function(){var c=this,e=this.getService(Bs.eventManager),d=this.getService(Bs.context);e.addListener(this.container,"ima3-started",function(){if(!c.added){var e=c.container.bcPlayer(),t=e.ima3.adControlBar.currentTimeDisplay.el(),n=e.controlBar.CustomControlSpacer.el(),i=e.ima3.adControlBar.timeDivider.el(),r=e.ima3.adControlBar.durationDisplay.el(),a=c.getService(Bs.environment).browser;if(a.isIpad()&&(e.ima3.adControlBar.el_.appendChild(t),t.style.display="block",e.ima3.adControlBar.el_.appendChild(i),i.style.display="block",e.ima3.adControlBar.el_.appendChild(r),r.style.display="block"),a.isDesktop()&&!d.useMobileUi()){var o=e.ima3.adControlBar.fullscreenToggle.el_;e.ima3.adControlBar.el_.insertBefore(t,o),t.style.display="block",e.ima3.adControlBar.el_.insertBefore(i,o),i.style.display="block",e.ima3.adControlBar.el_.insertBefore(r,o),r.style.display="block",ks.addClass(n,"vms-spacer-sticky-ad"),e.ima3.adControlBar.el_.insertBefore(n,o)}c.added=!0}})},e.pluginName="PLUGIN_DURATION_DISPLAY",e}(A),Wo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fo=function(a){function r(e){var t=a.call(this,e,r.pluginName)||this;return t.setEvents(),t}return Wo(r,a),r.prototype.setEvents=function(){var t=this;this.getService(Bs.eventManager).addSingleCustomListener(this.container,qo.BC_READY,function(){-1<t.container.view.cssClasses.indexOf("vms-nudge")&&new kn(r.JS_PATH,function(){var e={account:r.NUDGE_ACCOUNT};t.container.view.cssClasses.indexOf(r.NUDGE_CAMPAIGN_ATTR_NAME)&&(e.campaign_id=t.container.view.cssClasses[t.container.view.cssClasses.indexOf(r.NUDGE_CAMPAIGN_ATTR_NAME)]),t.container.bcPlayer().Nudge(e)}).load()})},r.JS_PATH="https://cdn.ndg.io/brightcove/brightcove.1.4.min.js",r.NUDGE_ACCOUNT="6636800368",r.NUDGE_CAMPAIGN_ATTR_NAME="data-nudge-campaign",r.pluginName="Nudge",r}(A),Ko=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),jo=function(n){function e(){var t=n.call(this,document.createElement("div"))||this;return t.element.className=e.CSS_CLASS,t.element.style.display="none",t.message=document.createElement("div"),t.message.className="message",t.message.innerHTML="<p><strong>Video paused due to user inactivity</strong></p><p>Continue watching?</p>",t.button=document.createElement("button"),t.button.innerText="Yes",t.element.appendChild(t.message),t.message.appendChild(t.button),t}return Ko(e,n),e.prototype.attach=function(t){t.appendChild(this.element)},e.CSS_CLASS="vms-user-inactive",e}(N),Xo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),zo=function(a){function i(e,r){var n=a.call(this,e)||this;return n.watched=0,n.plugin=r,n.setEvents(),n}return Xo(i,a),i.prototype.setEvents=function(){var t=this,e=this.getService(Bs.eventManager);e.addListener(this.container,"ready",function(){t.plugin.view.attach(t.container.view.wrapper),t.addUserEvents()}),e.addListener(this.container,"loadedmetadata",function(){t.watched++,t.watched===i.PLAY_LIMIT&&(setTimeout(function(){t.container.bcPlayer().pause()},500),t.plugin.view.show())}),ks.onClickOnly(this.plugin.view.button,function(){t.plugin.view.hide(),t.container.bcPlayer().play(),t.reset()}),e.addCustomListener(this.container,i.EVENT_RESET_USER_INACTIVITY,function(){t.reset()})},i.prototype.reset=function(){this.watched=1},i.prototype.addUserEvents=function(){var n=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,Te.UP_NEXT_CLICK,function(){n.reset()}),e.addCustomListener(this.container,fe.ON_SKIP_EVENT,function(){n.reset()}),e.addCustomListener(this.container,Ji.EVENT_ENDSTATE_METADATA_CLICK,function(){n.reset()}),e.addListener(this.container,"seek",function(){n.reset()}),this.container.bcPlayer().controlBar.playToggle&&ks.onFutureClick(this.container.bcPlayer().controlBar.playToggle.el(),function(){n.reset()})},i.EVENT_RESET_USER_INACTIVITY="EVENT_RESET_USER_INACTIVITY",i.PLAY_LIMIT=5,i}(u),Qo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ea=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.container.getService(Bs.context).isVertical()||(n.view=new jo(t),n.events=new zo(t,n)),n}return Qo(e,a),e.pluginName="PLUGIN_USER_INACTIVITY",e}(A),ta=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),na=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable()&&n.setEvents(),n}return ta(e,a),e.prototype.setEvents=function(){var n=this;this.getService(Bs.eventManager).addListener(this.container,"ended",function(){var e=n.container.bcPlayer();e.isFullscreen()&&e.exitFullscreen()})},e.pluginName="PLUGIN_MOBILE_FULLSCREEN",e}(ce),ia=function(){function t(){}return t.positionUnderHeader=function(a){var e=0,t=document.getElementById("header-fixed");e=t?t.offsetHeight:(t=document.getElementsByTagName("header")&&document.getElementsByTagName("header")[0])&&t.offsetHeight||0,a.style.top=e+"px"},t.mimic=function(n,e){n.style.width=e.offsetWidth+"px",n.style.height=e.offsetHeight+"px"},t}(),ra=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),oa=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.CSS_NAME,n.container=t,n.container.view.element.parentElement.appendChild(n.element),n.hide(),n}return ra(e,a),e.CSS_NAME="vms-sticky-fake",e}(N),aa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),sa=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.container=t,n.element.className=e.CSS_NAME,n.setEvents(),n.hide(),n.container.view.wrapper.appendChild(n.element),n}return aa(e,a),e.prototype.setEvents=function(){var t=this;ks.onClick(this.element,function(){t.container.getPluginInstance(ua.pluginName).close()})},e.CSS_NAME="vms-close-expanded",e}(N),ca=function(){function t(){}return t.isEnabled=function(){return void 0!==Ms.getSearchParams().enableMobileSticky},t}(),la=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ua=function(a){function r(e){var t=a.call(this,e,r.pluginName)||this;return t.closed=!1,t.isSticky=!1,t.parentVisibilityThreshold=95,t.isApplicable()&&ca.isEnabled()&&(t.setEvents(),t.fake=new oa(t.container),t.closeButton=new sa(t.container)),t}return la(r,a),r.prototype.onDisplay=function(){var t=this.getService(Bs.environment);this.container.bcPlayer().hasStarted()&&t.browser.isPortrait()&&(this.isSticky=!0,ia.mimic(this.fake.element,this.container.view.element),ks.addClass(this.container.view.element,r.CSS_CLASS),ia.positionUnderHeader(this.container.view.element),this.closeButton.show(),this.fake.show())},r.prototype.setEvents=function(){var t=this,e=this.getService(Bs.eventManager);e.addCustomListener(this.container,dt.EVENT_SCROLL_HIDDEN,function(){t.isSticky||t.closed||t.onDisplay()}),window.addEventListener("scroll",function(){return t.checkVisibility()}),window.addEventListener("resize",function(){return t.refreshStickyCss()}),e.addCustomListener(this.container,r.PLAY_EVENT,function(){ks.addClass(t.container.view.element,r.CSS_CLASS),t.container.bcPlayer().play()})},r.prototype.hideSticky=function(){ks.removeClass(this.container.view.element,r.CSS_CLASS),this.container.view.element.style.top="auto",this.fake.hide(),this.closeButton.hide()},r.prototype.checkVisibility=function(){F.getVisibilityRate(this.fake.element)>this.parentVisibilityThreshold&&this.isSticky&&(this.isSticky=!1,this.container.bcPlayer().hasStarted()&&this.hideSticky())},r.prototype.refreshStickyCss=function(){this.getService(Bs.environment).browser.isPortrait()||this.hideSticky()},r.prototype.close=function(){this.closed=!0,this.hideSticky(),this.container.getService(Bs.eventManager).trigger(this.container,r.CLOSE_EVENT)},r.pluginName="MOBILE_UI_STICKY_EXPANDED",r.PLAY_EVENT="EVENT_MOBILEUI_PLAY",r.CLOSE_EVENT="EVENT_MOBILEUI_STICKY_CLOSED",r.CSS_CLASS="vms-sticky-expanded",r}(ce),da=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pa=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.MAIN_CSS,n.container=t,n.playButton=document.createElement("div"),n.playButton.className="vms-sb-thumbnail-play",n.element.appendChild(n.playButton),n.img=document.createElement("img"),n.element.appendChild(n.img),n}return da(e,a),e.prototype.withCapiVideo=function(t){this.img.src=t.poster},e.prototype.setEvents=function(){var n=this;ks.onClick(this.playButton,function(){var e=n.container.getService(Bs.eventManager);e.addSingleEventListener(n.container,"play",function(){n.container.getPluginInstance(ua.pluginName).onDisplay()}),e.trigger(n.container,ua.PLAY_EVENT)})},e.MAIN_CSS="vms-sb-thumbnail-container",e}(N),ha=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),va=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.MAIN_CSS,n.container=t,n.closeButton=document.createElement("button"),n.closeButton.className="vms-sb-actions-close",n.element.appendChild(n.closeButton),n.container.getService(Bs.environment).browser.isIOS()||(n.fullscreenButton=document.createElement("button"),n.fullscreenButton.className="vms-sb-actions-fullscreen",n.element.appendChild(n.fullscreenButton)),n}return ha(e,a),e.prototype.setEvents=function(){var n=this;ks.onClick(this.closeButton,function(){n.container.getPluginInstance(Sa.pluginName).close()}),this.fullscreenButton&&ks.onClick(this.fullscreenButton,function(){var e=n.container.bcPlayer();n.container.getService(Bs.eventManager).addSingleEventListener(n.container,"play",function(){e.requestFullscreen()}),e.el_.focus(),e.play()})},e.MAIN_CSS="vms-sb-actions-container",e}(N),ma=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fa=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.MAIN_CSS,n.container=t,n.title=document.createElement("div"),n.title.className="vms-sb-title-title",n.duration=document.createElement("div"),n.duration.className="vms-sb-title-duration",n.element.appendChild(n.title),n.element.appendChild(n.duration),n}return ma(e,a),e.prototype.withCapiVideo=function(t){this.title.innerHTML=t.title,this.duration.innerHTML=M.formatDuration(t.duration/1e3)},e.MAIN_CSS="vms-sb-title-container",e}(N),ya=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ga=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.MAIN_CSS_CLASS,n.container=t,n.thumbnailContainer=new pa(t),n.element.appendChild(n.thumbnailContainer.element),n.titleContainer=new fa(t),n.element.append(n.titleContainer.element),n.actionButtonContainer=new va(t),n.element.appendChild(n.actionButtonContainer.element),n}return ya(e,a),e.MAIN_CSS_CLASS="vms-sticky-banner",e}(N),_a=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ea=function(a){function e(e,r){var n=a.call(this,e)||this;return n.view=r,n.setEvents(),n}return _a(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager),t=this.getService(Bs.environment);window.addEventListener("resize",function(){return a.refreshStickyCss()}),e.addCustomListener(this.container,qo.BC_READY,function(){a.container.view.element.appendChild(a.view.element),a.view.actionButtonContainer.setEvents(),a.view.hide(),ia.positionUnderHeader(a.view.element),a.view.thumbnailContainer.setEvents()}),e.addCustomListener(this.container,D.CAPI_FETCHED,function(e){a.view.thumbnailContainer.withCapiVideo(e),a.view.titleContainer.withCapiVideo(e)}),e.addCustomListener(this.container,dt.EVENT_SCROLL_HIDDEN,function(){var e=a.getService(Bs.environment),t=a.container.getPluginInstance(Sa.pluginName);a.container.bcPlayer().hasStarted()||!e.browser.isPortrait()||t.closed||0>a.container.view.element.getBoundingClientRect().top&&!e.stickyMobileDisplayed&&(a.view.show(),e.stickyMobileDisplayed=a.container)}),e.addCustomListener(this.container,dt.EVENT_SCROLL_VISIBLE,function(){a.container.bcPlayer().hasStarted()||t.stickyMobileDisplayed!==a.container||(a.view.hide(),t.stickyMobileDisplayed=null)}),e.addListener(this.container,"play",function(){a.view.hide()})},e.prototype.refreshStickyCss=function(){this.view.hide()},e}(u),Aa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sa=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.closed=!1,n.isApplicable()&&ca.isEnabled()&&(n.view=new ga(t),n.events=new Ea(t,n.view)),n}return Aa(e,a),e.prototype.close=function(){this.closed=!0,this.view.hide(),this.container.getService(Bs.eventManager).trigger(this.container,e.CLOSE_EVENT)},e.pluginName="MOBILE_UI_STICKY_BANNER",e.CLOSE_EVENT="EVENT_MOBILE_UI_STICKY_BANNER_CLOSE",e}(ce),Ca=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),wa=function(a){function s(e){var t=a.call(this,e,s.pluginName)||this,n=t.container.getService(Bs.eventManager),i=s.ATTEMPTS;return n.addListener(t.container,"ready",function(){var a=setInterval(function(){i--,(localStorage.getItem(s.STORAGE_ITEM_KEY)||0==i)&&(t.pushToGoogleTag(),clearInterval(a))},100),e=s.ATTEMPTS,n=setInterval(function(){e--,(-1<document.body.innerHTML.indexOf("https://getadmiral.com")||0===e)&&(t.pauseIfPopupDisplayed(),clearInterval(n))},100)}),t}return Ca(s,a),s.prototype.admiralEngaged=function(){var t=!1;try{var e=(localStorage.getItem(s.STORAGE_ITEM_KEY)||"").split(","),n=parseInt(e[4]);t=n&&0<n}catch(t){}return t},s.prototype.pushToGoogleTag=function(){this.admiralEngaged()&&(this.getService(Bs.context).admiralEngaged=!0)},s.prototype.pauseIfPopupDisplayed=function(){-1<document.body.innerHTML.indexOf("href=\"https://getadmiral.com")&&(this.container.bcPlayer().pause(),this.container.getPluginInstance(An.pluginName).events.pause())},s.pluginName="PLUGIN_ADMIRAL_ENGAGED",s.STORAGE_ITEM_KEY="v4ac1eiZr0",s.ATTEMPTS=100,s}(A),ba=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ta=function(a){function e(e){var o=a.call(this,document.createElement("div"))||this;o.candidate=e,ks.addClass(o.element,"vms-lw-results-candidate"),o.image=document.createElement("img"),o.image.src=e.image.src;var n=document.createElement("div");n.className="image",n.appendChild(o.image);var i=document.createElement("div");return o.name=document.createElement("div"),o.name.className="name",i.appendChild(o.name),o.scoreContainer=document.createElement("div"),o.scoreContainer.className="score",i.appendChild(o.scoreContainer),o.element.appendChild(n),o.element.appendChild(i),o.refresh(),o}return ba(e,a),e.prototype.setName=function(n,e){this.name.innerHTML=n+" <strong>"+e+"</strong>"},e.prototype.setScore=function(t){isNaN(t)&&(t=.5),this.scoreContainer.innerHTML="<strong>"+Ps(100*t)+"</strong>%",.5<t?(ks.addClass(this.scoreContainer,"vms-lw-score-over50"),ks.removeClass(this.scoreContainer,"vms-lw-score-under50")):(ks.addClass(this.scoreContainer,"vms-lw-score-under50"),ks.removeClass(this.scoreContainer,"vms-lw-score-over50"))},e.prototype.refresh=function(){this.setName(this.candidate.firstname.innerText,this.candidate.lastname.innerText),this.setScore(this.candidate.finalScore),this.image.parentElement.style.border="solid 2px "+this.candidate.color,this.image.src=this.candidate.image.src},e}(N),Na=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ia=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.finalScore=.5,n.voteAllowed=!1,n.localScore=.5,n.color=t,n.element.className=e.CSS_NAME,n.pictureContainer=document.createElement("div"),n.pictureContainer.className="vms-lw-candidate-picture-container",n.image=document.createElement("img"),n.image.className="vms-lw-candidate-image",n.pictureContainer.appendChild(n.image),n.pictureContainer.style.border="solid 2px "+n.color,n.actionContainer=document.createElement("div"),n.actionContainer.className="vms-lw-candidate-action-container",n.likeContainer=document.createElement("div"),n.dislikeContainer=document.createElement("div"),n.likeContainer.className="vms-lw-action-like-container",n.dislikeContainer.className="vms-lw-action-dislike-container",n.like=document.createElement("div"),n.like.innerHTML="<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M0 0h20v20H0z\"/><path id=\"thumb\" d=\"M.833 17.5h3.334v-10H.833v10zm18.334-9.167c0-.916-.75-1.666-1.667-1.666h-5.258l.791-3.809.025-.266c0-.342-.141-.659-.366-.884l-.884-.875-5.483 5.492A1.63 1.63 0 0 0 5.833 7.5v8.333c0 .917.75 1.667 1.667 1.667H15c.692 0 1.283-.417 1.533-1.017l2.517-5.875c.075-.191.117-.391.117-.608V8.333z\" fill=\"#606669\" fill-rule=\"nonzero\"/></g></svg>",n.like.className="vms-lw-action-like",n.dislike=document.createElement("div"),n.dislike.innerHTML=n.like.innerHTML="<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M0 0h20v20H0z\"/><path id=\"thumb\" d=\"M.833 17.5h3.334v-10H.833v10zm18.334-9.167c0-.916-.75-1.666-1.667-1.666h-5.258l.791-3.809.025-.266c0-.342-.141-.659-.366-.884l-.884-.875-5.483 5.492A1.63 1.63 0 0 0 5.833 7.5v8.333c0 .917.75 1.667 1.667 1.667H15c.692 0 1.283-.417 1.533-1.017l2.517-5.875c.075-.191.117-.391.117-.608V8.333z\" fill=\"#606669\" fill-rule=\"nonzero\"/></g></svg>",n.dislike.className="vms-lw-action-dislike",n.likeContainer.appendChild(n.like),n.dislikeContainer.appendChild(n.dislike),n.actionContainer.appendChild(n.likeContainer),n.actionContainer.appendChild(n.dislikeContainer),n.nameContainer=document.createElement("div"),n.nameContainer.className="vms-lw-candidate-name-container",n.firstname=document.createElement("div"),n.firstname.className="vms-lw-candidate-firstname",n.lastname=document.createElement("div"),n.lastname.className="vms-lw-candidate-lastname",n.nameContainer.appendChild(n.firstname),n.nameContainer.appendChild(n.lastname),n.element.appendChild(n.pictureContainer),n.element.appendChild(n.nameContainer),n.element.appendChild(n.actionContainer),n.results=new Ta(n),n}return Na(e,a),e.prototype.increaseScore=function(){this.localScore+=Ya.SCORE_INCREMENT,1<=this.localScore&&(this.localScore=1)},e.prototype.decreaseScore=function(){this.localScore-=Ya.SCORE_INCREMENT,0>=this.localScore&&(this.localScore=0)},e.prototype.getFullName=function(){return this.firstname.innerText+" "+this.lastname.innerText},e.prototype.enableVote=function(){this.voteAllowed=!0,this.voteAllowed=!0,ks.addClass(this.like,"active"),ks.addClass(this.dislike,"active"),ks.removeClass(this.likeContainer,"vms-lw-clicked"),ks.removeClass(this.dislikeContainer,"vms-lw-clicked"),this.likeContainer.style.background="#404446",this.dislikeContainer.style.background="#404446"},e.prototype.disableVote=function(){this.voteAllowed=!1,this.voteAllowed=!1,ks.removeClass(this.like,"active"),ks.removeClass(this.dislike,"active")},e.prototype.displayLike=function(){this.likeContainer.style.background=this.color,ks.addClass(this.likeContainer,"vms-lw-clicked"),ks.removeClass(this.dislike,"active")},e.prototype.displayDislike=function(){this.dislikeContainer.style.background=this.color,ks.addClass(this.dislikeContainer,"vms-lw-clicked"),ks.removeClass(this.like,"active")},e.prototype.refresh=function(a,e,t,n){var i=this;this.image.src=a,this.image.onerror=function(){i.image.src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MXtmaWxsOiMxOTE5MTl9PC9zdHlsZT48cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzY5IDM3MS45VjQwMEgzMXYtMjguMUMzMSAyOTguNSA5MC41IDIzOSAxNjMuOSAyMzloNzIuMmM3My40IDAgMTMyLjkgNTkuNSAxMzIuOSAxMzIuOXoiLz48Y2lyY2xlIGNsYXNzPSJzdDEiIGN4PSIyMDAiIGN5PSIxMzgiIHI9IjgwIi8+PC9zdmc+",i.image.width=32,i.image.height=32,i.image.style.background="color"},this.firstname.innerHTML=e,this.lastname.innerHTML=t,n&&(this.color=n),this.results.refresh()},e.prototype.start=function(){ks.addClass(this.like,"active"),ks.addClass(this.dislike,"active")},e.CSS_NAME="vms-lw-candidate",e}(N),Pa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oa=function(a){function r(e){var t=a.call(this,document.createElement("div"))||this;return t.candidate1Color="#d25f5f",t.candidate2Color="#5c9ad3",t.endScreenShown=!1,t.strokeWidth=3,t.paused=!1,t.container=e,t.element.className=r.CSS_NAME,t.candidateContainer=document.createElement("div"),t.candidateContainer.className="vms-candidates-container",t.candidate1Container=document.createElement("div"),t.candidate1Container.className="lw-candidate1",t.headline=document.createElement("div"),t.headline.className="vms-lw-headline",t.headline.innerHTML="Not long to go now! Voting is almost open.",t.candidate2Container=document.createElement("div"),t.candidate2Container.className="lw-candidate2",t.firstCandidate=new Ia(t.candidate1Color),t.candidate1Container.appendChild(t.firstCandidate.element),t.firstCandidate.refresh("","First","Candidate"),t.secondCandidate=new Ia(t.candidate2Color),t.candidate2Container.appendChild(t.secondCandidate.element),t.secondCandidate.refresh("","Second","Candidate"),t.metadataContainer=document.createElement("div"),t.metadataContainer.className="vms-lw-metadata",t.metadataContainer.appendChild(t.headline),t.candidateContainer.append(t.candidate1Container),t.candidateContainer.append(t.candidate2Container),t.metadataContainer.appendChild(t.candidateContainer),t.element.appendChild(t.metadataContainer),t.strokeWidth=2,t.hide(),t}return Pa(r,a),r.prototype.hide=function(){a.prototype.hide.call(this),ks.removeClass(this.container.view.element,"vms-live-worm-enabled")},r.prototype.start=function(){this.headline.innerHTML="Voting is officially OPEN",this.firstCandidate.start(),this.secondCandidate.start()},r.prototype.createSvg=function(){this.div.innerHTML="",this.svg=document.createElement("svg");var t=this.container.view.wrapper.offsetWidth,e=r.VIEW_HEIGHT;this.svg.setAttribute("width",""+t),this.svg.setAttribute("height",""+e),this.div.appendChild(this.svg)},r.prototype.mergeData=function(a){this.savedData||(this.savedData={});for(var e=0,t=Object.keys(a),n;e<t.length;e++)n=t[e],this.savedData[n]||(this.savedData[n]=a[n]);return this.savedData},r.prototype.paint=function(t){if(!this.paused){var e=90;this.container.getService(Bs.environment).browser.isMobile()&&(e=50),t=this.mergeData(t);var n=Object.keys(t);if(0<n.length){for(var i=[],l=[],o=0,a=n,s;o<a.length;o++)s=t[a[o]]||[.5,.5],i.push(s[0]),l.push(s[1]);i.length>e&&(i=i.slice(i.length-e),l=l.slice(l.length-e)),this.redraw(i.map(function(t){return r.VIEW_HEIGHT-t*r.VIEW_HEIGHT}),l.map(function(t){return r.VIEW_HEIGHT-t*r.VIEW_HEIGHT}))}else this.redraw([],[])}},r.prototype.initView=function(){var t=document.createElement("div");t.className="vms-live-worm-svg",t.style.width="100%",t.style.height=r.VIEW_HEIGHT+"px",t.style["z-index"]=1e5,t.style.top="0",this.div=t,this.createSvg(),this.element.appendChild(this.div)},r.prototype.redraw=function(p,e){for(var t=0,n="",i=p[0],r=0,o=0,a=p;o<a.length;o++){a[o];var s=m=[t,i];(s=[t+=5,i=p[++r]])[1]&&(n+="<line x1=\""+m[0]+"\" y1=\""+m[1]+"\" x2=\""+s[0]+"\" y2=\""+s[1]+"\" style=\"stroke:"+this.candidate1Color+";stroke-width:"+this.strokeWidth+"\"></line>")}i=e[0],r=0,t=0;for(var c=0,l=e;c<l.length;c++){var m;l[c],s=m=[t,i],(s=[t+=5,i=e[++r]])[1]&&(n+="<line x1=\""+m[0]+"\" y1=\""+m[1]+"\" x2=\""+s[0]+"\" y2=\""+s[1]+"\" style=\"stroke:"+this.candidate2Color+";stroke-width:"+this.strokeWidth+"\"></line>")}n=this.addDefaultLines(n),this.createSvg(),this.svg.innerHTML=n,this.svg.innerHTML+="",this.div.innerHTML+=""},r.prototype.disableButtons=function(){this.firstCandidate.disableVote(),this.secondCandidate.disableVote()},r.prototype.enableButtons=function(){this.paused||(this.firstCandidate.enableVote(),this.secondCandidate.enableVote())},r.prototype.setPlayback=function(p,e){var t;if(this.firstCandidate.actionContainer.style.display="none",this.secondCandidate.actionContainer.style.display="none",this.headline.style.display="none",null===(t=e.extendedMetadata)||void 0===t?void 0:t.cuePoints)for(var n=0,i=e.extendedMetadata.cuePoints,r;n<i.length;n++)if(r=i[n],"liveworm"===r.name){for(var o=parseInt(r.time),a={},s=0,c=Object.keys(p),l;s<c.length;s++)l=c[s],a[o+parseInt(l)]=p[l];p=a;for(var m=0;m<o;m++)p[m]=[.5,.5]}console.log("PLAYBACK DATA",p),this.playbackData=p},r.prototype.addDefaultLines=function(t){return"<line x1=\"0\" y1=\"0\" x2=\""+this.container.view.wrapper.offsetWidth+"\" y2=\"0\" \n                style=\"stroke: #404446;\"></line>\n            <text x=\"10\" y=\"30\" class=\"svg-text\">Up Votes</text>\n            <line x1=\"0\" y1=\""+.5*r.VIEW_HEIGHT+"\" x2=\""+this.container.view.wrapper.offsetWidth+"\" y2=\""+.5*r.VIEW_HEIGHT+"\" \n                  style=\"stroke: #555;stroke-width: 2;stroke-dasharray: 5,5;\"></line>\n            <line x1=\"0\" y1=\""+r.VIEW_HEIGHT+"\" x2=\""+this.container.view.wrapper.offsetWidth+"\" y2=\""+r.VIEW_HEIGHT+"\" \n                    style=\"stroke: #404446;\"></line>\n            <text x=\"10\" y=\""+(r.VIEW_HEIGHT-20)+"\" class=\"svg-text\">Down Votes</text>"+t},r.prototype.showEndScreen=function(a){if(!this.endScreenShown){this.endScreenShown=!0;var e=Object.keys(a),t=e[e.length-1];this.firstCandidate.finalScore=a[t][0],this.secondCandidate.finalScore=a[t][1],ks.addClass(this.element,"vms-lw-ended"),this.headline.innerHTML="Voting has now finished - thank you for participating.",this.candidate1Container.style.display="none",this.candidate2Container.style.display="none",this.div.style.display="none",this.resultContainer=document.createElement("div"),ks.addClass(this.resultContainer,"vms-lw-results"),this.resultContainer.appendChild(this.firstCandidate.results.element),this.resultContainer.appendChild(this.secondCandidate.results.element),this.element.appendChild(this.resultContainer),this.firstCandidate.results.refresh(),this.secondCandidate.results.refresh()}},r.prototype.attachTo=function(t){t.appendChild(this.element)},r.VIEW_HEIGHT=100,r.CSS_NAME="vms-live-worm",r}(N),La=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ma=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return La(e,n),e.prototype.getS3Url=function(){return"prod"===this.container.getService(Bs.environment).getEnvName()?e.PROD_S3_URL:e.NON_PROD_S3_URL},e.prototype.getLambdaUrl=function(){return"prod"===this.container.getService(Bs.environment).getEnvName()?e.PROD_LAMBDA_URL:e.NON_PROD_LAMBDA_URL},e.NON_PROD_LAMBDA_URL="https://kk2v1j15q2.execute-api.ap-southeast-2.amazonaws.com/default/video-live-worm",e.NON_PROD_S3_URL="https://video-live-worm.s3.ap-southeast-2.amazonaws.com",e.PROD_S3_URL="https://video-live-worm-prod.s3.ap-southeast-2.amazonaws.com",e.PROD_LAMBDA_URL="https://7cxw7l028c.execute-api.ap-southeast-2.amazonaws.com/default/video-live-worm",e}(u),Ra=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Da=function(l,e,o,t){return new(o||(o=Promise))(function(n,i){function r(n){try{s(t.next(n))}catch(t){i(t)}}function a(n){try{s(t.throw(n))}catch(t){i(t)}}function s(i){var s;i.done?n(i.value):(s=i.value,s instanceof o?s:new o(function(t){t(s)})).then(r,a)}s((t=t.apply(l,e||[])).next())})},ka=function(l,e){function t(t){return function(o){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&t[0]?n.return:t[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,t[1])).done)return i;switch(n=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=0<i.length&&i[i.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}t=e.call(l,s)}catch(a){t=[6,a],n=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a,n,i,c;return c={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},Va=function(s){function r(e,l,n,i){void 0===i&&(i="live");var r=s.call(this,e)||this;r.serviceUrl="",r.s3Url="",r.debug=!1,r.readAttempts=1,r.eventsType="live",r.capiId=l,r.userId=n;var o=new Ma(e);return r.serviceUrl=o.getLambdaUrl(),r.s3Url=o.getS3Url(),r.eventsType=i,r}return Ra(r,s),r.prototype.getS3Url=function(t){return this.s3Url+"/"+this.capiId+"/"+this.capiId+"-"+Os(t)+".json"},r.prototype.getHash=function(){return this.userId},r.prototype.sendRequest=function(a,o,t){return void 0===a&&(a="ping"),void 0===o&&(o=null),void 0===t&&(t=null),Da(this,void 0,void 0,function(){var n;return ka(this,function(s){switch(s.label){case 0:return n={capiId:this.capiId,event:a,updatedAt:Ps(Date.now()/1e3),hash:this.getHash()},o&&(n.score1=o),t&&(n.score2=t),this.log("send request",a,o,t),[4,fetch(this.serviceUrl,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:n})})];case 1:return[2,s.sent()];}})})},r.prototype.read=function(){return Da(this,void 0,void 0,function(){var t,e,n,i;return ka(this,function(o){switch(o.label){case 0:return"live"===this.eventsType?(t=this.readTimestamp||Ps(Date.now()/1e3)-r.S3_PROCESSING_DELAY,this.log("read",t),e=this.getS3Url(t),[4,fetch(e).then(function(t){return t.ok?t.json():{}},function(){return{}})]):[2];case 1:return n=o.sent(),0===Object.keys(n).length?(this.readTimestamp=t,this.readAttempts--,i=Ms.getSearchParams(),0===this.readAttempts||i.liveWormAdmin?(this.readAttempts=2,this.readTimestamp=null,this.log("read - s3 / fallback read from AWS"),[4,this.readFromAws()]):[3,3]):[3,4];case 2:return[2,o.sent()];case 3:return[2,{}];case 4:return this.readTimestamp=null,this.readAttempts=2,this.log("read - s3 response",n),[2,n];}})})},r.prototype.readFromAws=function(){return Da(this,void 0,void 0,function(){var n;return ka(this,function(e){switch(e.label){case 0:return"live"===this.eventsType?(this.log("join"),[4,this.sendRequest("read")]):[2];case 1:if((n=e.sent()).ok)return[2,n.json()];throw"Not started";}})})},r.prototype.hasStarted=function(){return Da(this,void 0,void 0,function(){var n;return ka(this,function(e){switch(e.label){case 0:return"live"===this.eventsType?(0,this.log("has started",0),n=this.getS3Url(0)+"?t="+Date.now()+"}",[4,fetch(n).then(function(t){return t.ok},function(){return!1})]):[2];case 1:return[2,e.sent()];}})})},r.prototype.getMetadata=function(){return Da(this,void 0,void 0,function(){var n;return ka(this,function(e){switch(e.label){case 0:return n=this.s3Url+"/"+this.capiId+"/"+this.capiId+"-00.json?t="+Date.now(),[4,fetch(n).then(function(t){return!!t.ok&&t.json()},function(){return!1})];case 1:return[2,e.sent()];}})})},r.prototype.hasEnded=function(){return Da(this,void 0,void 0,function(){var n;return ka(this,function(e){switch(e.label){case 0:return"live"===this.eventsType?(n=this.s3Url+"/"+this.capiId+"/"+this.capiId+"-end.json?t="+Date.now(),this.log("has ended",Date.now()/1e3),[4,fetch(n).then(function(t){return!!t.ok&&t.json()},function(){return!1})]):[2];case 1:return[2,e.sent()];}})})},r.prototype.getPlayback=function(){return Da(this,void 0,void 0,function(){var n;return ka(this,function(e){switch(e.label){case 0:return n=this.s3Url+"/"+this.capiId+"/playback-"+this.capiId+".json?t="+Date.now(),this.log("has ended",Date.now()/1e3),[4,fetch(n).then(function(t){return!!t.ok&&t.json()},function(){return!1})];case 1:return[2,e.sent()];}})})},r.prototype.join=function(){return Da(this,void 0,void 0,function(){var n;return ka(this,function(e){switch(e.label){case 0:return"live"===this.eventsType?(this.log("join"),[4,this.sendRequest("join")]):[2];case 1:if((n=e.sent()).ok)return[2,n.json()];throw"Not started";}})})},r.prototype.voteUpC1=function(){return Da(this,void 0,void 0,function(){return ka(this,function(t){switch(t.label){case 0:return[4,this.vote(.9,null)];case 1:return[2,t.sent()];}})})},r.prototype.voteDownC1=function(){return Da(this,void 0,void 0,function(){return ka(this,function(t){switch(t.label){case 0:return[4,this.vote(.1,null)];case 1:return[2,t.sent()];}})})},r.prototype.voteUpC2=function(){return Da(this,void 0,void 0,function(){return ka(this,function(t){switch(t.label){case 0:return[4,this.vote(null,.9)];case 1:return[2,t.sent()];}})})},r.prototype.voteDownC2=function(){return Da(this,void 0,void 0,function(){return ka(this,function(t){switch(t.label){case 0:return[4,this.vote(null,.1)];case 1:return[2,t.sent()];}})})},r.prototype.vote=function(a,e){return Da(this,void 0,void 0,function(){return ka(this,function(t){switch(t.label){case 0:return"live"===this.eventsType?(this.log("vote",a,e),[4,this.sendRequest("vote",a,e)]):[2];case 1:return[2,t.sent()];}})})},r.prototype.log=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.debug&&console.log("[LiveWorm]",n)},r.S3_PROCESSING_DELAY=3,r}(u),Ba=function(l,e,o,t){return new(o||(o=Promise))(function(n,i){function r(n){try{s(t.next(n))}catch(t){i(t)}}function a(n){try{s(t.throw(n))}catch(t){i(t)}}function s(i){var s;i.done?n(i.value):(s=i.value,s instanceof o?s:new o(function(t){t(s)})).then(r,a)}s((t=t.apply(l,e||[])).next())})},xa=function(l,e){function t(t){return function(o){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&t[0]?n.return:t[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,t[1])).done)return i;switch(n=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=0<i.length&&i[i.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}t=e.call(l,s)}catch(a){t=[6,a],n=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a,n,i,c;return c={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},Ua=function(){function l(a,i,t){void 0===t&&(t="live"),this.currentSecond=0,this.twoSecondMarker=0,this.thirtySecondMarker=0,this.hasStarted=!1,this.hasEnded=!1,this.voteTimer=0,this.track_ended=!1,this.track_open=!1,this.track_notopen=!1,this.eventsType="live",this.container=a,this.plugin=i,this.eventsType=t,this.setEvents()}return l.prototype.checkEnded=function(e){return Ba(this,void 0,void 0,function(){var t;return xa(this,function(n){switch(n.label){case 0:return[4,e.hasEnded()];case 1:if(t=n.sent())if(t.reason)switch(t.reason){case"paused":this.plugin.view.headline.innerHTML="Voting has now closed! Stay tuned for the results.",this.plugin.view.paused=!0,this.plugin.view.firstCandidate.disableVote(),this.plugin.view.secondCandidate.disableVote();break;case"final":this.plugin.view.hide(),this.plugin.enabled=!1,ks.removeClass(this.container.view.element,"vms-live-worm-enabled");}else this.hasEnded=!0,this.trackOnce(l.ANALYTICS_ENDED),this.plugin.view.showEndScreen(t);return[2];}})})},l.prototype.trackOnce=function(e){var t=this.container.getService(Bs.analytics);e===l.ANALYTICS_ENDED?this.track_ended||(this.track_ended=!0,t.omniture.track([],{eVar178:l.ANALYTICS_ENDED})):e===l.ANALYTICS_OPEN?this.track_open||(this.track_open=!0,t.omniture.track([],{eVar178:l.ANALYTICS_OPEN})):e===l.ANALYTICS_NOTOPEN?this.track_notopen||(this.track_notopen=!0,t.omniture.track([],{eVar178:l.ANALYTICS_NOTOPEN})):void 0},l.prototype.setEvents=function(){var e=this;if(this.currentSecond=Ps(Date.now()/1e3),this.plugin.enabled){var a=this.container.getService(Bs.eventManager),t=this.container.getService(Bs.context),c=new Va(this.container,t.capiVideo.id,this.plugin.userId,this.eventsType),n=this.container.getService(Bs.analytics);this.setTimeEvents(),a.addSingleEventListener(this.container,"play",function(){return Ba(e,void 0,void 0,function(){var n;return xa(this,function(e){switch(e.label){case 0:return this.plugin.enabled?(ks.addClass(this.container.view.element,"vms-live-worm-enabled"),this.plugin.view.initView(),this.plugin.view.paint({}),"live"===this.eventsType&&this.checkEnded(c),[4,c.getMetadata()]):[3,2];case 1:return n=e.sent(),this.plugin.view.firstCandidate.refresh(n.candidate1.image||"",n.candidate1.firstName,n.candidate1.lastName,n.candidate1.color),this.plugin.view.secondCandidate.refresh(n.candidate2.image||"",n.candidate2.firstName,n.candidate2.lastName,n.candidate2.color),n.candidate1.color&&(this.plugin.view.candidate1Color=n.candidate1.color,this.plugin.view.firstCandidate.pictureContainer.style.border="solid 3px "+n.candidate1.color),n.candidate2.color&&(this.plugin.view.candidate2Color=n.candidate2.color,this.plugin.view.secondCandidate.pictureContainer.style.border="solid 3px "+n.candidate2.color),[3,3];case 2:ks.removeClass(this.container.view.element,"vms-live-worm-enabled"),e.label=3;case 3:return[2];}})})}),a.addCustomListener(this.container,l.EVENT_NEXT_SECOND,function(){return Ba(e,void 0,void 0,function(){var e,t,n,i,r;return xa(this,function(a){switch(a.label){case 0:return"live"===this.eventsType?this.plugin.enabled?this.hasStarted?[4,c.read()]:[3,2]:[2]:[3,3];case 1:e=a.sent(),this.plugin.view.paint(e),0<this.voteTimer?(this.plugin.view.disableButtons(),this.voteTimer--):this.plugin.view.enableButtons(),a.label=2;case 2:return this.hasStarted?this.hasEnded?this.trackOnce(l.ANALYTICS_ENDED):this.trackOnce(l.ANALYTICS_OPEN):this.trackOnce(l.ANALYTICS_NOTOPEN),[3,4];case 3:for(this.plugin.view.savedData={},t={},n=90,this.container.getService(Bs.environment).browser.isMobile()&&(n=50),i=0;i<n;i++)0<(r=Ps(this.container.bcPlayer().currentTime())+i-n)&&(t[r]=this.plugin.view.playbackData[r]);this.plugin.view.paint(t),a.label=4;case 4:return[2];}})})}),a.addCustomListener(this.container,l.EVENT_NEXT_2,function(){return Ba(e,void 0,void 0,function(){var e;return xa(this,function(t){switch(t.label){case 0:return this.plugin.enabled&&"live"===this.eventsType?this.hasStarted?[3,2]:(e=this,[4,c.hasStarted()]):[2];case 1:e.hasStarted=t.sent(),this.hasStarted&&a.trigger(this.container,l.EVENT_STARTED),t.label=2;case 2:return this.checkEnded(c),[2];}})})}),a.addCustomListener(this.container,l.EVENT_NEXT_30,function(){e.plugin.enabled&&"live"===e.eventsType&&e.hasStarted&&c.join()}),a.addCustomListener(this.container,l.EVENT_STARTED,function(){"live"===e.eventsType&&(c.join(),e.plugin.view.start(),ks.onClick(e.plugin.view.firstCandidate.like,function(){0===e.voteTimer&&e.plugin.view.firstCandidate.voteAllowed&&(e.plugin.view.firstCandidate.displayLike(),e.plugin.view.firstCandidate.increaseScore(),n.omniture.track([R.LIVEWORM_THUMBSUP],{eVar177:""+e.plugin.view.firstCandidate.getFullName()}),c.voteUpC1(),e.voteTimer=l.VOTE_TIMER_LIMITATION)}),ks.onClick(e.plugin.view.firstCandidate.dislike,function(){0===e.voteTimer&&e.plugin.view.firstCandidate.voteAllowed&&(e.plugin.view.firstCandidate.displayDislike(),e.plugin.view.firstCandidate.decreaseScore(),n.omniture.track([R.LIVEWORM_THUMBSDOWN],{eVar177:""+e.plugin.view.firstCandidate.getFullName()}),c.voteDownC1(),e.voteTimer=l.VOTE_TIMER_LIMITATION)}),ks.onClick(e.plugin.view.secondCandidate.like,function(){0===e.voteTimer&&e.plugin.view.secondCandidate.voteAllowed&&(e.plugin.view.secondCandidate.displayLike(),e.plugin.view.secondCandidate.increaseScore(),n.omniture.track([R.LIVEWORM_THUMBSUP],{eVar177:""+e.plugin.view.secondCandidate.getFullName()}),c.voteUpC2(),e.voteTimer=l.VOTE_TIMER_LIMITATION)}),ks.onClick(e.plugin.view.secondCandidate.dislike,function(){0===e.voteTimer&&e.plugin.view.secondCandidate.voteAllowed&&(e.plugin.view.secondCandidate.displayDislike(),e.plugin.view.secondCandidate.decreaseScore(),n.omniture.track([R.LIVEWORM_THUMBSDOWN],{eVar177:""+e.plugin.view.secondCandidate.getFullName()}),c.voteDownC2(),e.voteTimer=l.VOTE_TIMER_LIMITATION)}))})}},l.prototype.setTimeEvents=function(){var e=this,t=this.container.getService(Bs.eventManager);t.addListener(this.container,"timeupdate",function(){if(e.plugin.enabled&&!e.hasEnded){var n=Ps(Date.now()/1e3);n>e.currentSecond&&(e.currentSecond=n,t.trigger(e.container,l.EVENT_NEXT_SECOND))}}),t.addCustomListener(this.container,l.EVENT_NEXT_SECOND,function(){e.plugin.enabled&&(0===e.thirtySecondMarker&&(t.trigger(e.container,l.EVENT_NEXT_30),e.thirtySecondMarker=31),e.thirtySecondMarker--,0===e.twoSecondMarker&&(t.trigger(e.container,l.EVENT_NEXT_2),e.twoSecondMarker=3),e.twoSecondMarker--)})},l.ANALYTICS_ENDED="Ended",l.ANALYTICS_OPEN="Open",l.ANALYTICS_NOTOPEN="Not Open",l.EVENT_NEXT_SECOND="LW_ON_NEXT_SECOND",l.EVENT_NEXT_2="LW_ON_NEXT_2",l.EVENT_NEXT_30="LW_ON_NEXT_30",l.EVENT_STARTED="LW_EVENT_STARTED",l.VOTE_TIMER_LIMITATION=5,l}(),Ha=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ja=function(l,e,o,t){return new(o||(o=Promise))(function(n,i){function r(n){try{s(t.next(n))}catch(t){i(t)}}function a(n){try{s(t.throw(n))}catch(t){i(t)}}function s(i){var s;i.done?n(i.value):(s=i.value,s instanceof o?s:new o(function(t){t(s)})).then(r,a)}s((t=t.apply(l,e||[])).next())})},Ga=function(l,e){function t(t){return function(o){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&t[0]?n.return:t[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,t[1])).done)return i;switch(n=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=0<i.length&&i[i.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}t=e.call(l,s)}catch(a){t=[6,a],n=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a,n,i,c;return c={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},Ya=function(a){function e(e){var o=a.call(this,e)||this;o.enabled=!1,o.current=0,o.score1=.5,o.score2=.5;var n=o.getService(Bs.eventManager),s=o.getService(Bs.context);return n.addCustomListener(e,qo.BC_READY,function(){return ja(o,void 0,void 0,function(){var r,e,t,n,i;return Ga(this,function(o){switch(o.label){case 0:return r=!1,e=s.auth,t=this.getService(Bs.utag),n=t.get("pc_pcsid"),e.getAuthProvider()===ze.PROVIDER_IDP&&ze.getStatusFromCookie()===ze.USER_SUBSCRIBER&&(r=!0),0<s.bcVideo.duration?"Yes"===s.bcVideo.custom_fields.live_worm?[4,new Va(this.container,s.capiVideo.id,"playback").getPlayback()]:[3,2]:[3,4];case 1:return(i=o.sent())&&(this.enabled=!0,this.events=new Ua(this.container,this,"playback"),this.view.setPlayback(i,s.capiVideo)),[3,3];case 2:this.enabled=!1,this.view.hide(),o.label=3;case 3:return[3,5];case 4:"Yes"===s.bcVideo.custom_fields.live_worm&&(r?(this.userId=window.btoa(n+"-"+s.capiVideo.id),this.enabled=!0,this.events=new Ua(this.container,this)):(this.enabled=!1,this.view.hide())),o.label=5;case 5:return[2];}})})}),o.view=new Oa(e),n.addListener(e,"play",function(){o.enabled&&(o.view.show(),o.container.view.wrapper.appendChild(o.view.element))}),o}return Ha(e,a),e.pluginName="PLUGIN_LIVE_WORM",e.SCORE_INCREMENT=.1,e.STORAGE_USER_ID="vms-livew-userid",e.STORAGE_SCORE1="vms-lw-user-score1",e.STORAGE_SCORE2="vms-lw-user-score2",e}(A),Wa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fa=function(a){function e(e){var i=a.call(this,e)||this;return i.setEvents(),i}return Wa(e,a),e.prototype.setEvents=function(){var a=this,e=this.container.getService(Bs.eventManager);e.addCustomListener(this.container,qo.BC_READY,function(){var i=a.container.getService(Bs.context);e.addListener(a.container,"ima3-started",function(){if(!i.adsDisabled){var e=a.container.player.getBCPlayer();e&&e.ima3&&!a.adInterval&&(a.adInterval=setInterval(function(){var t;(null===(t=e.ima3.adsManager)||void 0===t?void 0:t.getAdSkippableState())&&(a.skipButton=document.createElement("div"),a.skipButton.className="vms-skip-button",a.container.view.wrapper.appendChild(a.skipButton),clearInterval(a.adInterval),a.adInterval=null,ks.onClick(a.skipButton,function(){var t;e.play(),null===(t=e.ima3.adsManager)||void 0===t||t.skip(),a.removeButton()}))},500))}}),e.addMultipleListener(a.container,["ima3-started","play","ended","ima3-all-ads-completed"],function(){a.removeButton()})})},e.prototype.removeButton=function(){try{this.container.view.wrapper.removeChild(this.skipButton)}catch(t){}this.skipButton=null},e.pluginName="PLUGIN_SKIPPABLE_AD",e}(A),Ka=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xa=function(a){function s(e){var i=a.call(this,e)||this;return i.markerAdded=!1,i.setEvents(),i}return Ka(s,a),s.prototype.setEvents=function(){var a=this,e=this.container.getService(Bs.eventManager);e.addListener(this.container,"loadedmetadata",function(){ks.removeClass(a.container.view.element,s.CSS_CLASS_DVR)}),e.addListener(this.container,"play",function(){0>=a.container.player.videoDuration?ks.addClass(a.container.view.wrapper,s.CSS_CLASS_LIVE):ks.removeClass(a.container.view.wrapper,s.CSS_CLASS_LIVE),a.durationContainer&&ks.addClass(a.durationContainer,"hidden")}),e.addListener(this.container,"timeupdate",function(){var t=a.container.bcPlayer().liveTracker;if((null==t?void 0:t.isLive())&&(ks.addClass(a.container.view.element,s.CSS_CLASS_DVR),!a.markerAdded)){a.markerAdded=!0;var n=a.container.view.wrapper.querySelector(".vjs-live-display");n&&ks.onClick(n,function(){var e;a.container.bcPlayer().liveTracker&&(null===(e=a.container.bcPlayer().liveTracker)||void 0===e||e.seekToLiveEdge(),ks.addClass(a.durationContainer,"hidden"))}),a.durationContainer=document.createElement("div"),a.durationContainer.className="vms-dvr-scrub-marker hidden",a.container.view.wrapper.appendChild(a.durationContainer);var i=a.getService(Bs.environment);i.getBrowser().isDesktop()||(e.addMultipleListener(a.container,["seeking","timeupdate"],function(){ks.addClass(a.durationContainer,"hidden");var e=a.container.view.element.querySelector(".vjs-play-progress.vjs-slider-bar");a.durationContainer.style.left=e.clientWidth-(i.browser.isIOS()&&!i.browser.isMobile()?-120:50)+"px"}),e.addListener(a.container,"seeking",function(){ks.removeClass(a.durationContainer,"hidden");var e=a.container.bcPlayer();a.durationContainer.innerHTML="-"+M.formatDuration(e.liveTracker.liveCurrentTime()-e.currentTime())}))}})},s.pluginName="PLUGIN_LIVE_STREAM",s.CSS_CLASS_DVR="vms-dvr",s.CSS_CLASS_LIVE="vjs-live-stream",s}(A),$a=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),za=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.isSkippable=!1,n.container=t,n.element.className=e.CSS_NAME,n.adText=document.createElement("div"),n.adText.innerHTML="",n.adText.className="vms-ad-count-text",n.element.appendChild(n.adText),n}return $a(e,a),e.prototype.display=function(n){var e=this.container.bcPlayer();!this.container.getService(Bs.context).ssai&&(!e.ima3||e.ima3.currentAd&&e.ima3.currentAd.isSkippable())||n.appendChild(this.element)},e.CSS_NAME="vms-ad-count",e}(N),Qa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qa=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.container.getService(Bs.environment).browser.isMobile()||(n.view=new za(n.container),n.setEvents()),n}return Qa(e,a),e.prototype.setEvents=function(){var d=this,e=this.getService(Bs.context),t=this.getService(Bs.eventManager);t.addListener(this.container,"ads-ad-started",function(){var t,n,i,r,o;if(!e.adsDisabled){d.view.show();var a;if(null===(n=null===(t=d.container.bcPlayer())||void 0===t?void 0:t.ima3)||void 0===n?void 0:n.adControlBar)(a=d.container.bcPlayer().ima3.adControlBar).el_.insertBefore(d.view.adText,a.progressControl.el_),a.el_.insertBefore(a.currentTimeDisplay.el_,a.progressControl.el_);else{var s=null===(o=null==(a=null===(r=null===(i=document.querySelector(".vjs-ssai-ad-remaining-time"))||void 0===i?void 0:i.parentNode)||void 0===r?void 0:r.parentNode)?void 0:a.querySelector(".vjs-ssai-ad-remaining-time"))||void 0===o?void 0:o.parentNode;a.insertBefore(d.view.adText,s)}var c=d.container.player.getBCPlayer();1<c.ima3.currentAdEventInfo.adPodLength?(d.view.display(d.container.bcPlayer().el_),d.view.adText.innerHTML="Ad "+c.ima3.currentAd.j.adPodInfo.adPosition+" of "+c.ima3.currentAdEventInfo.adPodLength+" \xB7 "):d.view.adText.innerHTML="Ad "}}),t.addListener(this.container,"play",function(){d.view.hide()}),t.addListener(this.container,"ads-ad-ended",function(){d.view.hide()}),t.addListener(this.container,"ima3-complete",function(){d.container.bcPlayer().userActive(!0)})},e.pluginName="PLUGIN_AD_COUNTER_DISPLAY",e}(A),Za=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ja=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.plugins={},e}return Za(e,n),e.prototype.get=function(t){return this.plugins[t]},e.prototype.save=function(n,e){if(this.plugins[n])throw new Error("Cannot register 2 plugins of the same name ("+n+")");this.plugins[n]=e,this.container.log("[PLUGINS]",n+" registered")},e.prototype.load=function(){var t=this.getService(Bs.environment);-1<Ds.PREMIUM_VIDEO_SITES.indexOf(t.getDomain())&&!Ms.isAmp()&&this.save(Si.pluginName,new Si(this.container)),this.save(lo.pluginName,new lo(this.container)),this.save(Xa.pluginName,new Xa(this.container)),this.save(Xn.pluginName,new Xn(this.container)),this.save(kt.pluginName,new kt(this.container)),this.save(yo.pluginName,new yo(this.container)),this.save(Ke.pluginName,new Ke(this.container)),this.save(si.pluginName,new si(this.container)),this.save(Be.pluginName,new Be(this.container)),this.save(Ro.pluginName,new Ro(this.container)),this.save(nt.pluginName,new nt(this.container)),this.save(Do.pluginName,new Do(this.container)),this.save(Vr.pluginName,new Vr(this.container)),this.save(Dr.pluginName,new Dr(this.container)),this.save(Ie.pluginName,new Ie(this.container)),this.save(Rr.pluginName,new Rr(this.container)),this.save(En.pluginName,new En(this.container)),this.save(An.pluginName,new An(this.container)),this.save(rt.pluginName,new rt(this.container)),this.save(Vo.pluginName,new Vo(this.container)),this.save(fe.pluginName,new fe(this.container)),this.save(Ho.pluginName,new Ho(this.container)),this.save(Yo.pluginName,new Yo(this.container)),this.save(ar.pluginName,new ar(this.container)),this.save(cr.pluginName,new cr(this.container)),this.save(Ki.pluginName,new Ki(this.container)),this.save(Dn.pluginName,new Dn(this.container)),this.save(Fo.pluginName,new Fo(this.container)),this.save(wa.pluginName,new wa(this.container)),this.getService(Bs.context).sticky&&this.save(ut.pluginName,new ut(this.container)),this.save(ea.pluginName,new ea(this.container)),this.save(Kt.pluginName,new Kt(this.container)),this.save(bt.pluginName,new bt(this.container)),this.save(na.pluginName,new na(this.container)),this.getService(Bs.context).isVertical()||(this.save(pe.pluginName,new pe(this.container)),this.save(Ee.pluginName,new Ee(this.container))),this.save(Sa.pluginName,new Sa(this.container)),this.save(ua.pluginName,new ua(this.container)),this.save(qi.pluginName,new qi(this.container)),this.save(Ut.pluginName,new Ut(this.container)),this.save(Ya.pluginName,new Ya(this.container)),this.save(qa.pluginName,new qa(this.container)),this.save(Fa.pluginName,new Fa(this.container))},e}(u),$o=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qo=function(a){function s(e,s){var n=a.call(this,s)||this;n.ready=!1,n.videoFetched=!1,n.videoError=!1,n.config=n.getService(Bs.config),n.bcInfo=new pi(e,n.config),n.view=new di(e,n);var i=new po(n);if(s.register(Bs.context,i),n.plugins=new Ja(n),n.loadAnalytics(),n.plugins.load(),n.getCapiVideo(),e.getAttribute("vms-queue-id")){var r=window._vms||[];r&&r.items&&(i.vmsItem=r.items.get(e.getAttribute("vms-queue-id")))}return n.player=new Tn(n.bcInfo.accountId,n.bcInfo.getVideoId(),n),n.related=new ue(n),n.setEvents(),n}return $o(s,a),s.prototype.loadAnalytics=function(){this.getProvider().register(Bs.analytics,new ti(this)),this.getProvider().register(Bs.nielsen,new si(this))},s.prototype.getCapiVideo=function(){var t=this,e=this.getService(Bs.capi),a=this.getService(Bs.eventManager);e.fetchVideoDetails(this).then(function(e){t.getService(Bs.context).withCapiData(e);var n=t.getService(Bs.capiDecorate);n.set(e,t),n.decorateContainer(),t.videoFetched=!0,a.trigger(t,s.CAPI_MAIN_FETCHED)}).catch(function(e){t.videoFetched=!0,t.videoError=e,a.trigger(t,s.CAPI_MAIN_FETCHED)})},s.prototype.getPluginInstance=function(t){return this.plugins.get(t)},s.prototype.bcPlayer=function(){return this.player&&this.player.getBCPlayer()},s.prototype.setEvents=function(){var a=this,e=this.getService(Bs.eventManager),o=this.getService(Bs.context),t=this.getService(Bs.pageManager);e.addMultipleListener(this,["play","ads-ad-started","ads-play"],function(){t.currentlyPlaying=t.currentlyPlaying||a,o.playing=!0,a.view.element.className=a.view.element.className.replace(" vms-paused",""),ks.addClass(a.view.element," vms-playing"),a.getService(Bs.analytics).omniture.fireDelayed()}),e.addMultipleListener(this,["pause","ads-pause"],function(){t.currentlyPlaying=null,o.playing=!1,a.view.element.className=a.view.element.className.replace(" vms-playing",""),ks.addClass(a.view.element," vms-paused")}),new In(this).setEvents();var n=this.view.element.getAttribute(Ro.VMS_ATTR_TYPE);o.recommendationsType=n&&("similars"===n||"recommendations"===n)?n:"similars",e.addListener(this,"ready",function(){"similars"===o.recommendationsType?a.fetchRelated(o.capiVideo):(a.fetchRelated(o.capiVideo),e.addSingleCustomListener(a,D.CAPI_RELATED_FETCHED,function(){e.addListener(a,"play",function(){var e=o.capiVideo;a.fetchRelated(e)})}))})},s.prototype.processCapiData=function(t){var a=this;if(this.videoError)this.onPlayerError(this.videoError,t);else{var e=this.getService(Bs.context);this.getService(Bs.eventManager).trigger(this,"capi_ready"),this.player.render(t);var n=this.getService(Bs.context).vmsItem;if(n&&n.callback){var i=this.bcPlayer();i.one("loadstart",function(){n.callback(i)})}e.auth=new ze(this),this.getService(Bs.eventManager).addSingleCustomListener(this,s.BC_READY,function(){a.ready=!0;for(var n=0,e=a.view.getDefaultClasses(),t;n<e.length;n++)t=e[n],ks.addClass(a.view.element,t);var i=a.getService(Bs.environment);ks.addClass(a.view.element,"vms-"+i.getNewscorpauBrand())})}},s.prototype.render=function(t){var e=this;(this.view.wrapper.appendChild(this.player.getElement()),this.videoFetched)?this.processCapiData(t=t||window.bc):this.getService(Bs.eventManager).addCustomListener(this,s.CAPI_MAIN_FETCHED,function(){e.processCapiData(t=t||window.bc)})},s.prototype.fetchRelated=function(t){0>=this.getPluginInstance(Ie.pluginName).view.recommendations.items.length&&this.related.getMoreRelated&&this.related.fetchRelated(t)},s.prototype.onPlayerError=function(a,e){this.getService(Bs.context).errored=!0,this.player.brightcovePlayer=e(this.player.element),this.ready=!0,this.getService(Bs.eventManager).setPlayerEvents(this),this.player.brightcovePlayer.error({code:"VMS_ERROR",message:a.message,headline:a.headline,dismiss:!1});for(var t=0,n=this.view.getDefaultClasses(),i;t<n.length;t++)i=n[t],ks.addClass(this.view.element,i)},s.prototype.log=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];new uo(this).log(n)},s.BC_READY="EVENT_ON_BC_READY",s.CAPI_MAIN_FETCHED="EVENT_ON_CAPI_MAIN_FETCHED",s.PLAYER_PLAYBACK_ERROR="PLAYER_PLAYBACK_ERROR",s.PLAYER_ADS_PLAYBACK_ERROR="PLAYER_ADS_PLAYBACK_ERROR",s.CAPI_VIDEO_FETCH_ERROR="CAPI_VIDEO_FETCH_ERROR",s}(p),Zo=function(){function t(n,a){this.accountId=n,this.playerId=a}return t.prototype.getAccountId=function(){return this.accountId},t.prototype.getPlayerId=function(){return this.playerId},t.prototype.getLink=function(){var t=Ms.getSearchParams();return"https://players.brightcove.net/"+this.accountId+"/"+this.playerId+"_default/index"+(t.unminBc?"":".min")+".js"},t}(),Jo={dev:{accountId:"5295890391001",playerId:"vqQWIq9vW"},sit:{accountId:"5348771526001",playerId:"72YtGscgQ"},pat:{accountId:"5400155226001",playerId:"ablGAZd1XC"},uat:{accountId:"5348771528001",playerId:"bsd62t2yu"},beta:{accountId:"5348771529001",playerId:"bAAHiDoW20"},prod:{accountId:"5348771529001",playerId:"938M1Zecs"}},es=function(){function t(t){this.environment=t}return t.prototype.get=function(){var t=this.environment;return this.config=new Zo(Jo[t.name].accountId,Jo[t.name].playerId),this.config},t}(),ts={dev:{key:"shqpuac6pkvfcu25q49sr26u",contentUrl:"https://content-dev.api.news/v3/videos/",baseUrl:"https://content-dev.api.news/v3"},sit:{key:"shqpuac6pkvfcu25q49sr26u",recommendationsKey:"wgvss55uuq67x3xg5vxpdu7r",skyRecommendationsKey:"wgvss55uuq67x3xg5vxpdu7r",contentUrl:"https://content-sit.api.news/v3/videos/",baseUrl:"https://content-sit.api.news/v3"},pat:{key:"qatj4chkregt9nphqv73j7wf",recommendationsKey:"qatj4chkregt9nphqv73j7wf",skyRecommendationsKey:"qatj4chkregt9nphqv73j7wf",contentUrl:"https://content-pat.api.news/v3/videos/",baseUrl:"https://content-pat.api.news/v3"},uat:{key:"shqpuac6pkvfcu25q49sr26u",recommendationsKey:"wgvss55uuq67x3xg5vxpdu7r",skyRecommendationsKey:"wgvss55uuq67x3xg5vxpdu7r",contentUrl:"https://content-uat.api.news/v3/videos/",baseUrl:"https://content-uat.api.news/v3"},prod:{key:"6krsj3w249nk779d8fukqx9f",recommendationsKey:"9uz93nsd4pggfwhqcjnhmafw",skyRecommendationsKey:"vyqyg5aq85wc3k9v3pruxf5k",contentUrl:"https://content.api.news/v3/videos/",baseUrl:"https://content.api.news/v3"}},ns=function(){function t(t){this.environment=t}return t.prototype.get=function(){var a=this.environment,e="beta"===a.name?"prod":a.name,t=ts[e].recommendationsKey;return-1<Ds.SKY_SITES.indexOf(a.getDomain())&&(t=ts[e].skyRecommendationsKey),this.config=new $r(ts[e].key,ts[e].contentUrl,ts[e].baseUrl,t),this.config},t}(),as=function(){},is=function(){},rs=function(){},os=function(){this.visitor=new as,this.appMeasurement=new is,this.heartbeat=new rs},ss=function(){function r(){}return r.get=function(e){var t=Ms.getDomain(),n=Ms.getSearchParams(),i="newscorpau-";if(n.amp&&"1"===n.amp)return i=e.isProd()?r.REPORTINGSUITES.AMP:r.REPORTINGSUITES.AMP_DEV;for(var o=0,a=r.NLM_SITES,s;o<a.length;o++)if(s=a[o],-1<t.indexOf(s)){i+="nlm";break}return i+="global",e.isProd()||(i+="-dev"),i},r.NLM_SITES=[Ds.BEST_RECIPES,Ds.BODY_SOUL,Ds.DELICIOUS,Ds.GQ,Ds.KIDSPOT,Ds.VOGUE,Ds.TASTE,Ds.WHIMN],r.REPORTINGSUITES={NEWS:"newscorpau-global",NEWS_DEV:"newscorpau-global-dev",NLM:"newscorpau-nlmglobal",NLM_DEV:"newscorpau-nlmglobal-dev",AMP:"newscorpau-googleamp",AMP_DEV:"newscorpau-googleamp-dev"},r}(),ls={MARKETING_CLOUD_ORG_ID:"5FE61C8B533204850A490D4D@AdobeOrg",TRACKING_SERVER:"nsmetrics.news.com.au"},cs={RSID:"newscorpau-global-dev",TRACKING_SERVER:"nsmetrics.news.com.au",VISITOR_ID:""},ds={TRACKING_SERVER:"newscorpau.hb.omtrdc.net",PUBLISHER:"5FE61C8B533204850A490D4D@AdobeOrg"},ps=function(){function t(t){this.environment=t}return t.prototype.get=function(){var t=new os;return t.visitor.orgId=ls.MARKETING_CLOUD_ORG_ID,t.visitor.trackingServer=ls.TRACKING_SERVER,t.appMeasurement.visitorId=this.environment.visitorId(),t.appMeasurement.rsid=ss.get(this.environment),t.appMeasurement.trackingServer=cs.TRACKING_SERVER,t.heartbeat.trackingServer=ds.TRACKING_SERVER,t.heartbeat.publisher=ds.PUBLISHER,t},t}(),ms=function(){function t(t){this.environment=t,this.capi=new ns(t).get(),this.player=new es(t).get()}return t.prototype.withHeartbeat=function(){this.heartbeat=new ps(this.environment).get()},t}(),us=function(){function a(n){this.currentRequestDelay=-1,this.augmenters=new Map,this.currentPage=0,this.config=n;var a=Ms.getSearchParams();this.currentPage=a.capiPage||0}return a.prototype.registerAugmenter=function(a,e){void 0===e&&(e="default");var t=this.augmenters.get(e)||[];t.push(a),this.augmenters.set(e,t)},a.prototype.fetchVideoDetails=function(e,t,n,i){var r=this;return void 0===t&&(t=0),void 0===n&&(n=null),void 0===i&&(i=null),new Promise(function(o,p){var s=i||p,c=n||o,l="brightcove";e.bcInfo.reference&&(l="video_integrator");var m=r.config.getBaseUrl()+"/videos/"+l+"/"+e.bcInfo.id;r.sendRequest(m,function(n){return n.content?c(r.parseVideoItem(n.content,e)):0!==Object.keys(n).length||t>=a.FETCH_ATTEMPTS?s({headline:"Video not found",message:"This video was not found"}):void r.ready().then(function(){return r.fetchVideoDetails(e,++t,c,s)})})})},a.prototype.ready=function(){var e=this;return new Promise(function(t){return 0<e.currentRequestDelay?void setTimeout(function(){e.currentRequestDelay-=1,e.ready().then(function(){t()})},1):(e.currentRequestDelay=a.REQUEST_DELAY,t())})},a.prototype.getVideosWhenReady=function(a,e,t,n){var i=this;this.ready().then(function(){i.getVideosById([e.id],a,$r.RECOMMENDATION_KEY).then(function(n){t(n)}).catch(n)})},a.prototype.getVideosById=function(d,e,t){var p=this;return new Promise(function(i){for(var r=0,o=[],n=p.config.getBaseUrl()+"/videos",a=function(a){p.ready().then(function(){p.sendRequest(n+"/"+a,function(t){r++,t.content&&o.push(p.parseVideoItem(t.content,e)),r===d.length&&i(o)},null,t)})},s=0,l=d;s<l.length;s++)a(l[s])})},a.prototype.augment=function(l,e){var t=this;return void 0===e&&(e="default"),new Promise(function(n){var i=[],r=t.augmenters.get(e)||[],o=r.length;0===o&&n(l);var a=function(t){o--,i=i.concat(t),0===o&&n(i)};r.forEach(function(e){try{e.augment(l).then(function(t){a(t)}).catch(function(){a(l)})}catch(e){a(l)}})})},a.prototype.fetchRelatedVideos=function(d,e,p){var n=this;return new Promise(function(i,r){var t=n.config.getBaseUrl()+"/search/";!function(t,a){var o=/\.com\.au$/.test(e)?e:e+".com.au",s=n.getQuery(d,o,p),l=(t+=-1<t.indexOf("?")?"&":"?")+(a?"query="+s:"");n.sendRequest(l,function(o){if(o.results){for(var e=[],t=0,a=o.results,s;t<a.length;t++)s=a[t],e.push(n.parseVideoItem(s,p));return i(e)}return r([])},null,$r.RECOMMENDATION_KEY)}(t+="?sortBy=dateLive&size="+ue.PAGE_SIZE+"&page="+ ++n.currentPage,!0)})},a.prototype.fetchTrendingVideos=function(r,d){var t=this;return new Promise(function(n,i){if(d.getService(Bs.environment).isProd())return n([]);if(!Ms.getSearchParams().forceTrending)return n([]);var e=t.config.getBaseUrl()+"/search",a=Vs.getDomain(d.getService(Bs.environment)),o=/\.com\.au$/.test(a)?a:a+".com.au",s=t.getQuery(r,o,d),l=e+(-1<e.indexOf("?")?"&":"?");t.sendRequest(l+"query="+s+"&page=5",function(o){if(o.results){for(var e=[],r=0,a=o.results,s;r<a.length;r++)s=a[r],e.push(t.parseVideoItem(s,d));return n(e)}return i([])},null,$r.RECOMMENDATION_KEY)})},a.prototype.getQuery=function(e,t,n){var i="type: video ";e&&(i+=" AND target.sections.id: "+e+" "),t&&(i+=" AND target.domains: "+t+" ",-1<t.indexOf("skynews")&&(i+=" AND seoOwner.domain: "+t)),i+=a.RIGHTSTER_FD_QUERY_EXCLUSION,i+=" AND platform.id:"+n.bcInfo.accountId+"-* ";var r=n.getService(Bs.environment).getDomain();-1===Ds.PREMIUM_VIDEO_SITES.indexOf(r)&&(i+=" AND accessType:free");var o=n.getService(Bs.context);return o.isVertical()&&(i+="AND aspectRatio:\""+o.capiVideo.aspectRatio+"\""),i},a.prototype.getImages=function(l){var e=l.related,t=l.references,n={};for(var i in t){var r=t[i];if("image"===r.type){var o=r.link.media;for(var a in e)e[a].default[0]===r.id&&(n[a]=o)}}return n},a.prototype.getSectionData=function(a){var s=/^\/section\/main\/(.*)/g,e=(a.target&&a.target.sections||[]).filter(function(t){return s.test(t.path)}),r,o,l;return 0<e.length&&(r=e[0].id,o=e[0].path.split("/").pop(),l=e[0].path),{id:r,name:o,path:l}},a.prototype.getCategories=function(a){for(var e=[],t=0,n=a.target&&a.target.sections||[],i;t<n.length;t++)i=n[t].path.match(/^\/(section)\/.*\/(.*)/),i&&e.push(i.pop());return Array.from(new Set(e))},a.prototype.getKeywords=function(a){for(var e=[],t=0,n=a.categories&&a.categories.keyword||[],i;t<n.length;t++)i=n[t].path.match(/^\/(keyword)\/(.*)/),i&&e.push(i.pop());return Array.from(new Set(e))},a.prototype.parseVideoItem=function(r,e){var t=this.getImages(r),i=new l,o;i.id=r.id,i.platformId=r.platform.id,i.poster=t.primary,r.extendedMetadata&&r.extendedMetadata.cuepoints&&i.setCuePoints(r.extendedMetadata.cuepoints),i.thumbnail=e&&-1<e.view.cssClasses.indexOf("useHQThumb")?i.poster:t.thumbnail,i.source=r.rightsMetadata&&r.rightsMetadata.originatedSource;var n=this.getSectionData(r);return i.sectionId=n.id,i.sectionName=n.name,i.sectionPath=n.path,i.categories=this.getCategories(r),i.title=r.headline&&r.headline.default||"",i.duration=r.duration,i.caption=r.caption||"",i.keywords=this.getKeywords(r),i.date=r.date,i.body=r.body,i.extendedMetadata=r.extendedMetadata?r.extendedMetadata:{},i.aspectRatio=r.aspectRatio||"16:9",i.accessType=r.accessType||l.ACCESS_TYPE_FREE,i.standfirst=null===(o=r.standfirst)||void 0===o?void 0:o.default,void 0!==Ms.getSearchParams().debug&&(i.accessType=localStorage.getItem("accessType")||l.ACCESS_TYPE_FREE),i},a.prototype.sendRequest=function(a,r,e,t){void 0===e&&(e=null);var n=null;"enabled"===Ms.getSearchParams().capiHeader?n={headers:{"X-Newsapi-Api-Key":this.config.getContentKey(t)}}:-1<a.indexOf("?")?a+="&api_key="+this.config.getContentKey(t):a+="?api_key="+this.config.getContentKey(t),fetch(a,n).then(function(t){t.json().then(function(t){r(t)})}).catch(function(){return r({})})},a.RIGHTSTER_FD_QUERY_EXCLUSION=" AND -rightsMetadata.originatedSource:(Rightster_hollyscoop  OR Rightster_the_savory OR Rightster_celebrity_wire) AND -rightsMetadata.usage:fair_dealing",a.FETCH_ATTEMPTS=5,a.REQUEST_DELAY=300,a}(),gs=function(a,e,t,n){this.debug=!1,this.id=""+new Date().getTime(),this.container=a,this.eventType=e,this.hook=t;var i=Ms.getSearchParams();this.debug=i.debug,this.debug?(ks.addClass(this.container.view.element,"debug"),this.callback=function(i){return a.log("[EVENT]",e,t,n),n(i)}):this.callback=n},ys=function(){function t(){this.events=new Map,this.customEvents=new Map}return t.prototype.addMultipleListener=function(a,e,t){for(var n=0,i=e,r;n<i.length;n++)r=i[n],this.addListener(a,r,t)},t.prototype.addListener=function(a,e,t){return this.setListener(a,"on",e,t)},t.prototype.addSingleEventListener=function(a,e,t){return this.setListener(a,"one",e,t)},t.prototype.setListener=function(a,e,t,n){var i=new gs(a,e,t,n),o;return"custom"===e?((o=this.customEvents.get(a)||[]).push(i),this.customEvents.set(a,o)):((o=this.events.get(a)||[]).push(i),this.events.set(a,o),this.setPlayerEvents(a)),i},t.prototype.addCustomListener=function(a,e,t){var n=new gs(a,"custom",e,t),i=this.customEvents.get(a)||[];return i.push(n),this.customEvents.set(a,i),n},t.prototype.addSingleCustomListener=function(a,e,t){var n=new gs(a,"custom-single",e,t),i=this.customEvents.get(a)||[];return i.push(n),this.customEvents.set(a,i),n},t.prototype.trigger=function(s,e,t){for(var n=this.customEvents.get(s)||[],i=0,r=n,o;i<r.length;i++)o=r[i],e===o.hook&&("custom-single"===o.eventType?(n.splice(n.indexOf(o),1),this.customEvents.set(s,n),o.callback(t)):o.callback(t))},t.prototype.setPlayerEvents=function(a){if(a.ready&&a.bcPlayer())for(var e=a.bcPlayer(),t=this.events.get(a)||[],n;0<t.length;)n=t.pop(),"ready"===n.hook?e.ready(n.callback):("on"===n.eventType&&e.on(n.hook,n.callback),"one"===n.eventType&&e.one(n.hook,n.callback)),this.events.set(a,t)},t}(),_s=function(){function t(){}return t.register=function(n,e){e.register(Bs.config,n),e.register(Bs.environment,n.environment),e.register(Bs.capi,new us(n.capi)),e.register(Bs.capiDecorate,new D),e.register(Bs.eventManager,new ys)},t}(),Es=function(){for(var l=0,e=0,t=arguments.length;e<t;e++)l+=arguments[e].length;var n=Array(l),i=0;for(e=0;e<t;e++)for(var r=arguments[e],o=0,a=r.length;o<a;o++,i++)n[i]=r[o];return n},vs=function(){function n(t){this.collection=[],this.rendered=[],this.config=new ms(t),this.environment=t}return n.getInstance=function(e){return n.instance||(n.instance=new n(e)),n.instance},n.prototype.getProvider=function(){var t=new d;return _s.register(this.config,t),t.register(Bs.pageManager,this),t},n.prototype.decorateVms=function(){for(var a=document.getElementsByClassName("vms"),e=0,t;e<a.length;e++)t=a[e],-1===t.className.indexOf("vms-queued")&&-1===t.className.indexOf("vms-ready")&&(ks.addClass(t," vms-queued"),this.collection.push(new qo(t,this.getProvider())))},n.prototype.getDependencies=function(){var t=[this.config.player.getLink(),Jn.getScript(this.environment.name)];return this.environment.browser.isIE11()&&t.push(V.get()+"/ie.js"),this.environment.isHubPage&&t.push(V.get()+"/hub.js"),t},n.prototype.loadCss=function(){if(0===document.querySelectorAll("link[href$=\""+V.get()+"player.css\"]").length){var t=document.createElement("link");t.href=V.get()+"player.css",t.setAttribute("rel","stylesheet"),document.head.appendChild(t)}},n.prototype.loadDependencies=function(){var d=this,e=this.getDependencies(),t=[h.jsPath];void 0===window.vidora&&t.push(Ro.JS_PATH);for(var n=0,i=function(){++n===t.length+e.length&&(d.dependenciesLoaded=!0,d.ready())},r=0,o=e,a;r<o.length;r++)a=o[r],new kn(a,function(){i()}).load();for(var s=0,c=t;s<c.length;s++)a=c[s],new kn(a,function(){i()},!1).load()},n.prototype.ready=function(){var a=this;if(this.dependenciesLoaded){for(var e=function(){var e=i.collection.shift();i.currentlyPlaying=i.currentlyPlaying||e,-1===i.rendered.indexOf(e)&&(i.currentlyPlaying===e?(e.render(),i.rendered.push(e)):setTimeout(function(){e.render(),a.rendered.push(e)},500))},i=this;0<this.collection.length;)e();this.observer||this.observe()}},n.prototype.processJsQueue=function(){window._vms.items&&window._vms.items.forEach(function(t){if(!t.processed&&t.embedCode){var e=document.createElement("div");e.className="vms module";for(var n=0,i=t.classNames,r;n<i.length;n++)r=i[n],e.className+=" "+r;e.setAttribute("vms-embedcode",t.embedCode),e.setAttribute("vms-queue-id",t.key),!1===t.autoplay&&ks.addClass(e,"vms-autoplay-off"),!1===t.continuousPlay&&ks.addClass(e,"vms-continuousplay-off");var o=document.body;t.target&&"string"==typeof t.target&&(t.target=document.querySelector(t.target));var a=function(){o.appendChild(e),t.processed=!0};if(t.target){for(var s=0,l=(o=t.target).className.split(" "),c;s<l.length;s++)c=l[s],-1===c.indexOf("vms")&&ks.addClass(e,c);a=function(){o.parentNode.replaceChild(e,o),t.processed=!0}}a()}})},n.prototype.pauseAll=function(s){for(var e=0,t=this.rendered,n;e<t.length;e++)if(n=t[e],-1===s.indexOf(n)){var i=n.bcPlayer();try{i&&i.pause()}catch(t){}try{var r=i&&i.ima3&&i.ima3.adPlayer;r&&r.pause()}catch(t){}var o=n.getPluginInstance(An.pluginName);o&&o.events.pause()}},n.prototype.observe=function(){var t=this;this.observer=new MutationObserver(function(){t.decorateVms(),t.ready()}),this.observer.observe(window.document,{childList:!0,subtree:!0})},n.prototype.run=function(){var a=this;if(this.processJsQueue(),this.loadCss(),ot.isHidden()){this.environment.tabLoaded=!0;var e=setInterval(function(){ot.isHidden()||(a.loadDependencies(),clearInterval(e))},100)}else this.loadDependencies();var t=setInterval(function(){"undefined"!=typeof Promise&&(clearInterval(t),a.decorateVms())},100)},n.prototype.martini=function(p,e){void 0===e&&(e=0);for(var t=[],n=[],i=this.getProvider().get(Bs.capi),r=0,o=null,a=0,s=p;a<s.length;a++){var c=s[a],l=i.parseVideoItem(c,null);e===r?o=l:o?n.push(l):t.push(l),r++}var m=document.createElement("div");m.setAttribute("id","martini-video-container"),document.body.append(m),this.recommendations=Es([o],n,t),window._vms.push({embedCode:o.platformId,target:"#martini-video-container",classNames:["martini-fullscreen"]})},n}(),As=function(t){this.processed=!1,this.classNames=[],this.embedCode=t.embedCode,this.autoplay=t.autoplay,this.continuousPlay=t.continuousPlay,this.target=t.target,this.callback=t.callback,this.classNames=t.classNames||[]},Cs=function(){function t(t){this.pageManager=t,this.items=new Map}return t.prototype.push=function(n){"function"==typeof n&&n(function(e){n=e});var a=new As(n);a.key=n.embedCode+"-"+this.items.size,this.items.set(a.key,a),this.pageManager.processJsQueue()},t}(),Ss=vs.getInstance(new c),hs;window._vms=new Cs(Ss);var i=setInterval(function(){var t;t=!1,document&&document.body&&(Ss.run(),t=!0),t&&clearInterval(i)},100);console.log("NewsCorp - RePlayer v1.7.2-1")}]);